(self.webpackChunkqr_app=self.webpackChunkqr_app||[]).push([[179],{293:(Fa,ka,W)=>{"use strict";function Ze(e){return"function"==typeof e}function ys(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ws=ys(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function xs(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class vn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const a of n)a.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ze(r))try{r()}catch(a){t=a instanceof ws?a.errors:[a]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const a of i)try{gn(a)}catch(u){t=t??[],u instanceof ws?t=[...t,...u.errors]:t.push(u)}}if(t)throw new ws(t)}}add(t){var n;if(t&&t!==this)if(this.closed)gn(t);else{if(t instanceof vn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&xs(n,t)}remove(t){const{_finalizers:n}=this;n&&xs(n,t),t instanceof vn&&t._removeParent(this)}}vn.EMPTY=(()=>{const e=new vn;return e.closed=!0,e})();const Ba=vn.EMPTY;function Zt(e){return e instanceof vn||e&&"closed"in e&&Ze(e.remove)&&Ze(e.add)&&Ze(e.unsubscribe)}function gn(e){Ze(e)?e():e.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ir={setTimeout(e,t,...n){const{delegate:r}=ir;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=ir;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Rt(e){ir.setTimeout(()=>{const{onUnhandledError:t}=te;if(!t)throw e;t(e)})}function Cs(){}const tt=bt("C",void 0,void 0);function bt(e,t,n){return{kind:e,value:t,error:n}}let Ce=null;function nt(e){if(te.useDeprecatedSynchronousErrorHandling){const t=!Ce;if(t&&(Ce={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Ce;if(Ce=null,n)throw r}}else e()}class st extends vn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Zt(t)&&t.add(this)):this.destination=Ft}static create(t,n,r){return new or(t,n,r)}next(t){this.isStopped?qe(function Ua(e){return bt("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?qe(function Es(e){return bt("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?qe(tt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const K=Function.prototype.bind;function Ue(e,t){return K.call(e,t)}class X{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){zt(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){zt(r)}else zt(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){zt(n)}}}class or extends st{constructor(t,n,r){let i;if(super(),Ze(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let a;this&&te.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ue(t.next,a),error:t.error&&Ue(t.error,a),complete:t.complete&&Ue(t.complete,a)}):i=t}this.destination=new X(i)}}function zt(e){te.useDeprecatedSynchronousErrorHandling?function lo(e){te.useDeprecatedSynchronousErrorHandling&&Ce&&(Ce.errorThrown=!0,Ce.error=e)}(e):Rt(e)}function qe(e,t){const{onStoppedNotification:n}=te;n&&ir.setTimeout(()=>n(e,t))}const Ft={closed:!0,next:Cs,error:function we(e){throw e},complete:Cs},U="function"==typeof Symbol&&Symbol.observable||"@@observable";function ft(e){return e}function li(e){return 0===e.length?ft:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let at=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const a=function tn(e){return e&&e instanceof st||function ja(e){return e&&Ze(e.next)&&Ze(e.error)&&Ze(e.complete)}(e)&&Zt(e)}(n)?n:new or(n,r,i);return nt(()=>{const{operator:u,source:g}=this;a.add(u?u.call(a,g):g?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=sr(r))((i,a)=>{const u=new or({next:g=>{try{n(g)}catch(p){a(p),u.unsubscribe()}},error:a,complete:i});this.subscribe(u)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[U](){return this}pipe(...n){return li(n)(this)}toPromise(n){return new(n=sr(n))((r,i)=>{let a;this.subscribe(u=>a=u,u=>i(u),()=>r(a))})}}return e.create=t=>new e(t),e})();function sr(e){var t;return null!==(t=e??te.Promise)&&void 0!==t?t:Promise}const Ur=ys(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let gt=(()=>{class e extends at{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Ti(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ur}next(n){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:a}=this;return r||i?Ba:(this.currentObservers=null,a.push(n),new vn(()=>{this.currentObservers=null,xs(a,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:a}=this;r?n.error(i):a&&n.complete()}asObservable(){const n=new at;return n.source=this,n}}return e.create=(t,n)=>new Ti(t,n),e})();class Ti extends gt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Ba}}function ae(e){return Ze(e?.lift)}function Dt(e){return t=>{if(ae(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Oe(e,t,n,r,i){return new Mi(e,t,n,r,i)}class Mi extends st{constructor(t,n,r,i,a,u){super(t),this.onFinalize=a,this.shouldUnsubscribe=u,this._next=n?function(g){try{n(g)}catch(p){t.error(p)}}:super._next,this._error=i?function(g){try{i(g)}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function _e(e,t){return Dt((n,r)=>{let i=0;n.subscribe(Oe(r,a=>{r.next(e.call(t,a,i++))}))})}function Ln(e){return this instanceof Ln?(this.v=e,this):new Ln(e)}function Z(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function pn(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(u){return new Promise(function(g,p){!function i(a,u,g,p){Promise.resolve(p).then(function(m){a({value:m,done:g})},u)}(g,p,(u=e[a](u)).done,u.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const uo=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ir(e){return Ze(e?.then)}function jr(e){return Ze(e[U])}function Pi(e){return Symbol.asyncIterator&&Ze(e?.[Symbol.asyncIterator])}function Pn(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const vr=function Yc(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function fo(e){return Ze(e?.[vr])}function Sn(e){return function Ga(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),a=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(v){r[v]&&(i[v]=function(T){return new Promise(function(N,F){a.push([v,T,N,F])>1||g(v,T)})})}function g(v,T){try{!function p(v){v.value instanceof Ln?Promise.resolve(v.value.v).then(m,E):A(a[0][2],v)}(r[v](T))}catch(N){A(a[0][3],N)}}function m(v){g("next",v)}function E(v){g("throw",v)}function A(v,T){v(T),a.shift(),a.length&&g(a[0][0],a[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Ln(n.read());if(i)return yield Ln(void 0);yield yield Ln(r)}}finally{n.releaseLock()}})}function Sr(e){return Ze(e?.getReader)}function Qt(e){if(e instanceof at)return e;if(null!=e){if(jr(e))return function ee(e){return new at(t=>{const n=e[U]();if(Ze(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(uo(e))return function ui(e){return new at(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Ir(e))return function bs(e){return new at(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Rt)})}(e);if(Pi(e))return Xa(e);if(fo(e))return function Fn(e){return new at(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Sr(e))return function Xc(e){return Xa(Sn(e))}(e)}throw Pn(e)}function Xa(e){return new at(t=>{(function ho(e,t){var n,r,i,a;return function Oi(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(E){try{m(r.next(E))}catch(A){u(A)}}function p(E){try{m(r.throw(E))}catch(A){u(A)}}function m(E){E.done?a(E.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(E.value).then(g,p)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Z(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(u){i={error:u}}finally{try{r&&!r.done&&(a=n.return)&&(yield a.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Yn(e,t,n,r=0,i=!1){const a=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function Wt(e,t,n=1/0){return Ze(t)?Wt((r,i)=>_e((a,u)=>t(r,a,i,u))(Qt(e(r,i))),n):("number"==typeof t&&(n=t),Dt((r,i)=>function Zc(e,t,n,r,i,a,u,g){const p=[];let m=0,E=0,A=!1;const v=()=>{A&&!p.length&&!m&&t.complete()},T=F=>m<r?N(F):p.push(F),N=F=>{a&&t.next(F),m++;let B=!1;Qt(n(F,E++)).subscribe(Oe(t,G=>{i?.(G),a?T(G):t.next(G)},()=>{B=!0},void 0,()=>{if(B)try{for(m--;p.length&&m<r;){const G=p.shift();u?Yn(t,u,()=>N(G)):N(G)}v()}catch(G){t.error(G)}}))};return e.subscribe(Oe(t,T,()=>{A=!0,v()})),()=>{g?.()}}(r,i,e,n)))}function di(e=1/0){return Wt(ft,e)}const Xn=new at(e=>e.complete());function Fi(e){return e[e.length-1]}function ki(e){return function _r(e){return e&&Ze(e.schedule)}(Fi(e))?e.pop():void 0}function Hr(e,t=0){return Dt((n,r)=>{n.subscribe(Oe(r,i=>Yn(r,e,()=>r.next(i),t),()=>Yn(r,e,()=>r.complete(),t),i=>Yn(r,e,()=>r.error(i),t)))})}function qa(e,t=0){return Dt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function go(e,t){if(!e)throw new Error("Iterable cannot be null");return new at(n=>{Yn(n,t,()=>{const r=e[Symbol.asyncIterator]();Yn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function lt(e,t){return t?function Mt(e,t){if(null!=e){if(jr(e))return function Qe(e,t){return Qt(e).pipe(qa(t),Hr(t))}(e,t);if(uo(e))return function Le(e,t){return new at(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Ir(e))return function Ge(e,t){return Qt(e).pipe(qa(t),Hr(t))}(e,t);if(Pi(e))return go(e,t);if(fo(e))return function Ts(e,t){return new at(n=>{let r;return Yn(n,t,()=>{r=e[vr](),Yn(n,t,()=>{let i,a;try{({value:i,done:a}=r.next())}catch(u){return void n.error(u)}a?n.complete():n.next(i)},0,!0)}),()=>Ze(r?.return)&&r.return()})}(e,t);if(Sr(e))return function Ms(e,t){return go(Sn(e),t)}(e,t)}throw Pn(e)}(e,t):Qt(e)}function fi(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new or({next:()=>{r.unsubscribe(),e()}});return Qt(t(...n)).subscribe(r)}function it(e){for(let t in e)if(e[t]===it)return t;throw Error("Could not find renamed property on target object.")}function ce(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ce).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function kt(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const P=it({__forward_ref__:it});function _(e){return e.__forward_ref__=_,e.toString=function(){return ce(this())},e}function H(e){return It(e)?e():e}function It(e){return"function"==typeof e&&e.hasOwnProperty(P)&&e.__forward_ref__===_}function ln(e){return e&&!!e.\u0275providers}class Y extends Error{constructor(t,n){super(oe(t,n)),this.code=t}}function oe(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function We(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function Ee(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function hi(e,t){throw new Y(-201,!1)}function Jt(e,t){null==e&&function $e(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function ge(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function cr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ui(e){return Ka(e,Ve)||Ka(e,ji)}function Ka(e,t){return e.hasOwnProperty(t)?e[t]:null}function Ja(e){return e&&(e.hasOwnProperty(xo)||e.hasOwnProperty(br))?e[xo]:null}const Ve=it({\u0275prov:it}),xo=it({\u0275inj:it}),ji=it({ngInjectableDef:it}),br=it({ngInjectorDef:it});var de=(()=>((de=de||{})[de.Default=0]="Default",de[de.Host=1]="Host",de[de.Self=2]="Self",de[de.SkipSelf=4]="SkipSelf",de[de.Optional=8]="Optional",de))();let k;function et(e){const t=k;return k=e,t}function Co(e,t,n){const r=Ui(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&de.Optional?null:void 0!==t?t:void hi(ce(e))}const ut=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),pt={},Vi="__NG_DI_FLAG__",ur="ngTempTokenPath",Eo="ngTokenPath",Do=/\n/gm,ct="\u0275",le="__source";let Hi;function Ke(e){const t=Hi;return Hi=e,t}function ru(e,t=de.Default){if(void 0===Hi)throw new Y(-203,!1);return null===Hi?Co(e,void 0,t):Hi.get(e,t&de.Optional?null:void 0,t)}function ue(e,t=de.Default){return(function Te(){return k}()||ru)(H(e),t)}function Pe(e,t=de.Default){return ue(e,gi(t))}function gi(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ao(e){const t=[];for(let n=0;n<e.length;n++){const r=H(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Y(900,!1);let i,a=de.Default;for(let u=0;u<r.length;u++){const g=r[u],p=tl(g);"number"==typeof p?-1===p?i=g.token:a|=p:i=g}t.push(ue(i,a))}else t.push(ue(r))}return t}function Wr(e,t){return e[Vi]=t,e.prototype[Vi]=t,e}function tl(e){return e[Vi]}function cn(e){return{toString:e}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),Zn=(()=>{return(e=Zn||(Zn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Zn;var e})();const wn={},Ye=[],kn=it({\u0275cmp:it}),pi=it({\u0275dir:it}),un=it({\u0275pipe:it}),Os=it({\u0275mod:it}),Bt=it({\u0275fac:it}),zi=it({__NG_ELEMENT_ID__:it});let Ls=0;function Io(e){return cn(()=>{const t=f(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||Zn.Emulated,id:"c"+Ls++,styles:e.styles||Ye,_:null,schemas:e.schemas||null,tView:null};h(n);const r=e.dependencies;return n.directiveDefs=y(r,!1),n.pipeDefs=y(r,!0),n})}function qn(e){return o(e)||s(e)}function ou(e){return null!==e}function dr(e){return cn(()=>({type:e.type,bootstrap:e.bootstrap||Ye,declarations:e.declarations||Ye,imports:e.imports||Ye,exports:e.exports||Ye,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function ke(e,t){if(null==e)return wn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}function Ut(e){return cn(()=>{const t=f(e);return h(t),t})}function o(e){return e[kn]||null}function s(e){return e[pi]||null}function l(e){return e[un]||null}function d(e,t){const n=e[Os]||null;if(!n&&!0===t)throw new Error(`Type ${ce(e)} does not have '\u0275mod' property.`);return n}function f(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||Ye,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ke(e.inputs,t),outputs:ke(e.outputs)}}function h(e){e.features?.forEach(t=>t(e))}function y(e,t){if(!e)return null;const n=t?l:qn;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(ou)}const w=0,C=1,D=2,I=3,S=4,b=5,M=6,R=7,O=8,$=9,q=10,L=11,Se=12,xe=13,rn=14,en=15,Je=16,Xe=17,xt=18,Ct=19,Qn=20,$r=21,dt=22,su=1,Hh=2,il=7,ol=8,vo=9,xn=10;function Bn(e){return Array.isArray(e)&&"object"==typeof e[su]}function fr(e){return Array.isArray(e)&&!0===e[su]}function au(e){return 0!=(4&e.flags)}function Ps(e){return e.componentOffset>-1}function hr(e){return!!e.template}function Yx(e){return 0!=(256&e[D])}function Wi(e,t){return e.hasOwnProperty(Bt)?e[Bt]:null}class qx{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function $i(){return Wh}function Wh(e){return e.type.prototype.ngOnChanges&&(e.setInput=Kx),Qx}function Qx(){const e=Yh(this),t=e?.current;if(t){const n=e.previous;if(n===wn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Kx(e,t,n,r){const i=this.declaredInputs[n],a=Yh(e)||function Jx(e,t){return e[$h]=t}(e,{previous:wn,current:null}),u=a.current||(a.current={}),g=a.previous,p=g[i];u[i]=new qx(p&&p.currentValue,t,g===wn),e[r]=t}$i.ngInherit=!0;const $h="__ngSimpleChanges__";function Yh(e){return e[$h]||null}const Kn=function(e,t,n){};function on(e){for(;Array.isArray(e);)e=e[w];return e}function Un(e,t){return on(t[e.index])}function bn(e,t){const n=t[e];return Bn(n)?n:n[w]}function ll(e){return 64==(64&e[D])}function mi(e,t){return null==t?null:e[t]}function Qh(e){e[xt]=0}function cu(e,t){e[b]+=t;let n=e,r=e[I];for(;null!==r&&(1===t&&1===n[b]||-1===t&&0===n[b]);)r[b]+=t,n=r,r=r[I]}const De={lFrame:l0(null),bindingsEnabled:!0};function Jh(){return De.bindingsEnabled}function z(){return De.lFrame.lView}function He(){return De.lFrame.tView}function sn(){let e=e0();for(;null!==e&&64===e.type;)e=e.parent;return e}function e0(){return De.lFrame.currentTNode}function Tr(e,t){const n=De.lFrame;n.currentTNode=e,n.isParent=t}function uu(){return De.lFrame.isParent}function gC(e,t){const n=De.lFrame;n.bindingIndex=n.bindingRootIndex=e,fu(t)}function fu(e){De.lFrame.currentDirectiveIndex=e}function gu(e){De.lFrame.currentQueryIndex=e}function mC(e){const t=e[C];return 2===t.type?t.declTNode:1===t.type?e[M]:null}function s0(e,t,n){if(n&de.SkipSelf){let i=t,a=e;for(;!(i=i.parent,null!==i||n&de.Host||(i=mC(a),null===i||(a=a[en],10&i.type))););if(null===i)return!1;t=i,e=a}const r=De.lFrame=a0();return r.currentTNode=t,r.lView=e,!0}function pu(e){const t=a0(),n=e[C];De.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function a0(){const e=De.lFrame,t=null===e?null:e.child;return null===t?l0(e):t}function l0(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function c0(){const e=De.lFrame;return De.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const u0=c0;function mu(){const e=c0();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Yi(e){De.lFrame.selectedIndex=e}function cl(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const a=e.data[n].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:g,ngAfterViewInit:p,ngAfterViewChecked:m,ngOnDestroy:E}=a;u&&(e.contentHooks??(e.contentHooks=[])).push(-n,u),g&&((e.contentHooks??(e.contentHooks=[])).push(n,g),(e.contentCheckHooks??(e.contentCheckHooks=[])).push(n,g)),p&&(e.viewHooks??(e.viewHooks=[])).push(-n,p),m&&((e.viewHooks??(e.viewHooks=[])).push(n,m),(e.viewCheckHooks??(e.viewCheckHooks=[])).push(n,m)),null!=E&&(e.destroyHooks??(e.destroyHooks=[])).push(n,E)}}function ul(e,t,n){d0(e,t,3,n)}function dl(e,t,n,r){(3&e[D])===n&&d0(e,t,n,r)}function yu(e,t){let n=e[D];(3&n)===t&&(n&=2047,n+=1,e[D]=n)}function d0(e,t,n,r){const a=r??-1,u=t.length-1;let g=0;for(let p=void 0!==r?65535&e[xt]:0;p<u;p++)if("number"==typeof t[p+1]){if(g=t[p],null!=r&&g>=r)break}else t[p]<0&&(e[xt]+=65536),(g<a||-1==a)&&(vC(e,n,t,p),e[xt]=(4294901760&e[xt])+p+2),p++}function vC(e,t,n,r){const i=n[r]<0,a=n[r+1],g=e[i?-n[r]:n[r]];if(i){if(e[D]>>11<e[xt]>>16&&(3&e[D])===t){e[D]+=2048,Kn(4,g,a);try{a.call(g)}finally{Kn(5,g,a)}}}else{Kn(4,g,a);try{a.call(g)}finally{Kn(5,g,a)}}}const bo=-1;class ks{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function xu(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const a=n[r++],u=n[r++],g=n[r++];e.setAttribute(t,u,g,a)}else{const a=i,u=n[++r];h0(a)?e.setProperty(t,a,u):e.setAttribute(t,a,u),r++}}return r}function f0(e){return 3===e||4===e||6===e}function h0(e){return 64===e.charCodeAt(0)}function Bs(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||g0(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function g0(e,t,n,r,i){let a=0,u=e.length;if(-1===t)u=-1;else for(;a<e.length;){const g=e[a++];if("number"==typeof g){if(g===t){u=-1;break}if(g>t){u=a-1;break}}}for(;a<e.length;){const g=e[a];if("number"==typeof g)break;if(g===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==u&&(e.splice(u,0,t),a=u+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function p0(e){return e!==bo}function fl(e){return 32767&e}function hl(e,t){let n=function TC(e){return e>>16}(e),r=t;for(;n>0;)r=r[en],n--;return r}let Cu=!0;function gl(e){const t=Cu;return Cu=e,t}const m0=255,y0=5;let MC=0;const Mr={};function pl(e,t){const n=w0(e,t);if(-1!==n)return n;const r=t[C];r.firstCreatePass&&(e.injectorIndex=t.length,Eu(r.data,e),Eu(t,null),Eu(r.blueprint,null));const i=Du(e,t),a=e.injectorIndex;if(p0(i)){const u=fl(i),g=hl(i,t),p=g[C].data;for(let m=0;m<8;m++)t[a+m]=g[u+m]|p[u+m]}return t[a+8]=i,a}function Eu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function w0(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Du(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=S0(i),null===r)return bo;if(n++,i=i[en],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return bo}function Au(e,t,n){!function NC(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(zi)&&(r=n[zi]),null==r&&(r=n[zi]=MC++);const i=r&m0;t.data[e+(i>>y0)]|=1<<i}(e,t,n)}function x0(e,t,n){if(n&de.Optional||void 0!==e)return e;hi()}function C0(e,t,n,r){if(n&de.Optional&&void 0===r&&(r=null),!(n&(de.Self|de.Host))){const i=e[$],a=et(void 0);try{return i?i.get(t,r,n&de.Optional):Co(t,r,n&de.Optional)}finally{et(a)}}return x0(r,0,n)}function E0(e,t,n,r=de.Default,i){if(null!==e){if(1024&t[D]){const u=function FC(e,t,n,r,i){let a=e,u=t;for(;null!==a&&null!==u&&1024&u[D]&&!(256&u[D]);){const g=D0(a,u,n,r|de.Self,Mr);if(g!==Mr)return g;let p=a.parent;if(!p){const m=u[$r];if(m){const E=m.get(n,Mr,r);if(E!==Mr)return E}p=S0(u),u=u[en]}a=p}return i}(e,t,n,r,Mr);if(u!==Mr)return u}const a=D0(e,t,n,r,Mr);if(a!==Mr)return a}return C0(t,n,r,i)}function D0(e,t,n,r,i){const a=function LC(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(zi)?e[zi]:void 0;return"number"==typeof t?t>=0?t&m0:PC:t}(n);if("function"==typeof a){if(!s0(t,e,r))return r&de.Host?x0(i,0,r):C0(t,n,r,i);try{const u=a(r);if(null!=u||r&de.Optional)return u;hi()}finally{u0()}}else if("number"==typeof a){let u=null,g=w0(e,t),p=bo,m=r&de.Host?t[Je][M]:null;for((-1===g||r&de.SkipSelf)&&(p=-1===g?Du(e,t):t[g+8],p!==bo&&I0(r,!1)?(u=t[C],g=fl(p),t=hl(p,t)):g=-1);-1!==g;){const E=t[C];if(A0(a,g,E.data)){const A=OC(g,t,n,u,r,m);if(A!==Mr)return A}p=t[g+8],p!==bo&&I0(r,t[C].data[g+8]===m)&&A0(a,g,t)?(u=E,g=fl(p),t=hl(p,t)):g=-1}}return i}function OC(e,t,n,r,i,a){const u=t[C],g=u.data[e+8],E=function ml(e,t,n,r,i){const a=e.providerIndexes,u=t.data,g=1048575&a,p=e.directiveStart,E=a>>20,v=i?g+E:e.directiveEnd;for(let T=r?g:g+E;T<v;T++){const N=u[T];if(T<p&&n===N||T>=p&&N.type===n)return T}if(i){const T=u[p];if(T&&hr(T)&&T.type===n)return p}return null}(g,u,n,null==r?Ps(g)&&Cu:r!=u&&0!=(3&g.type),i&de.Host&&a===g);return null!==E?Xi(t,u,E,g):Mr}function Xi(e,t,n,r){let i=e[n];const a=t.data;if(function SC(e){return e instanceof ks}(i)){const u=i;u.resolving&&function Qc(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Y(-200,`Circular dependency in DI detected for ${e}${n}`)}(We(a[n]));const g=gl(u.canSeeViewProviders);u.resolving=!0;const p=u.injectImpl?et(u.injectImpl):null;s0(e,r,de.Default);try{i=e[n]=u.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function IC(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=t.type.prototype;if(r){const u=Wh(t);(n.preOrderHooks??(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,u)}i&&(n.preOrderHooks??(n.preOrderHooks=[])).push(0-e,i),a&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,a))}(n,a[n],t)}finally{null!==p&&et(p),gl(g),u.resolving=!1,u0()}}return i}function A0(e,t,n){return!!(n[t+(e>>y0)]&1<<e)}function I0(e,t){return!(e&de.Self||e&de.Host&&t)}class To{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return E0(this._tNode,this._lView,t,gi(r),n)}}function PC(){return new To(sn(),z())}function Iu(e){return It(e)?()=>{const t=Iu(H(e));return t&&t()}:Wi(e)}function S0(e){const t=e[C],n=t.type;return 2===n?t.declTNode:1===n?e[M]:null}const No="__parameters__";function Oo(e,t,n){return cn(()=>{const r=function vu(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...a){if(this instanceof i)return r.apply(this,a),this;const u=new i(...a);return g.annotation=u,g;function g(p,m,E){const A=p.hasOwnProperty(No)?p[No]:Object.defineProperty(p,No,{value:[]})[No];for(;A.length<=E;)A.push(null);return(A[E]=A[E]||[]).push(u),p}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class pe{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ge({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zi(e,t){e.forEach(n=>Array.isArray(n)?Zi(n,t):t(n))}function b0(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function wl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Hs=Wr(Oo("Optional"),8),zs=Wr(Oo("SkipSelf"),4);var Tn=(()=>((Tn=Tn||{})[Tn.Important=1]="Important",Tn[Tn.DashCase=2]="DashCase",Tn))();const Ou=new Map;let l2=0;const Pu="__ngContext__";function dn(e,t){Bn(t)?(e[Pu]=t[Qn],function u2(e){Ou.set(e[Qn],e)}(t)):e[Pu]=t}let Fu;function ku(e,t){return Fu(e,t)}function Ys(e){const t=e[I];return fr(t)?t[I]:t}function Bu(e){return Z0(e[xe])}function Uu(e){return Z0(e[S])}function Z0(e){for(;null!==e&&!fr(e);)e=e[S];return e}function Fo(e,t,n,r,i){if(null!=r){let a,u=!1;fr(r)?a=r:Bn(r)&&(u=!0,r=r[w]);const g=on(r);0===e&&null!==n?null==i?t1(t,n,g):qi(t,n,g,i||null,!0):1===e&&null!==n?qi(t,n,g,i||null,!0):2===e?function $u(e,t,n){const r=Dl(e,t);r&&function M2(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,g,u):3===e&&t.destroyNode(g),null!=a&&function O2(e,t,n,r,i){const a=n[il];a!==on(n)&&Fo(t,e,r,a,i);for(let g=xn;g<n.length;g++){const p=n[g];Xs(p[C],p,e,t,r,a)}}(t,e,a,n,i)}}function Vu(e,t,n){return e.createElement(t,n)}function Q0(e,t){const n=e[vo],r=n.indexOf(t),i=t[I];512&t[D]&&(t[D]&=-513,cu(i,-1)),n.splice(r,1)}function Hu(e,t){if(e.length<=xn)return;const n=xn+t,r=e[n];if(r){const i=r[Xe];null!==i&&i!==e&&Q0(i,r),t>0&&(e[n-1][S]=r[S]);const a=wl(e,xn+t);!function D2(e,t){Xs(e,t,t[L],2,null,null),t[w]=null,t[M]=null}(r[C],r);const u=a[Ct];null!==u&&u.detachView(a[C]),r[I]=null,r[S]=null,r[D]&=-65}return r}function K0(e,t){if(!(128&t[D])){const n=t[L];n.destroyNode&&Xs(e,t,n,3,null,null),function v2(e){let t=e[xe];if(!t)return zu(e[C],e);for(;t;){let n=null;if(Bn(t))n=t[xe];else{const r=t[xn];r&&(n=r)}if(!n){for(;t&&!t[S]&&t!==e;)Bn(t)&&zu(t[C],t),t=t[I];null===t&&(t=e),Bn(t)&&zu(t[C],t),n=t&&t[S]}t=n}}(t)}}function zu(e,t){if(!(128&t[D])){t[D]&=-65,t[D]|=128,function T2(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof ks)){const a=n[r+1];if(Array.isArray(a))for(let u=0;u<a.length;u+=2){const g=i[a[u]],p=a[u+1];Kn(4,g,p);try{p.call(g)}finally{Kn(5,g,p)}}else{Kn(4,i,a);try{a.call(i)}finally{Kn(5,i,a)}}}}}(e,t),function b2(e,t){const n=e.cleanup,r=t[R];let i=-1;if(null!==n)for(let a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){const u=n[a+3];u>=0?r[i=u]():r[i=-u].unsubscribe(),a+=2}else{const u=r[i=n[a+1]];n[a].call(u)}if(null!==r){for(let a=i+1;a<r.length;a++)(0,r[a])();t[R]=null}}(e,t),1===t[C].type&&t[L].destroy();const n=t[Xe];if(null!==n&&fr(t[I])){n!==t[I]&&Q0(n,t);const r=t[Ct];null!==r&&r.detachView(e)}!function d2(e){Ou.delete(e[Qn])}(t)}}function J0(e,t,n){return function e1(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[w];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:a}=e.data[r.directiveStart+i];if(a===Zn.None||a===Zn.Emulated)return null}return Un(r,n)}}(e,t.parent,n)}function qi(e,t,n,r,i){e.insertBefore(t,n,r,i)}function t1(e,t,n){e.appendChild(t,n)}function n1(e,t,n,r,i){null!==r?qi(e,t,n,r,i):t1(e,t,n)}function Dl(e,t){return e.parentNode(t)}let Gu,Zu,o1=function i1(e,t,n){return 40&e.type?Un(e,n):null};function Al(e,t,n,r){const i=J0(e,r,t),a=t[L],g=function r1(e,t,n){return o1(e,t,n)}(r.parent||t[M],r,t);if(null!=i)if(Array.isArray(n))for(let p=0;p<n.length;p++)n1(a,i,n[p],g,!1);else n1(a,i,n,g,!1);void 0!==Gu&&Gu(a,r,t,n,i)}function Il(e,t){if(null!==t){const n=t.type;if(3&n)return Un(t,e);if(4&n)return Wu(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Il(e,r);{const i=e[t.index];return fr(i)?Wu(-1,i):on(i)}}if(32&n)return ku(t,e)()||on(e[t.index]);{const r=a1(e,t);return null!==r?Array.isArray(r)?r[0]:Il(Ys(e[Je]),r):Il(e,t.next)}}return null}function a1(e,t){return null!==t?e[Je][M].projection[t.projection]:null}function Wu(e,t){const n=xn+e+1;if(n<t.length){const r=t[n],i=r[C].firstChild;if(null!==i)return Il(r,i)}return t[il]}function Yu(e,t,n,r,i,a,u){for(;null!=n;){const g=r[n.index],p=n.type;if(u&&0===t&&(g&&dn(on(g),r),n.flags|=2),32!=(32&n.flags))if(8&p)Yu(e,t,n.child,r,i,a,!1),Fo(t,e,i,g,a);else if(32&p){const m=ku(n,r);let E;for(;E=m();)Fo(t,e,i,E,a);Fo(t,e,i,g,a)}else 16&p?l1(e,t,r,n,i,a):Fo(t,e,i,g,a);n=u?n.projectionNext:n.next}}function Xs(e,t,n,r,i,a){Yu(n,r,e.firstChild,t,i,a,!1)}function l1(e,t,n,r,i,a){const u=n[Je],p=u[M].projection[r.projection];if(Array.isArray(p))for(let m=0;m<p.length;m++)Fo(t,e,i,p[m],a);else Yu(e,t,p,u[I],i,a,!0)}function c1(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function u1(e,t,n){const{mergedAttrs:r,classes:i,styles:a}=n;null!==r&&xu(e,t,r),null!==i&&c1(e,t,i),null!==a&&function P2(e,t,n){e.setAttribute(t,"style",n)}(e,t,a)}const bl=new pe("ENVIRONMENT_INITIALIZER"),v1=new pe("INJECTOR",-1),S1=new pe("INJECTOR_DEF_TYPES");class _1{get(t,n=pt){if(n===pt){const r=new Error(`NullInjectorError: No provider for ${ce(t)}!`);throw r.name="NullInjectorError",r}return n}}function lE(...e){return{\u0275providers:b1(0,e),\u0275fromNgModule:!0}}function b1(e,...t){const n=[],r=new Set;let i;return Zi(t,a=>{const u=a;td(u,n,[],r)&&(i||(i=[]),i.push(u))}),void 0!==i&&T1(i,n),n}function T1(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];nd(i,a=>{t.push(a)})}}function td(e,t,n,r){if(!(e=H(e)))return!1;let i=null,a=Ja(e);const u=!a&&o(e);if(a||u){if(u&&!u.standalone)return!1;i=e}else{const p=e.ngModule;if(a=Ja(p),!a)return!1;i=p}const g=r.has(i);if(u){if(g)return!1;if(r.add(i),u.dependencies){const p="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const m of p)td(m,t,n,r)}}else{if(!a)return!1;{if(null!=a.imports&&!g){let m;r.add(i);try{Zi(a.imports,E=>{td(E,t,n,r)&&(m||(m=[]),m.push(E))})}finally{}void 0!==m&&T1(m,t)}if(!g){const m=Wi(i)||(()=>new i);t.push({provide:i,useFactory:m,deps:Ye},{provide:S1,useValue:i,multi:!0},{provide:bl,useValue:()=>ue(i),multi:!0})}const p=a.providers;null==p||g||nd(p,E=>{t.push(E)})}}return i!==e&&void 0!==e.providers}function nd(e,t){for(let n of e)ln(n)&&(n=n.\u0275providers),Array.isArray(n)?nd(n,t):t(n)}const cE=it({provide:String,useValue:it});function rd(e){return null!==e&&"object"==typeof e&&cE in e}function Qi(e){return"function"==typeof e}const id=new pe("Set Injector scope."),Tl={},dE={};let od;function Ml(){return void 0===od&&(od=new _1),od}class qr{}class R1 extends qr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ad(t,u=>this.processProvider(u)),this.records.set(v1,Bo(void 0,this)),i.has("environment")&&this.records.set(qr,Bo(void 0,this));const a=this.records.get(id);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(S1.multi,Ye,de.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Ke(this),r=et(void 0);try{return t()}finally{Ke(n),et(r)}}get(t,n=pt,r=de.Default){this.assertNotDestroyed(),r=gi(r);const i=Ke(this),a=et(void 0);try{if(!(r&de.SkipSelf)){let g=this.records.get(t);if(void 0===g){const p=function mE(e){return"function"==typeof e||"object"==typeof e&&e instanceof pe}(t)&&Ui(t);g=p&&this.injectableDefInScope(p)?Bo(sd(t),Tl):null,this.records.set(t,g)}if(null!=g)return this.hydrate(t,g)}return(r&de.Self?Ml():this.parent).get(t,n=r&de.Optional&&n===pt?null:n)}catch(u){if("NullInjectorError"===u.name){if((u[ur]=u[ur]||[]).unshift(ce(t)),i)throw u;return function nl(e,t,n,r){const i=e[ur];throw t[le]&&i.unshift(t[le]),e.message=function iu(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==ct?e.slice(2):e;let i=ce(t);if(Array.isArray(t))i=t.map(ce).join(" -> ");else if("object"==typeof t){let a=[];for(let u in t)if(t.hasOwnProperty(u)){let g=t[u];a.push(u+":"+("string"==typeof g?JSON.stringify(g):ce(g)))}i=`{${a.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Do,"\n  ")}`}("\n"+e.message,i,n,r),e[Eo]=i,e[ur]=null,e}(u,t,"R3InjectorError",this.source)}throw u}finally{et(a),Ke(i)}}resolveInjectorInitializers(){const t=Ke(this),n=et(void 0);try{const r=this.get(bl.multi,Ye,de.Self);for(const i of r)i()}finally{Ke(t),et(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(ce(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(t){let n=Qi(t=H(t))?t:H(t&&t.provide);const r=function hE(e){return rd(e)?Bo(void 0,e.useValue):Bo(function O1(e,t,n){let r;if(Qi(e)){const i=H(e);return Wi(i)||sd(i)}if(rd(e))r=()=>H(e.useValue);else if(function N1(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Ao(e.deps||[]));else if(function M1(e){return!(!e||!e.useExisting)}(e))r=()=>ue(H(e.useExisting));else{const i=H(e&&(e.useClass||e.provide));if(!function gE(e){return!!e.deps}(e))return Wi(i)||sd(i);r=()=>new i(...Ao(e.deps))}return r}(e),Tl)}(t);if(Qi(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Bo(void 0,Tl,!0),i.factory=()=>Ao(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Tl&&(n.value=dE,n.value=n.factory()),"object"==typeof n.value&&n.value&&function pE(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=H(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function sd(e){const t=Ui(e),n=null!==t?t.factory:Wi(e);if(null!==n)return n;if(e instanceof pe)throw new Y(204,!1);if(e instanceof Function)return function fE(e){const t=e.length;if(t>0)throw function Vs(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new Y(204,!1);const n=function tu(e){return e&&(e[Ve]||e[ji])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Y(204,!1)}function Bo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function ad(e,t){for(const n of e)Array.isArray(n)?ad(n,t):n&&ln(n)?ad(n.\u0275providers,t):t(n)}class yE{}class L1{}class xE{resolveComponentFactory(t){throw function wE(e){const t=Error(`No component factory found for ${ce(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Ks=(()=>{class e{}return e.NULL=new xE,e})();function CE(){return Uo(sn(),z())}function Uo(e,t){return new wi(Un(e,t))}let wi=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=CE,e})();class F1{}let AE=(()=>{class e{}return e.\u0275prov=ge({token:e,providedIn:"root",factory:()=>null}),e})();class Rl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const IE=new Rl("15.2.10"),ld={},cd="ngOriginalError";function ud(e){return e[cd]}class jo{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&ud(t);for(;n&&ud(n);)n=ud(n);return n||null}}function Qr(e){return e instanceof Function?e():e}function B1(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}const U1="ng-template";function PE(e,t,n){let r=0,i=!0;for(;r<e.length;){let a=e[r++];if("string"==typeof a&&i){const u=e[r++];if(n&&"class"===a&&-1!==B1(u.toLowerCase(),t,0))return!0}else{if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===t)return!0;return!1}"number"==typeof a&&(i=!1)}}return!1}function j1(e){return 4===e.type&&e.value!==U1}function FE(e,t,n){return t===(4!==e.type||n?e.value:U1)}function kE(e,t,n){let r=4;const i=e.attrs||[],a=function jE(e){for(let t=0;t<e.length;t++)if(f0(e[t]))return t;return e.length}(i);let u=!1;for(let g=0;g<t.length;g++){const p=t[g];if("number"!=typeof p){if(!u)if(4&r){if(r=2|1&r,""!==p&&!FE(e,p,n)||""===p&&1===t.length){if(gr(r))return!1;u=!0}}else{const m=8&r?p:t[++g];if(8&r&&null!==e.attrs){if(!PE(e.attrs,m,n)){if(gr(r))return!1;u=!0}continue}const A=BE(8&r?"class":p,i,j1(e),n);if(-1===A){if(gr(r))return!1;u=!0;continue}if(""!==m){let v;v=A>a?"":i[A+1].toLowerCase();const T=8&r?v:null;if(T&&-1!==B1(T,m,0)||2&r&&m!==v){if(gr(r))return!1;u=!0}}}}else{if(!u&&!gr(r)&&!gr(p))return!1;if(u&&gr(p))continue;u=!1,r=p|1&r}}return gr(r)||u}function gr(e){return 0==(1&e)}function BE(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let a=!1;for(;i<t.length;){const u=t[i];if(u===e)return i;if(3===u||6===u)a=!0;else{if(1===u||2===u){let g=t[++i];for(;"string"==typeof g;)g=t[++i];continue}if(4===u)break;if(0===u){i+=4;continue}}i+=a?1:2}return-1}return function VE(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function V1(e,t,n=!1){for(let r=0;r<t.length;r++)if(kE(e,t[r],n))return!0;return!1}function H1(e,t){return e?":not("+t.trim()+")":t}function zE(e){let t=e[0],n=1,r=2,i="",a=!1;for(;n<e.length;){let u=e[n];if("string"==typeof u)if(2&r){const g=e[++n];i+="["+u+(g.length>0?'="'+g+'"':"")+"]"}else 8&r?i+="."+u:4&r&&(i+=" "+u);else""!==i&&!gr(u)&&(t+=H1(a,i),i=""),r=u,a=a||!gr(r);n++}return""!==i&&(t+=H1(a,i)),t}const Ae={};function Y1(e,t=null,n=null,r){const i=X1(e,t,n,r);return i.resolveInjectorInitializers(),i}function X1(e,t=null,n=null,r,i=new Set){const a=[n||Ye,lE(e)];return r=r||("object"==typeof e?void 0:ce(e)),new R1(a,t||Ml(),r||null,i)}let Kr=(()=>{class e{static create(n,r){if(Array.isArray(n))return Y1({name:""},r,n,"");{const i=n.name??"";return Y1({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=pt,e.NULL=new _1,e.\u0275prov=ge({token:e,providedIn:"any",factory:()=>ue(v1)}),e.__NG_ELEMENT_ID__=-1,e})();function me(e,t=de.Default){const n=z();return null===n?ue(e,t):E0(sn(),n,H(e),t)}function ng(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const a=n[r+1];if(-1!==a){const u=e.data[a];gu(n[r]),u.contentQueries(2,t[a],a)}}}function Ll(e,t,n,r,i,a,u,g,p,m,E){const A=t.blueprint.slice();return A[w]=i,A[D]=76|r,(null!==E||e&&1024&e[D])&&(A[D]|=1024),Qh(A),A[I]=A[en]=e,A[O]=n,A[q]=u||e&&e[q],A[L]=g||e&&e[L],A[Se]=p||e&&e[Se]||null,A[$]=m||e&&e[$]||null,A[M]=a,A[Qn]=function c2(){return l2++}(),A[$r]=E,A[Je]=2==t.type?e[Je]:A,A}function zo(e,t,n,r,i){let a=e.data[t];if(null===a)a=function pd(e,t,n,r,i){const a=e0(),u=uu(),p=e.data[t]=function mD(e,t,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=p),null!==a&&(u?null==a.child&&null!==p.parent&&(a.child=p):null===a.next&&(a.next=p,p.prev=a)),p}(e,t,n,r,i),function hC(){return De.lFrame.inI18n}()&&(a.flags|=32);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;const u=function Fs(){const e=De.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();a.injectorIndex=null===u?-1:u.injectorIndex}return Tr(a,!0),a}function Js(e,t,n,r){if(0===n)return-1;const i=t.length;for(let a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function md(e,t,n){pu(t);try{const r=e.viewQuery;null!==r&&vd(1,r,n);const i=e.template;null!==i&&rg(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ng(e,t),e.staticViewQueries&&vd(2,e.viewQuery,n);const a=e.components;null!==a&&function hD(e,t){for(let n=0;n<t.length;n++)FD(e,t[n])}(t,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[D]&=-5,mu()}}function Pl(e,t,n,r){const i=t[D];if(128!=(128&i)){pu(t);try{Qh(t),function n0(e){return De.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&rg(e,t,n,2,r);const u=3==(3&i);if(u){const m=e.preOrderCheckHooks;null!==m&&ul(t,m,null)}else{const m=e.preOrderHooks;null!==m&&dl(t,m,0,null),yu(t,0)}if(function LD(e){for(let t=Bu(e);null!==t;t=Uu(t)){if(!t[Hh])continue;const n=t[vo];for(let r=0;r<n.length;r++){const i=n[r];512&i[D]||cu(i[I],1),i[D]|=512}}}(t),function OD(e){for(let t=Bu(e);null!==t;t=Uu(t))for(let n=xn;n<t.length;n++){const r=t[n],i=r[C];ll(r)&&Pl(i,r,i.template,r[O])}}(t),null!==e.contentQueries&&ng(e,t),u){const m=e.contentCheckHooks;null!==m&&ul(t,m)}else{const m=e.contentHooks;null!==m&&dl(t,m,1),yu(t,1)}!function dD(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Yi(~i);else{const a=i,u=n[++r],g=n[++r];gC(u,a),g(2,t[a])}}}finally{Yi(-1)}}(e,t);const g=e.components;null!==g&&function fD(e,t){for(let n=0;n<t.length;n++)PD(e,t[n])}(t,g);const p=e.viewQuery;if(null!==p&&vd(2,p,r),u){const m=e.viewCheckHooks;null!==m&&ul(t,m)}else{const m=e.viewHooks;null!==m&&dl(t,m,2),yu(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[D]&=-41,512&t[D]&&(t[D]&=-513,cu(t[I],-1))}finally{mu()}}}function rg(e,t,n,r,i){const a=function En(){return De.lFrame.selectedIndex}(),u=2&r;try{Yi(-1),u&&t.length>dt&&function z1(e,t,n,r){if(!r)if(3==(3&t[D])){const a=e.preOrderCheckHooks;null!==a&&ul(t,a,n)}else{const a=e.preOrderHooks;null!==a&&dl(t,a,0,n)}Yi(n)}(e,t,dt,!1),Kn(u?2:0,i),n(r,i)}finally{Yi(a),Kn(u?3:1,i)}}function yd(e,t,n){if(au(t)){const i=t.directiveEnd;for(let a=t.directiveStart;a<i;a++){const u=e.data[a];u.contentQueries&&u.contentQueries(1,n[a],a)}}}function ig(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Cd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Cd(e,t,n,r,i,a,u,g,p,m){const E=dt+r,A=E+i,v=function gD(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ae);return n}(E,A),T="function"==typeof m?m():m;return v[C]={type:e,blueprint:v,template:n,queries:null,viewQuery:g,declTNode:t,data:v.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:p,consts:T,incompleteFirstPass:!1}}function og(e,t,n,r){const i=function dg(e){return e[R]||(e[R]=[])}(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&function fg(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1))}function sg(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const a=e[i];null===r?ag(n,t,i,a):r.hasOwnProperty(i)&&ag(n,t,r[i],a)}return n}function ag(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function lg(e,t,n,r,i,a){for(let m=0;m<r.length;m++)Au(pl(n,t),e,r[m].type);!function bD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let m=0;m<r.length;m++){const E=r[m];E.providersResolver&&E.providersResolver(E)}let u=!1,g=!1,p=Js(e,t,r.length,null);for(let m=0;m<r.length;m++){const E=r[m];n.mergedAttrs=Bs(n.mergedAttrs,E.hostAttrs),TD(e,n,t,p,E),_D(p,E,i),null!==E.contentQueries&&(n.flags|=4),(null!==E.hostBindings||null!==E.hostAttrs||0!==E.hostVars)&&(n.flags|=64);const A=E.type.prototype;!u&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n.index),u=!0),!g&&(A.ngOnChanges||A.ngDoCheck)&&((e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n.index),g=!0),p++}!function yD(e,t,n){const i=t.directiveEnd,a=e.data,u=t.attrs,g=[];let p=null,m=null;for(let E=t.directiveStart;E<i;E++){const A=a[E],v=n?n.get(A):null,N=v?v.outputs:null;p=sg(A.inputs,E,p,v?v.inputs:null),m=sg(A.outputs,E,m,N);const F=null===p||null===u||j1(t)?null:RD(p,E,u);g.push(F)}null!==p&&(p.hasOwnProperty("class")&&(t.flags|=8),p.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=g,t.inputs=p,t.outputs=m}(e,n,a)}function cg(e,t,n){const r=n.directiveStart,i=n.directiveEnd,a=n.index,u=function pC(){return De.lFrame.currentDirectiveIndex}();try{Yi(a);for(let g=r;g<i;g++){const p=e.data[g],m=t[g];fu(g),(null!==p.hostBindings||0!==p.hostVars||null!==p.hostAttrs)&&ID(p,m)}}finally{Yi(-1),fu(u)}}function ID(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Dd(e,t,n){t.componentOffset=n,(e.components??(e.components=[])).push(t.index)}function _D(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;hr(t)&&(n[""]=e)}}function TD(e,t,n,r,i){e.data[r]=i;const a=i.factory||(i.factory=Wi(i.type)),u=new ks(a,hr(i),me);e.blueprint[r]=u,n[r]=u,function ED(e,t,n,r,i){const a=i.hostBindings;if(a){let u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);const g=~t.index;(function DD(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=g&&u.push(g),u.push(n,r,a)}}(e,t,r,Js(e,n,i.hostVars,Ae),i)}function ND(e,t,n,r,i,a){const u=a[t];if(null!==u){const g=r.setInput;for(let p=0;p<u.length;){const m=u[p++],E=u[p++],A=u[p++];null!==g?r.setInput(n,A,m,E):n[E]=A}}}function RD(e,t,n){let r=null,i=0;for(;i<n.length;){const a=n[i];if(0!==a)if(5!==a){if("number"==typeof a)break;if(e.hasOwnProperty(a)){null===r&&(r=[]);const u=e[a];for(let g=0;g<u.length;g+=2)if(u[g]===t){r.push(a,u[g+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function PD(e,t){const n=bn(t,e);if(ll(n)){const r=n[C];48&n[D]?Pl(r,n,r.template,n[O]):n[b]>0&&Id(n)}}function Id(e){for(let r=Bu(e);null!==r;r=Uu(r))for(let i=xn;i<r.length;i++){const a=r[i];if(ll(a))if(512&a[D]){const u=a[C];Pl(u,a,u.template,a[O])}else a[b]>0&&Id(a)}const n=e[C].components;if(null!==n)for(let r=0;r<n.length;r++){const i=bn(n[r],e);ll(i)&&i[b]>0&&Id(i)}}function FD(e,t){const n=bn(t,e),r=n[C];(function kD(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),md(r,n,n[O])}function Fl(e,t){return e[xe]?e[rn][S]=t:e[xe]=t,e[rn]=t,t}function kl(e){for(;e;){e[D]|=32;const t=Ys(e);if(Yx(e)&&!t)return e;e=t}return null}function Bl(e,t,n,r=!0){const i=t[q];i.begin&&i.begin();try{Pl(e,t,e.template,n)}catch(u){throw r&&function gg(e,t){const n=e[$],r=n?n.get(jo,null):null;r&&r.handleError(t)}(t,u),u}finally{i.end&&i.end()}}function vd(e,t,n){gu(0),t(e,n)}function Sd(e,t,n,r,i){for(let a=0;a<n.length;){const u=n[a++],g=n[a++],p=t[u],m=e.data[u];null!==m.setInput?m.setInput(p,i,r,g):p[g]=i}}function Ul(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(let u=0;u<t.length;u++){const g=t[u];"number"==typeof g?a=g:1==a?i=kt(i,g):2==a&&(r=kt(r,g+": "+t[++u]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function jl(e,t,n,r,i=!1){for(;null!==n;){const a=t[n.index];if(null!==a&&r.push(on(a)),fr(a))for(let g=xn;g<a.length;g++){const p=a[g],m=p[C].firstChild;null!==m&&jl(p[C],p,m,r)}const u=n.type;if(8&u)jl(e,t,n.child,r);else if(32&u){const g=ku(n,t);let p;for(;p=g();)r.push(p)}else if(16&u){const g=a1(t,n);if(Array.isArray(g))r.push(...g);else{const p=Ys(t[Je]);jl(p[C],p,g,r,!0)}}n=i?n.projectionNext:n.next}return r}class ea{get rootNodes(){const t=this._lView,n=t[C];return jl(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[O]}set context(t){this._lView[O]=t}get destroyed(){return 128==(128&this._lView[D])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[I];if(fr(t)){const n=t[ol],r=n?n.indexOf(this):-1;r>-1&&(Hu(t,r),wl(n,r))}this._attachedToViewContainer=!1}K0(this._lView[C],this._lView)}onDestroy(t){og(this._lView[C],this._lView,null,t)}markForCheck(){kl(this._cdRefInjectingView||this._lView)}detach(){this._lView[D]&=-65}reattach(){this._lView[D]|=64}detectChanges(){Bl(this._lView[C],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function I2(e,t){Xs(e,t,t[L],2,null,null)}(this._lView[C],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=t}}class BD extends ea{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Bl(t[C],t,t[O],!1)}checkNoChanges(){}get context(){return null}}class pg extends Ks{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=o(t);return new ta(n,this.ngModule)}}function mg(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class jD{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=gi(r);const i=this.injector.get(t,ld,r);return i!==ld||n===ld?i:this.parentInjector.get(t,n,r)}}class ta extends L1{get inputs(){return mg(this.componentDef.inputs)}get outputs(){return mg(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function GE(e){return e.map(zE).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let a=(i=i||this.ngModule)instanceof qr?i:i?.injector;a&&null!==this.componentDef.getStandaloneInjector&&(a=this.componentDef.getStandaloneInjector(a)||a);const u=a?new jD(t,a):t,g=u.get(F1,null);if(null===g)throw new Y(407,!1);const p=u.get(AE,null),m=g.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",A=r?function pD(e,t,n){return e.selectRootElement(t,n===Zn.ShadowDom)}(m,r,this.componentDef.encapsulation):Vu(m,E,function UD(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(E)),v=this.componentDef.onPush?288:272,T=Cd(0,null,null,1,0,null,null,null,null,null),N=Ll(null,T,null,v,null,null,g,m,p,u,null);let F,B;pu(N);try{const G=this.componentDef;let Q,j=null;G.findHostDirectiveDefs?(Q=[],j=new Map,G.findHostDirectiveDefs(G,Q,j),Q.push(G)):Q=[G];const ie=function HD(e,t){const n=e[C],r=dt;return e[r]=t,zo(n,r,2,"#host",null)}(N,A),Ne=function zD(e,t,n,r,i,a,u,g){const p=i[C];!function GD(e,t,n,r){for(const i of e)t.mergedAttrs=Bs(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Ul(t,t.mergedAttrs,!0),null!==n&&u1(r,n,t))}(r,e,t,u);const m=a.createRenderer(t,n),E=Ll(i,ig(n),null,n.onPush?32:16,i[e.index],e,a,m,g||null,null,null);return p.firstCreatePass&&Dd(p,e,r.length-1),Fl(i,E),i[e.index]=E}(ie,A,G,Q,N,g,m);B=function qh(e,t){return e.data[t]}(T,dt),A&&function $D(e,t,n,r){if(r)xu(e,n,["ng-version",IE.full]);else{const{attrs:i,classes:a}=function WE(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!gr(i))break;i=a}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&xu(e,n,i),a&&a.length>0&&c1(e,n,a.join(" "))}}(m,G,A,r),void 0!==n&&function YD(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const a=n[i];r.push(null!=a?Array.from(a):null)}}(B,this.ngContentSelectors,n),F=function WD(e,t,n,r,i,a){const u=sn(),g=i[C],p=Un(u,i);lg(g,i,u,n,null,r);for(let E=0;E<n.length;E++)dn(Xi(i,g,u.directiveStart+E,u),i);cg(g,i,u),p&&dn(p,i);const m=Xi(i,g,u.directiveStart+u.componentOffset,u);if(e[O]=i[O]=m,null!==a)for(const E of a)E(m,t);return yd(g,u,e),m}(Ne,G,Q,j,N,[XD]),md(T,N,null)}finally{mu()}return new VD(this.componentType,F,Uo(B,N),N,B)}}class VD extends yE{constructor(t,n,r,i,a){super(),this.location=r,this._rootLView=i,this._tNode=a,this.instance=n,this.hostView=this.changeDetectorRef=new BD(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const a=this._rootLView;Sd(a[C],a,i,t,n),kl(bn(this._tNode.index,a))}}get injector(){return new To(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function XD(){const e=sn();cl(z()[C],e)}function Md(e,t,n,r,i){const u=i?"class":"style";Sd(e,n,t.inputs[u],u,r)}function Nd(e,t,n,r){const i=z(),a=He(),u=dt+e,g=i[L],p=a.firstCreatePass?function fA(e,t,n,r,i,a){const u=t.consts,p=zo(t,e,2,r,mi(u,i));return function Ed(e,t,n,r){if(Jh()){const i=null===r?null:{"":-1},a=function vD(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let a=0;a<n.length;a++){const u=n[a];if(V1(t,u.selectors,!1))if(r||(r=[]),hr(u))if(null!==u.findHostDirectiveDefs){const g=[];i=i||new Map,u.findHostDirectiveDefs(u,g,i),r.unshift(...g,u),Dd(e,t,g.length)}else r.unshift(u),Dd(e,t,0);else i=i||new Map,u.findHostDirectiveDefs?.(u,r,i),r.push(u)}return null===r?null:[r,i]}(e,n);let u,g;null===a?u=g=null:[u,g]=a,null!==u&&lg(e,t,n,u,i,g),i&&function SD(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const a=n[t[i+1]];if(null==a)throw new Y(-301,!1);r.push(t[i],a)}}}(n,r,i)}n.mergedAttrs=Bs(n.mergedAttrs,n.attrs)}(t,n,p,mi(u,a)),null!==p.attrs&&Ul(p,p.attrs,!1),null!==p.mergedAttrs&&Ul(p,p.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,p),p}(u,a,i,t,n,r):a.data[u],m=i[u]=Vu(g,t,function AC(){return De.lFrame.currentNamespace}()),E=function sl(e){return 1==(1&e.flags)}(p);return Tr(p,!0),u1(g,m,p),32!=(32&p.flags)&&Al(a,i,m,p),0===function oC(){return De.lFrame.elementDepthCount}()&&dn(m,i),function sC(){De.lFrame.elementDepthCount++}(),E&&(function wd(e,t,n){Jh()&&(function AD(e,t,n,r){const i=n.directiveStart,a=n.directiveEnd;Ps(n)&&function MD(e,t,n){const r=Un(t,e),i=ig(n),a=e[q],u=Fl(e,Ll(e,i,null,n.onPush?32:16,r,t,a,a.createRenderer(r,n),null,null,null));e[t.index]=u}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||pl(n,t),dn(r,t);const u=n.initialInputs;for(let g=i;g<a;g++){const p=e.data[g],m=Xi(t,e,g,n);dn(m,t),null!==u&&ND(0,g-i,m,p,0,u),hr(p)&&(bn(n.index,t)[O]=Xi(t,e,g,n))}}(e,t,n,Un(n,t)),64==(64&n.flags)&&cg(e,t,n))}(a,i,p),yd(a,p,i)),null!==r&&function xd(e,t,n=Un){const r=t.localNames;if(null!==r){let i=t.index+1;for(let a=0;a<r.length;a+=2){const u=r[a+1],g=-1===u?n(t,e):e[u];e[i++]=g}}}(i,p),Nd}function Rd(){let e=sn();uu()?function du(){De.lFrame.isParent=!1}():(e=e.parent,Tr(e,!1));const t=e;!function aC(){De.lFrame.elementDepthCount--}();const n=He();return n.firstCreatePass&&(cl(n,e),au(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function _C(e){return 0!=(8&e.flags)}(t)&&Md(n,t,z(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function bC(e){return 0!=(16&e.flags)}(t)&&Md(n,t,z(),t.stylesWithoutHost,!1),Rd}function ra(e,t,n,r){return Nd(e,t,n,r),Rd(),ra}function zl(e){return!!e&&"function"==typeof e.then}const Lg=function Og(e){return!!e&&"function"==typeof e.subscribe},ts="en-US";let Np=ts;class ns{}class rm{}class im extends ns{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pg(this);const r=d(t);this._bootstrapComponents=Qr(r.bootstrap),this._r3Injector=X1(t,n,[{provide:ns,useValue:this},{provide:Ks,useValue:this.componentFactoryResolver}],ce(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Xd extends rm{constructor(t){super(),this.moduleType=t}create(t){return new im(this.moduleType,t)}}class cv extends ns{constructor(t,n,r){super(),this.componentFactoryResolver=new pg(this),this.instance=null;const i=new R1([...t,{provide:ns,useValue:this},{provide:Ks,useValue:this.componentFactoryResolver}],n||Ml(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function ql(e,t,n=null){return new cv(e,t,n).injector}let uv=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=b1(0,n.type),i=r.length>0?ql([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=ge({token:e,providedIn:"environment",factory:()=>new e(ue(qr))}),e})();function om(e){e.getStandaloneInjector=t=>t.get(uv).getOrCreateStandaloneInjector(e)}function qd(e){return t=>{setTimeout(e,void 0,t)}}const An=class Fv extends gt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,a=n||(()=>null),u=r;if(t&&"object"==typeof t){const p=t;i=p.next?.bind(p),a=p.error?.bind(p),u=p.complete?.bind(p)}this.__isAsync&&(a=qd(a),i&&(i=qd(i)),u&&(u=qd(u)));const g=super.subscribe({next:i,error:a,complete:u});return t instanceof vn&&t.add(g),g}};let yr=(()=>{class e{}return e.__NG_ELEMENT_ID__=Vv,e})();function Vv(){return function xm(e,t){let n;const r=t[e.index];if(fr(r))n=r;else{let i;if(8&e.type)i=on(r);else{const a=t[L];i=a.createComment("");const u=Un(e,t);qi(a,Dl(a,u),i,function N2(e,t){return e.nextSibling(t)}(a,u),!1)}t[e.index]=n=function ug(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null]}(r,t,i,e),Fl(t,n)}return new ym(n,e,t)}(sn(),z())}const Hv=yr,ym=class extends Hv{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Uo(this._hostTNode,this._hostLView)}get injector(){return new To(this._hostTNode,this._hostLView)}get parentInjector(){const t=Du(this._hostTNode,this._hostLView);if(p0(t)){const n=hl(t,this._hostLView),r=fl(t);return new To(n[C].data[r+8],n)}return new To(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=wm(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-xn}createEmbeddedView(t,n,r){let i,a;"number"==typeof r?i=r:null!=r&&(i=r.index,a=r.injector);const u=t.createEmbeddedView(n||{},a);return this.insert(u,i),u}createComponent(t,n,r,i,a){const u=t&&!function js(e){return"function"==typeof e}(t);let g;if(u)g=n;else{const A=n||{};g=A.index,r=A.injector,i=A.projectableNodes,a=A.environmentInjector||A.ngModuleRef}const p=u?t:new ta(o(t)),m=r||this.parentInjector;if(!a&&null==p.ngModule){const v=(u?m:this.parentInjector).get(qr,null);v&&(a=v)}const E=p.create(m,i,void 0,a);return this.insert(E.hostView,g),E}insert(t,n){const r=t._lView,i=r[C];if(function iC(e){return fr(e[I])}(r)){const E=this.indexOf(t);if(-1!==E)this.detach(E);else{const A=r[I],v=new ym(A,A[M],A[I]);v.detach(v.indexOf(t))}}const a=this._adjustIndex(n),u=this._lContainer;!function S2(e,t,n,r){const i=xn+r,a=n.length;r>0&&(n[i-1][S]=t),r<a-xn?(t[S]=n[i],b0(n,xn+r,t)):(n.push(t),t[S]=null),t[I]=n;const u=t[Xe];null!==u&&n!==u&&function _2(e,t){const n=e[vo];t[Je]!==t[I][I][Je]&&(e[Hh]=!0),null===n?e[vo]=[t]:n.push(t)}(u,t);const g=t[Ct];null!==g&&g.insertView(e),t[D]|=64}(i,r,u,a);const g=Wu(a,u),p=r[L],m=Dl(p,u[il]);return null!==m&&function A2(e,t,n,r,i,a){r[w]=i,r[M]=t,Xs(e,r,n,1,i,a)}(i,u[M],p,r,m,g),t.attachToViewContainerRef(),b0(Kd(u),a,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=wm(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Hu(this._lContainer,n);r&&(wl(Kd(this._lContainer),n),K0(r[C],r))}detach(t){const n=this._adjustIndex(t,-1),r=Hu(this._lContainer,n);return r&&null!=wl(Kd(this._lContainer),n)?new ea(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function wm(e){return e[ol]}function Kd(e){return e[ol]||(e[ol]=[])}function Jl(...e){}const ec=new pe("Application Initializer");let tc=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Jl,this.reject=Jl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const a=this.appInits[i]();if(zl(a))n.push(a);else if(Lg(a)){const u=new Promise((g,p)=>{a.subscribe({complete:g,error:p})});n.push(u)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(ue(ec,8))},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ha=new pe("AppId",{providedIn:"root",factory:function Wm(){return`${df()}${df()}${df()}`}});function df(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $m=new pe("Platform Initializer"),Ym=new pe("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let mS=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const ti=new pe("LocaleId",{providedIn:"root",factory:()=>Pe(ti,de.Optional|de.SkipSelf)||function yS(){return typeof $localize<"u"&&$localize.locale||ts}()});class xS{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let Xm=(()=>{class e{compileModuleSync(n){return new Xd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),a=Qr(d(n).declarations).reduce((u,g)=>{const p=o(g);return p&&u.push(new ta(p)),u},[]);return new xS(r,a)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const DS=(()=>Promise.resolve(0))();function ff(e){typeof Zone>"u"?DS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ot{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new An(!1),this.onMicrotaskEmpty=new An(!1),this.onStable=new An(!1),this.onError=new An(!1),typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function AS(){let e=ut.requestAnimationFrame,t=ut.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function SS(e){const t=()=>{!function vS(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ut,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,gf(e),e.isCheckStableRunning=!0,hf(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),gf(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,a,u,g)=>{try{return Qm(e),n.invokeTask(i,a,u,g)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&t(),Km(e)}},onInvoke:(n,r,i,a,u,g,p)=>{try{return Qm(e),n.invoke(i,a,u,g,p)}finally{e.shouldCoalesceRunChangeDetection&&t(),Km(e)}},onHasTask:(n,r,i,a)=>{n.hasTask(i,a),r===i&&("microTask"==a.change?(e._hasPendingMicrotasks=a.microTask,gf(e),hf(e)):"macroTask"==a.change&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(n,r,i,a)=>(n.handleError(i,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ot.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(Ot.isInAngularZone())throw new Y(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const a=this._inner,u=a.scheduleEventTask("NgZoneEvent: "+i,t,IS,Jl,Jl);try{return a.runTask(u,n,r)}finally{a.cancelTask(u)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const IS={};function hf(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function gf(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Qm(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Km(e){e._nesting--,hf(e)}class _S{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new An,this.onMicrotaskEmpty=new An,this.onStable=new An,this.onError=new An}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Jm=new pe(""),nc=new pe("");let yf,pf=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yf||(function bS(e){yf=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ot.assertNotInAngularZone(),ff(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ff(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let a=-1;r&&r>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==a),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:a,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(ue(Ot),ue(mf),ue(nc))},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})(),mf=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return yf?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const ni=!1;let Ci=null;const ey=new pe("AllowMultipleToken"),wf=new pe("PlatformDestroyListeners"),ty=new pe("appBootstrapListener");class ny{constructor(t,n){this.name=t,this.token=n}}function iy(e,t,n=[]){const r=`Platform: ${t}`,i=new pe(r);return(a=[])=>{let u=xf();if(!u||u.injector.get(ey,!1)){const g=[...n,...a,{provide:i,useValue:!0}];e?e(g):function NS(e){if(Ci&&!Ci.get(ey,!1))throw new Y(400,!1);Ci=e;const t=e.get(sy);(function ry(e){const t=e.get($m,null);t&&t.forEach(n=>n())})(e)}(function oy(e=[],t){return Kr.create({name:t,providers:[{provide:id,useValue:"platform"},{provide:wf,useValue:new Set([()=>Ci=null])},...e]})}(g,r))}return function OS(e){const t=xf();if(!t)throw new Y(401,!1);return t}()}}function xf(){return Ci?.get(sy)??null}let sy=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function ly(e,t){let n;return n="noop"===e?new _S:("zone.js"===e?void 0:e)||new Ot(t),n}(r?.ngZone,function ay(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),a=[{provide:Ot,useValue:i}];return i.run(()=>{const u=Kr.create({providers:a,parent:this.injector,name:n.moduleType.name}),g=n.create(u),p=g.injector.get(jo,null);if(!p)throw new Y(402,!1);return i.runOutsideAngular(()=>{const m=i.onError.subscribe({next:E=>{p.handleError(E)}});g.onDestroy(()=>{ic(this._modules,g),m.unsubscribe()})}),function cy(e,t,n){try{const r=n();return zl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(p,i,()=>{const m=g.injector.get(tc);return m.runInitializers(),m.donePromise.then(()=>(function Rp(e){Jt(e,"Expected localeId to be defined"),"string"==typeof e&&(Np=e.toLowerCase().replace(/_/g,"-"))}(g.injector.get(ti,ts)||ts),this._moduleDoBootstrap(g),g))})})}bootstrapModule(n,r=[]){const i=uy({},r);return function TS(e,t,n){const r=new Xd(n);return Promise.resolve(r)}(0,0,n).then(a=>this.bootstrapModuleFactory(a,i))}_moduleDoBootstrap(n){const r=n.injector.get(rc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Y(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(wf,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(ue(Kr))},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function uy(e,t){return Array.isArray(t)?t.reduce(uy,e):{...e,...t}}let rc=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new at(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),u=new at(g=>{let p;this._zone.runOutsideAngular(()=>{p=this._zone.onStable.subscribe(()=>{Ot.assertNotInAngularZone(),ff(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{Ot.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{p.unsubscribe(),m.unsubscribe()}});this.isStable=function qc(...e){const t=ki(e),n=function wt(e,t){return"number"==typeof Fi(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Qt(r[0]):di(n)(lt(r,t)):Xn}(a,u.pipe(function At(e={}){const{connector:t=(()=>new gt),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return a=>{let u,g,p,m=0,E=!1,A=!1;const v=()=>{g?.unsubscribe(),g=void 0},T=()=>{v(),u=p=void 0,E=A=!1},N=()=>{const F=u;T(),F?.unsubscribe()};return Dt((F,B)=>{m++,!A&&!E&&v();const G=p=p??t();B.add(()=>{m--,0===m&&!A&&!E&&(g=fi(N,i))}),G.subscribe(B),!u&&m>0&&(u=new or({next:Q=>G.next(Q),error:Q=>{A=!0,v(),g=fi(T,n,Q),G.error(Q)},complete:()=>{E=!0,v(),g=fi(T,r),G.complete()}}),Qt(F).subscribe(u))})(a)}}()))}bootstrap(n,r){const i=n instanceof L1;if(!this._injector.get(tc).done){!i&&function c(e){const t=o(e)||s(e)||l(e);return null!==t&&t.standalone}(n);throw new Y(405,ni)}let u;u=i?n:this._injector.get(Ks).resolveComponentFactory(n),this.componentTypes.push(u.componentType);const g=function MS(e){return e.isBoundToModule}(u)?void 0:this._injector.get(ns),m=u.create(Kr.NULL,[],r||u.selector,g),E=m.location.nativeElement,A=m.injector.get(Jm,null);return A?.registerApplication(E),m.onDestroy(()=>{this.detachView(m.hostView),ic(this.components,m),A?.unregisterApplication(E)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Y(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;ic(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(ty,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ic(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Y(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(ue(Ot),ue(qr),ue(jo))},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ic(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let Cf=(()=>{class e{}return e.__NG_ELEMENT_ID__=PS,e})();function PS(e){return function FS(e,t,n){if(Ps(e)&&!n){const r=bn(e.index,t);return new ea(r,r)}return 47&e.type?new ea(t[Je],t):null}(sn(),z(),16==(16&e))}const ZS=iy(null,"core",[]);let qS=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(ue(rc))},e.\u0275mod=dr({type:e}),e.\u0275inj=cr({}),e})(),Sf=null;function no(){return Sf}class JS{}const Nn=new pe("DocumentToken");let _f=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:function(){return function e_(){return ue(Ey)}()},providedIn:"platform"}),e})();const t_=new pe("Location Initialized");let Ey=(()=>{class e extends _f{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return no().getBaseHref(this._doc)}onPopState(n){const r=no().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=no().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){Dy()?this._history.pushState(n,r,i):this._location.hash=i}replaceState(n,r,i){Dy()?this._history.replaceState(n,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(ue(Nn))},e.\u0275prov=ge({token:e,factory:function(){return function n_(){return new Ey(ue(Nn))}()},providedIn:"platform"}),e})();function Dy(){return!!window.history.pushState}function bf(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Ay(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function ri(e){return e&&"?"!==e[0]?"?"+e:e}let ro=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:function(){return Pe(vy)},providedIn:"root"}),e})();const Iy=new pe("appBaseHref");let vy=(()=>{class e extends ro{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Pe(Nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return bf(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+ri(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,a){const u=this.prepareExternalUrl(i+ri(a));this._platformLocation.pushState(n,r,u)}replaceState(n,r,i,a){const u=this.prepareExternalUrl(i+ri(a));this._platformLocation.replaceState(n,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(ue(_f),ue(Iy,8))},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),r_=(()=>{class e extends ro{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=bf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,a){let u=this.prepareExternalUrl(i+ri(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(n,r,u)}replaceState(n,r,i,a){let u=this.prepareExternalUrl(i+ri(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(ue(_f),ue(Iy,8))},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})(),Tf=(()=>{class e{constructor(n){this._subject=new An,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function s_(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(Ay(Sy(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ri(r))}normalize(n){return e.stripTrailingSlash(function o_(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,Sy(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ri(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ri(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=ri,e.joinWithSlash=bf,e.stripTrailingSlash=Ay,e.\u0275fac=function(n){return new(n||e)(ue(ro))},e.\u0275prov=ge({token:e,factory:function(){return function i_(){return new Tf(ue(ro))}()},providedIn:"root"}),e})();function Sy(e){return e.replace(/\/index.html$/,"")}let Eb=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=dr({type:e}),e.\u0275inj=cr({}),e})();let vb=(()=>{class e{}return e.\u0275prov=ge({token:e,providedIn:"root",factory:()=>new Sb(ue(Nn),window)}),e})();class Sb{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function _b(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(t)||a.querySelector(`[name="${t}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=zy(this.window.history)||zy(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function zy(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class tT extends JS{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $f extends tT{static makeCurrent(){!function KS(e){Sf||(Sf=e)}(new $f)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function nT(){return wa=wa||document.querySelector("base"),wa?wa.getAttribute("href"):null}();return null==n?null:function rT(e){xc=xc||document.createElement("a"),xc.setAttribute("href",e);const t=xc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){wa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function z_(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,a]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(a)}return null}(document.cookie,t)}}let xc,wa=null;const Xy=new pe("TRANSITION_ID"),oT=[{provide:ec,useFactory:function iT(e,t,n){return()=>{n.get(tc).donePromise.then(()=>{const r=no(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Xy,Nn,Kr],multi:!0}];let aT=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})();const Cc=new pe("EventManagerPlugins");let Ec=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(n))return this._eventNameToPlugin.set(n,u),u}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(ue(Cc),ue(Ot))},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})();class Zy{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=no().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let qy=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const i=this.usageCount;let a=i.get(n)??0;return a+=r,a>0?i.set(n,a):i.delete(n),a}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})(),xa=(()=>{class e extends qy{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(a=>a.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const i=this.doc.createElement("style");i.textContent=r,n.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(ue(Nn))},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})();const Yf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xf=/%COMP%/g,Jy=new pe("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ew(e,t){return t.flat(100).map(n=>n.replace(Xf,e))}function tw(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Zf=(()=>{class e{constructor(n,r,i,a){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new qf(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof iw?i.applyToHost(n):i instanceof Qf&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const u=this.eventManager,g=this.sharedStylesHost,p=this.removeStylesOnCompDestory;switch(r.encapsulation){case Zn.Emulated:a=new iw(u,g,r,this.appId,p);break;case Zn.ShadowDom:return new gT(u,g,n,r);default:a=new Qf(u,g,r,p)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(ue(Ec),ue(xa),ue(ha),ue(Jy))},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})();class qf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Yf[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(rw(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(rw(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const a=Yf[i];a?t.setAttributeNS(a,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Yf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Tn.DashCase|Tn.Important)?t.style.setProperty(n,r,i&Tn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Tn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,tw(r)):this.eventManager.addEventListener(t,n,tw(r))}}function rw(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class gT extends qf{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ew(i.id,i.styles);for(const u of a){const g=document.createElement("style");g.textContent=u,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Qf extends qf{constructor(t,n,r,i,a=r.id){super(t),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=ew(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class iw extends Qf{constructor(t,n,r,i,a){const u=i+"-"+r.id;super(t,n,r,a,u),this.contentAttr=function dT(e){return"_ngcontent-%COMP%".replace(Xf,e)}(u),this.hostAttr=function fT(e){return"_nghost-%COMP%".replace(Xf,e)}(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let pT=(()=>{class e extends Zy{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(ue(Nn))},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})();const ow=["alt","control","meta","shift"],mT={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yT={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let wT=(()=>{class e extends Zy{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const a=e.parseEventName(r),u=e.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>no().onAndCancel(n,a.domEventName,u))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=e._normalizeKey(r.pop());let u="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),u="code."),ow.forEach(m=>{const E=r.indexOf(m);E>-1&&(r.splice(E,1),u+=m+".")}),u+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static matchEventFullKeyCode(n,r){let i=mT[n.key]||n.key,a="";return r.indexOf("code.")>-1&&(i=n.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ow.forEach(u=>{u!==i&&(0,yT[u])(n)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(n,r,i){return a=>{e.matchEventFullKeyCode(a,n)&&i.runGuarded(()=>r(a))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(ue(Nn))},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})();const aw=[{provide:Ym,useValue:"browser"},{provide:$m,useValue:function xT(){$f.makeCurrent()},multi:!0},{provide:Nn,useFactory:function ET(){return function U2(e){Zu=e}(document),document},deps:[]}],DT=iy(ZS,"browser",aw),lw=new pe(""),cw=[{provide:nc,useClass:class sT{addToWindow(t){ut.getAngularTestability=(r,i=!0)=>{const a=t.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},ut.getAllAngularTestabilities=()=>t.getAllTestabilities(),ut.getAllAngularRootElements=()=>t.getAllRootElements(),ut.frameworkStabilizers||(ut.frameworkStabilizers=[]),ut.frameworkStabilizers.push(r=>{const i=ut.getAllAngularTestabilities();let a=i.length,u=!1;const g=function(p){u=u||p,a--,0==a&&r(u)};i.forEach(function(p){p.whenStable(g)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?no().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Jm,useClass:pf,deps:[Ot,mf,nc]},{provide:pf,useClass:pf,deps:[Ot,mf,nc]}],uw=[{provide:id,useValue:"root"},{provide:jo,useFactory:function CT(){return new jo},deps:[]},{provide:Cc,useClass:pT,multi:!0,deps:[Nn,Ot,Ym]},{provide:Cc,useClass:wT,multi:!0,deps:[Nn]},{provide:Zf,useClass:Zf,deps:[Ec,xa,ha,Jy]},{provide:F1,useExisting:Zf},{provide:qy,useExisting:xa},{provide:xa,useClass:xa,deps:[Nn]},{provide:Ec,useClass:Ec,deps:[Cc,Ot]},{provide:class bb{},useClass:aT,deps:[]},[]];let AT=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:ha,useValue:n.appId},{provide:Xy,useExisting:ha},oT]}}}return e.\u0275fac=function(n){return new(n||e)(ue(lw,12))},e.\u0275mod=dr({type:e}),e.\u0275inj=cr({providers:[...uw,...cw],imports:[Eb,qS]}),e})(),dw=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(ue(Nn))},e.\u0275prov=ge({token:e,factory:function(n){let r=null;return r=n?new n:function vT(){return new dw(ue(Nn))}(),r},providedIn:"root"}),e})();function he(...e){return lt(e,ki(e))}typeof window<"u"&&window;class Er extends gt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const Dc=ys(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:NT}=Array,{getPrototypeOf:RT,prototype:OT,keys:LT}=Object;const{isArray:kT}=Array;function gw(...e){const t=ki(e),n=function V(e){return Ze(Fi(e))?e.pop():void 0}(e),{args:r,keys:i}=function PT(e){if(1===e.length){const t=e[0];if(NT(t))return{args:t,keys:null};if(function FT(e){return e&&"object"==typeof e&&RT(e)===OT}(t)){const n=LT(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return lt([],t);const a=new at(function VT(e,t,n=ft){return r=>{pw(t,()=>{const{length:i}=e,a=new Array(i);let u=i,g=i;for(let p=0;p<i;p++)pw(t,()=>{const m=lt(e[p],t);let E=!1;m.subscribe(Oe(r,A=>{a[p]=A,E||(E=!0,g--),g||r.next(n(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,t,i?u=>function jT(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,u):ft));return n?a.pipe(function UT(e){return _e(t=>function BT(e,t){return kT(t)?e(...t):e(t)}(e,t))}(n)):a}function pw(e,t,n){e?Yn(n,e,t):t()}function eh(...e){return function HT(){return di(1)}()(lt(e,ki(e)))}function mw(e){return new at(t=>{Qt(e()).subscribe(t)})}function Ca(e,t){const n=Ze(e)?e:()=>e,r=i=>i.error(n());return new at(t?i=>t.schedule(r,0,i):r)}function th(){return Dt((e,t)=>{let n=null;e._refCount++;const r=Oe(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,a=n;n=null,i&&(!a||i===a)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class yw extends at{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ae(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new vn;const n=this.getSubject();t.add(this.source.subscribe(Oe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=vn.EMPTY)}return t}refCount(){return th()(this)}}function Pr(e,t){return Dt((n,r)=>{let i=null,a=0,u=!1;const g=()=>u&&!i&&r.complete();n.subscribe(Oe(r,p=>{i?.unsubscribe();let m=0;const E=a++;Qt(e(p,E)).subscribe(i=Oe(r,A=>r.next(t?t(p,A,E,m++):A),()=>{i=null,g()}))},()=>{u=!0,g()}))})}function os(e){return e<=0?()=>Xn:Dt((t,n)=>{let r=0;t.subscribe(Oe(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Di(e,t){return Dt((n,r)=>{let i=0;n.subscribe(Oe(r,a=>e.call(t,a,i++)&&r.next(a)))})}function Ac(e){return Dt((t,n)=>{let r=!1;t.subscribe(Oe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function ww(e=GT){return Dt((t,n)=>{let r=!1;t.subscribe(Oe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function GT(){return new Dc}function Ai(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Di((i,a)=>e(i,a,r)):ft,os(1),n?Ac(t):ww(()=>new Dc))}function io(e,t){return Ze(t)?Wt(e,t,1):Wt(e,1)}function hn(e,t,n){const r=Ze(e)||t||n?{next:e,error:t,complete:n}:e;return r?Dt((i,a)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let g=!0;i.subscribe(Oe(a,p=>{var m;null===(m=r.next)||void 0===m||m.call(r,p),a.next(p)},()=>{var p;g=!1,null===(p=r.complete)||void 0===p||p.call(r),a.complete()},p=>{var m;g=!1,null===(m=r.error)||void 0===m||m.call(r,p),a.error(p)},()=>{var p,m;g&&(null===(p=r.unsubscribe)||void 0===p||p.call(r)),null===(m=r.finalize)||void 0===m||m.call(r)}))}):ft}function Ii(e){return Dt((t,n)=>{let a,r=null,i=!1;r=t.subscribe(Oe(n,void 0,void 0,u=>{a=Qt(e(u,Ii(e)(t))),r?(r.unsubscribe(),r=null,a.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(n))})}function xw(e,t){return Dt(function WT(e,t,n,r,i){return(a,u)=>{let g=n,p=t,m=0;a.subscribe(Oe(u,E=>{const A=m++;p=g?e(p,E,A):(g=!0,E),r&&u.next(p)},i&&(()=>{g&&u.next(p),u.complete()})))}}(e,t,arguments.length>=2,!0))}function nh(e){return e<=0?()=>Xn:Dt((t,n)=>{let r=[];t.subscribe(Oe(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Cw(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Di((i,a)=>e(i,a,r)):ft,nh(1),n?Ac(t):ww(()=>new Dc))}function rh(e){return Dt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const Ie="primary",Ea=Symbol("RouteTitle");class XT{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ss(e){return new XT(e)}function ZT(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],g=e[a];if(u.startsWith(":"))i[u.substring(1)]=g;else if(u!==g.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Fr(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let a=0;a<n.length;a++)if(i=n[a],!Ew(e[i],t[i]))return!1;return!0}function Ew(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,a)=>r[a]===i)}return e===t}function Dw(e){return Array.prototype.concat.apply([],e)}function Aw(e){return e.length>0?e[e.length-1]:null}function an(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function vi(e){return Lg(e)?e:zl(e)?lt(Promise.resolve(e)):he(e)}const Ic=!1,QT={exact:function Sw(e,t,n){if(!oo(e.segments,t.segments)||!vc(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!Sw(e.children[r],t.children[r],n))return!1;return!0},subset:_w},Iw={exact:function KT(e,t){return Fr(e,t)},subset:function JT(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Ew(e[n],t[n]))},ignored:()=>!0};function vw(e,t,n){return QT[n.paths](e.root,t.root,n.matrixParams)&&Iw[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function _w(e,t,n){return bw(e,t,t.segments,n)}function bw(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!oo(i,n)||t.hasChildren()||!vc(i,n,r))}if(e.segments.length===n.length){if(!oo(e.segments,n)||!vc(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!_w(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),a=n.slice(e.segments.length);return!!(oo(e.segments,i)&&vc(e.segments,i,r)&&e.children[Ie])&&bw(e.children[Ie],t,a,r)}}function vc(e,t,n){return t.every((r,i)=>Iw[n](e[i].parameters,r.parameters))}class Si{constructor(t=new Re([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ss(this.queryParams)),this._queryParamMap}toString(){return nM.serialize(this)}}class Re{constructor(t,n){this.segments=t,this.children=n,this.parent=null,an(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sc(this)}}class Da{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ss(this.parameters)),this._parameterMap}toString(){return Nw(this)}}function oo(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let Aa=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:function(){return new ih},providedIn:"root"}),e})();class ih{parse(t){const n=new dM(t);return new Si(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ia(t.root,!0)}`,r=function oM(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${_c(n)}=${_c(i)}`).join("&"):`${_c(n)}=${_c(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function rM(e){return encodeURI(e)}(t.fragment)}`:""}`}}const nM=new ih;function Sc(e){return e.segments.map(t=>Nw(t)).join("/")}function Ia(e,t){if(!e.hasChildren())return Sc(e);if(t){const n=e.children[Ie]?Ia(e.children[Ie],!1):"",r=[];return an(e.children,(i,a)=>{a!==Ie&&r.push(`${a}:${Ia(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function tM(e,t){let n=[];return an(e.children,(r,i)=>{i===Ie&&(n=n.concat(t(r,i)))}),an(e.children,(r,i)=>{i!==Ie&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===Ie?[Ia(e.children[Ie],!1)]:[`${i}:${Ia(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Ie]?`${Sc(e)}/${n[0]}`:`${Sc(e)}/(${n.join("//")})`}}function Tw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _c(e){return Tw(e).replace(/%3B/gi,";")}function oh(e){return Tw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bc(e){return decodeURIComponent(e)}function Mw(e){return bc(e.replace(/\+/g,"%20"))}function Nw(e){return`${oh(e.path)}${function iM(e){return Object.keys(e).map(t=>`;${oh(t)}=${oh(e[t])}`).join("")}(e.parameters)}`}const sM=/^[^\/()?;=#]+/;function Tc(e){const t=e.match(sM);return t?t[0]:""}const aM=/^[^=?&#]+/,cM=/^[^&#]+/;class dM{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ie]=new Re(t,n)),r}parseSegment(){const t=Tc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Y(4009,Ic);return this.capture(t),new Da(bc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Tc(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Tc(this.remaining);i&&(r=i,this.capture(r))}t[bc(n)]=bc(r)}parseQueryParam(t){const n=function lM(e){const t=e.match(aM);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const u=function uM(e){const t=e.match(cM);return t?t[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Mw(n),a=Mw(r);if(t.hasOwnProperty(i)){let u=t[i];Array.isArray(u)||(u=[u],t[i]=u),u.push(a)}else t[i]=a}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Tc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Y(4010,Ic);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):t&&(a=Ie);const u=this.parseChildren();n[a]=1===Object.keys(u).length?u[Ie]:new Re([],u),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Y(4011,Ic)}}function sh(e){return e.segments.length>0?new Re([],{[Ie]:e}):e}function Mc(e){const t={};for(const r of Object.keys(e.children)){const a=Mc(e.children[r]);(a.segments.length>0||a.hasChildren())&&(t[r]=a)}return function fM(e){if(1===e.numberOfChildren&&e.children[Ie]){const t=e.children[Ie];return new Re(e.segments.concat(t.segments),t.children)}return e}(new Re(e.segments,t))}function so(e){return e instanceof Si}const ah=!1;function hM(e,t,n,r,i){if(0===n.length)return as(t.root,t.root,t.root,r,i);const a=function Fw(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Pw(!0,0,e);let t=0,n=!1;const r=e.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const g={};return an(a.outlets,(p,m)=>{g[m]="string"==typeof p?p.split("/"):p}),[...i,{outlets:g}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((g,p)=>{0==p&&"."===g||(0==p&&""===g?n=!0:".."===g?t++:""!=g&&i.push(g))}),i):[...i,a]},[]);return new Pw(n,t,r)}(n);return a.toRoot()?as(t.root,t.root,new Re([],{}),r,i):function u(p){const m=function pM(e,t,n,r){if(e.isAbsolute)return new ls(t.root,!0,0);if(-1===r)return new ls(n,n===t.root,0);return function kw(e,t,n){let r=e,i=t,a=n;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Y(4005,ah&&"Invalid number of '../'");i=r.segments.length}return new ls(r,!1,i-a)}(n,r+(va(e.commands[0])?0:1),e.numberOfDoubleDots)}(a,t,e.snapshot?._urlSegment,p),E=m.processChildren?cs(m.segmentGroup,m.index,a.commands):lh(m.segmentGroup,m.index,a.commands);return as(t.root,m.segmentGroup,E,r,i)}(e.snapshot?._lastPathIndex)}function va(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Sa(e){return"object"==typeof e&&null!=e&&e.outlets}function as(e,t,n,r,i){let u,a={};r&&an(r,(p,m)=>{a[m]=Array.isArray(p)?p.map(E=>`${E}`):`${p}`}),u=e===t?n:Lw(e,t,n);const g=sh(Mc(u));return new Si(g,a,i)}function Lw(e,t,n){const r={};return an(e.children,(i,a)=>{r[a]=i===t?n:Lw(i,t,n)}),new Re(e.segments,r)}class Pw{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&va(r[0]))throw new Y(4003,ah&&"Root segment cannot have matrix parameters");const i=r.find(Sa);if(i&&i!==Aw(r))throw new Y(4004,ah&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ls{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function lh(e,t,n){if(e||(e=new Re([],{})),0===e.segments.length&&e.hasChildren())return cs(e,t,n);const r=function yM(e,t,n){let r=0,i=t;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return a;const u=e.segments[i],g=n[r];if(Sa(g))break;const p=`${g}`,m=r<n.length-1?n[r+1]:null;if(i>0&&void 0===p)break;if(p&&m&&"object"==typeof m&&void 0===m.outlets){if(!Uw(p,m,u))return a;r+=2}else{if(!Uw(p,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const a=new Re(e.segments.slice(0,r.pathIndex),{});return a.children[Ie]=new Re(e.segments.slice(r.pathIndex),e.children),cs(a,0,i)}return r.match&&0===i.length?new Re(e.segments,{}):r.match&&!e.hasChildren()?ch(e,t,n):r.match?cs(e,0,i):ch(e,t,n)}function cs(e,t,n){if(0===n.length)return new Re(e.segments,{});{const r=function mM(e){return Sa(e[0])?e[0].outlets:{[Ie]:e}}(n),i={};if(!r[Ie]&&e.children[Ie]&&1===e.numberOfChildren&&0===e.children[Ie].segments.length){const a=cs(e.children[Ie],t,n);return new Re(e.segments,a.children)}return an(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=lh(e.children[u],t,a))}),an(e.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Re(e.segments,i)}}function ch(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const a=n[i];if(Sa(a)){const p=wM(a.outlets);return new Re(r,p)}if(0===i&&va(n[0])){r.push(new Da(e.segments[t].path,Bw(n[0]))),i++;continue}const u=Sa(a)?a.outlets[Ie]:`${a}`,g=i<n.length-1?n[i+1]:null;u&&g&&va(g)?(r.push(new Da(u,Bw(g))),i+=2):(r.push(new Da(u,{})),i++)}return new Re(r,{})}function wM(e){const t={};return an(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=ch(new Re([],{}),0,n))}),t}function Bw(e){const t={};return an(e,(n,r)=>t[r]=`${n}`),t}function Uw(e,t,n){return e==n.path&&Fr(t,n.parameters)}const _a="imperative";class kr{constructor(t,n){this.id=t,this.url=n}}class uh extends kr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ao extends kr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nc extends kr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rc extends kr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class dh extends kr{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xM extends kr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CM extends kr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EM extends kr{constructor(t,n,r,i,a){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class DM extends kr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AM extends kr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IM{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vM{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class SM{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _M{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bM{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TM{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jw{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let RM=(()=>{class e{createUrlTree(n,r,i,a,u,g){return hM(n||r.root,i,a,u,g)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})(),LM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:function(t){return RM.\u0275fac(t)},providedIn:"root"}),e})();class Vw{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=fh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=fh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=hh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return hh(t,this._root).map(n=>n.value)}}function fh(e,t){if(e===t.value)return t;for(const n of t.children){const r=fh(e,n);if(r)return r}return null}function hh(e,t){if(e===t.value)return[t];for(const n of t.children){const r=hh(e,n);if(r.length)return r.unshift(t),r}return[]}class oi{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function us(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class Hw extends Vw{constructor(t,n){super(t),this.snapshot=n,gh(this,t)}toString(){return this.snapshot.toString()}}function zw(e,t){const n=function PM(e,t){const u=new Oc([],{},{},"",{},Ie,t,null,e.root,-1,{});return new Ww("",new oi(u,[]))}(e,t),r=new Er([new Da("",{})]),i=new Er({}),a=new Er({}),u=new Er({}),g=new Er(""),p=new ds(r,i,u,g,a,Ie,t,n.root);return p.snapshot=n.root,new Hw(new oi(p,[]),n)}class ds{constructor(t,n,r,i,a,u,g,p){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=g,this.title=this.data?.pipe(_e(m=>m[Ea]))??he(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(_e(t=>ss(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(_e(t=>ss(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gw(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function FM(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Oc{get title(){return this.data?.[Ea]}constructor(t,n,r,i,a,u,g,p,m,E,A){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=g,this.routeConfig=p,this._urlSegment=m,this._lastPathIndex=E,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ss(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ss(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ww extends Vw{constructor(t,n){super(n),this.url=t,gh(this,n)}toString(){return $w(this._root)}}function gh(e,t){t.value._routerState=e,t.children.forEach(n=>gh(e,n))}function $w(e){const t=e.children.length>0?` { ${e.children.map($w).join(", ")} } `:"";return`${e.value}${t}`}function ph(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Fr(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Fr(t.params,n.params)||e.params.next(n.params),function qT(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Fr(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Fr(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function mh(e,t){const n=Fr(e.params,t.params)&&function eM(e,t){return oo(e,t)&&e.every((n,r)=>Fr(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||mh(e.parent,t.parent))}function ba(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function BM(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return ba(e,r,i);return ba(e,r)})}(e,t,n);return new oi(r,i)}{if(e.shouldAttach(t.value)){const a=e.retrieve(t.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=t.value,u.children=t.children.map(g=>ba(e,g)),u}}const r=function UM(e){return new ds(new Er(e.url),new Er(e.params),new Er(e.queryParams),new Er(e.fragment),new Er(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(a=>ba(e,a));return new oi(r,i)}}const yh="ngNavigationCancelingError";function Yw(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=so(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Xw(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function Xw(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[yh]=!0,r.cancellationCode=t,n&&(r.url=n),r}function Zw(e){return qw(e)&&so(e.url)}function qw(e){return e&&e[yh]}class jM{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ta,this.attachRef=null}}let Ta=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new jM,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Lc=!1;let wh=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ie,this.activateEvents=new An,this.deactivateEvents=new An,this.attachEvents=new An,this.detachEvents=new An,this.parentContexts=Pe(Ta),this.location=Pe(yr),this.changeDetector=Pe(Cf),this.environmentInjector=Pe(qr)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,Lc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,Lc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,Lc);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Y(4013,Lc);this._activatedRoute=n;const i=this.location,u=n.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,p=new VM(n,g,i.injector);if(r&&function HM(e){return!!e.resolveComponentFactory}(r)){const m=r.resolveComponentFactory(u);this.activated=i.createComponent(m,i.length,p)}else this.activated=i.createComponent(u,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Ut({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$i]}),e})();class VM{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===ds?this.route:t===Ta?this.childContexts:this.parent.get(t,n)}}let xh=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Io({type:e,selectors:[["ng-component"]],standalone:!0,features:[om],decls:1,vars:0,template:function(n,r){1&n&&ra(0,"router-outlet")},dependencies:[wh],encapsulation:2}),e})();function Qw(e,t){return e.providers&&!e._injector&&(e._injector=ql(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Eh(e){const t=e.children&&e.children.map(Eh),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ie&&(n.component=xh),n}function rr(e){return e.outlet||Ie}function Kw(e,t){const n=e.filter(r=>rr(r)===t);return n.push(...e.filter(r=>rr(r)!==t)),n}function Ma(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class YM{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),ph(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=us(n);t.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),an(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(t,n,r){const i=t.value,a=n?n.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(t,n,u.children)}else this.deactivateChildRoutes(t,n,r);else a&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,a=us(t);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:u,route:t,contexts:g})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,a=us(t);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=us(n);t.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new TM(a.value.snapshot))}),t.children.length&&this.forwardEvent(new _M(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,a=n?n.value:null;if(ph(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,u.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(g.contexts),u.attachRef=g.componentRef,u.route=g.route.value,u.outlet&&u.outlet.attach(g.componentRef,g.route.value),ph(g.route.value),this.activateChildRoutes(t,null,u.children)}else{const g=Ma(i.snapshot),p=g?.get(Ks)??null;u.attachRef=null,u.route=i,u.resolver=p,u.injector=g,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(t,null,u.children)}}else this.activateChildRoutes(t,null,r)}}class Jw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Pc{constructor(t,n){this.component=t,this.route=n}}function XM(e,t,n){const r=e._root;return Na(r,t?t._root:null,n,[r.value])}function fs(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function eu(e){return null!==Ui(e)}(e)?t.get(e):e:r}function Na(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=us(t);return e.children.forEach(u=>{(function qM(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=e.value,u=t?t.value:null,g=n?n.getContext(e.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const p=function QM(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!oo(e.url,t.url);case"pathParamsOrQueryParamsChange":return!oo(e.url,t.url)||!Fr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mh(e,t)||!Fr(e.queryParams,t.queryParams);default:return!mh(e,t)}}(u,a,a.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new Jw(r)):(a.data=u.data,a._resolvedData=u._resolvedData),Na(e,t,a.component?g?g.children:null:n,r,i),p&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new Pc(g.outlet.component,u))}else u&&Ra(t,g,i),i.canActivateChecks.push(new Jw(r)),Na(e,null,a.component?g?g.children:null:n,r,i)})(u,a[u.value.outlet],n,r.concat([u.value]),i),delete a[u.value.outlet]}),an(a,(u,g)=>Ra(u,n.getContext(g),i)),i}function Ra(e,t,n){const r=us(e),i=e.value;an(r,(a,u)=>{Ra(a,i.component?t?t.children.getContext(u):null:t,n)}),n.canDeactivateChecks.push(new Pc(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Oa(e){return"function"==typeof e}function Dh(e){return e instanceof Dc||"EmptyError"===e?.name}const Fc=Symbol("INITIAL_VALUE");function hs(){return Pr(e=>gw(e.map(t=>t.pipe(os(1),function zT(...e){const t=ki(e);return Dt((n,r)=>{(t?eh(e,n,t):eh(e,n)).subscribe(r)})}(Fc)))).pipe(_e(t=>{for(const n of t)if(!0!==n){if(n===Fc)return Fc;if(!1===n||n instanceof Si)return n}return!0}),Di(t=>t!==Fc),os(1)))}function ex(e){return function ve(...e){return li(e)}(hn(t=>{if(so(t))throw Yw(0,t)}),_e(t=>!0===t))}const Ah={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tx(e,t,n,r,i){const a=Ih(e,t,n);return a.matched?function g3(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?he(i.map(u=>{const g=fs(u,e);return vi(function r3(e){return e&&Oa(e.canMatch)}(g)?g.canMatch(t,n):e.runInContext(()=>g(t,n)))})).pipe(hs(),ex()):he(!0)}(r=Qw(t,r),t,n).pipe(_e(u=>!0===u?a:{...Ah})):he(a)}function Ih(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...Ah}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||ZT)(n,e,t);if(!i)return{...Ah};const a={};an(i.posParams,(g,p)=>{a[p]=g.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function kc(e,t,n,r){if(n.length>0&&function y3(e,t,n){return n.some(r=>Bc(e,t,r)&&rr(r)!==Ie)}(e,n,r)){const a=new Re(t,function m3(e,t,n,r){const i={};i[Ie]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const a of n)if(""===a.path&&rr(a)!==Ie){const u=new Re([],{});u._sourceSegment=e,u._segmentIndexShift=t.length,i[rr(a)]=u}return i}(e,t,r,new Re(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function w3(e,t,n){return n.some(r=>Bc(e,t,r))}(e,n,r)){const a=new Re(e.segments,function p3(e,t,n,r,i){const a={};for(const u of r)if(Bc(e,n,u)&&!i[rr(u)]){const g=new Re([],{});g._sourceSegment=e,g._segmentIndexShift=t.length,a[rr(u)]=g}return{...i,...a}}(e,t,n,r,e.children));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}const i=new Re(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}function Bc(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function nx(e,t,n,r){return!!(rr(e)===r||r!==Ie&&Bc(t,n,e))&&("**"===e.path||Ih(t,e,n).matched)}function rx(e,t,n){return 0===t.length&&!e.children[n]}const Uc=!1;class jc{constructor(t){this.segmentGroup=t||null}}class ix{constructor(t){this.urlTree=t}}function La(e){return Ca(new jc(e))}function ox(e){return Ca(new ix(e))}class D3{constructor(t,n,r,i,a){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const t=kc(this.urlTree.root,[],[],this.config).segmentGroup,n=new Re(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,Ie).pipe(_e(a=>this.createUrlTree(Mc(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ii(a=>{if(a instanceof ix)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof jc?this.noMatchError(a):a}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Ie).pipe(_e(i=>this.createUrlTree(Mc(i),t.queryParams,t.fragment))).pipe(Ii(i=>{throw i instanceof jc?this.noMatchError(i):i}))}noMatchError(t){return new Y(4002,Uc)}createUrlTree(t,n,r){const i=sh(t);return new Si(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(_e(a=>new Re([],a))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return lt(i).pipe(io(a=>{const u=r.children[a],g=Kw(n,a);return this.expandSegmentGroup(t,g,u,a).pipe(_e(p=>({segment:p,outlet:a})))}),xw((a,u)=>(a[u.outlet]=u.segment,a),{}),Cw())}expandSegment(t,n,r,i,a,u){return lt(r).pipe(io(g=>this.expandSegmentAgainstRoute(t,n,r,g,i,a,u).pipe(Ii(m=>{if(m instanceof jc)return he(null);throw m}))),Ai(g=>!!g),Ii((g,p)=>{if(Dh(g))return rx(n,i,a)?he(new Re([],{})):La(n);throw g}))}expandSegmentAgainstRoute(t,n,r,i,a,u,g){return nx(i,n,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,a,u):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,a,u):La(n):La(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ox(a):this.lineralizeSegments(r,a).pipe(Wt(u=>{const g=new Re(u,{});return this.expandSegment(t,g,n,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,a,u){const{matched:g,consumedSegments:p,remainingSegments:m,positionalParamSegments:E}=Ih(n,i,a);if(!g)return La(n);const A=this.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?ox(A):this.lineralizeSegments(i,A).pipe(Wt(v=>this.expandSegment(t,n,r,v.concat(m),u,!1)))}matchSegmentAgainstRoute(t,n,r,i,a){return"**"===r.path?(t=Qw(r,t),r.loadChildren?(r._loadedRoutes?he({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(_e(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Re(i,{})))):he(new Re(i,{}))):tx(n,r,i,t).pipe(Pr(({matched:u,consumedSegments:g,remainingSegments:p})=>u?this.getChildConfig(t=r._injector??t,r,i).pipe(Wt(E=>{const A=E.injector??t,v=E.routes,{segmentGroup:T,slicedSegments:N}=kc(n,g,p,v),F=new Re(T.segments,T.children);if(0===N.length&&F.hasChildren())return this.expandChildren(A,v,F).pipe(_e(j=>new Re(g,j)));if(0===v.length&&0===N.length)return he(new Re(g,{}));const B=rr(r)===a;return this.expandSegment(A,F,v,N,B?Ie:a,!0).pipe(_e(Q=>new Re(g.concat(Q.segments),Q.children)))})):La(n)))}getChildConfig(t,n,r){return n.children?he({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?he({routes:n._loadedRoutes,injector:n._loadedInjector}):function h3(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?he(!0):he(i.map(u=>{const g=fs(u,e);return vi(function JM(e){return e&&Oa(e.canLoad)}(g)?g.canLoad(t,n):e.runInContext(()=>g(t,n)))})).pipe(hs(),ex())}(t,n,r).pipe(Wt(i=>i?this.configLoader.loadChildren(t,n).pipe(hn(a=>{n._loadedRoutes=a.routes,n._loadedInjector=a.injector})):function C3(e){return Ca(Xw(Uc,3))}())):he({routes:[],injector:t})}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return he(r);if(i.numberOfChildren>1||!i.children[Ie])return t.redirectTo,Ca(new Y(4e3,Uc));i=i.children[Ie]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const a=this.createSegmentGroup(t,n.root,r,i);return new Si(a,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return an(t,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const g=i.substring(1);r[a]=n[g]}else r[a]=i}),r}createSegmentGroup(t,n,r,i){const a=this.createSegments(t,n.segments,r,i);let u={};return an(n.children,(g,p)=>{u[p]=this.createSegmentGroup(t,g,r,i)}),new Re(a,u)}createSegments(t,n,r,i){return n.map(a=>a.path.startsWith(":")?this.findPosParam(t,a,i):this.findOrReturn(a,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new Y(4001,Uc);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}class I3{}class _3{constructor(t,n,r,i,a,u,g){this.injector=t,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.urlSerializer=g}recognize(){const t=kc(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ie).pipe(_e(n=>{if(null===n)return null;const r=new Oc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ie,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new oi(r,n),a=new Ww(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(t){const n=t.value,r=Gw(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i)}processChildren(t,n,r){return lt(Object.keys(r.children)).pipe(io(i=>{const a=r.children[i],u=Kw(n,i);return this.processSegmentGroup(t,u,a,i)}),xw((i,a)=>i&&a?(i.push(...a),i):null),function $T(e,t=!1){return Dt((n,r)=>{let i=0;n.subscribe(Oe(r,a=>{const u=e(a,i++);(u||t)&&r.next(a),!u&&r.complete()}))})}(i=>null!==i),Ac(null),Cw(),_e(i=>{if(null===i)return null;const a=ax(i);return function b3(e){e.sort((t,n)=>t.value.outlet===Ie?-1:n.value.outlet===Ie?1:t.value.outlet.localeCompare(n.value.outlet))}(a),a}))}processSegment(t,n,r,i,a){return lt(n).pipe(io(u=>this.processSegmentAgainstRoute(u._injector??t,u,r,i,a)),Ai(u=>!!u),Ii(u=>{if(Dh(u))return rx(r,i,a)?he([]):he(null);throw u}))}processSegmentAgainstRoute(t,n,r,i,a){if(n.redirectTo||!nx(n,r,i,a))return he(null);let u;if("**"===n.path){const g=i.length>0?Aw(i).parameters:{},p=cx(r)+i.length;u=he({snapshot:new Oc(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ux(n),rr(n),n.component??n._loadedComponent??null,n,lx(r),p,dx(n)),consumedSegments:[],remainingSegments:[]})}else u=tx(r,n,i,t).pipe(_e(({matched:g,consumedSegments:p,remainingSegments:m,parameters:E})=>{if(!g)return null;const A=cx(r)+p.length;return{snapshot:new Oc(p,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ux(n),rr(n),n.component??n._loadedComponent??null,n,lx(r),A,dx(n)),consumedSegments:p,remainingSegments:m}}));return u.pipe(Pr(g=>{if(null===g)return he(null);const{snapshot:p,consumedSegments:m,remainingSegments:E}=g;t=n._injector??t;const A=n._loadedInjector??t,v=function T3(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:T,slicedSegments:N}=kc(r,m,E,v.filter(B=>void 0===B.redirectTo));if(0===N.length&&T.hasChildren())return this.processChildren(A,v,T).pipe(_e(B=>null===B?null:[new oi(p,B)]));if(0===v.length&&0===N.length)return he([new oi(p,[])]);const F=rr(n)===a;return this.processSegment(A,v,T,N,F?Ie:a).pipe(_e(B=>null===B?null:[new oi(p,B)]))}))}}function M3(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function ax(e){const t=[],n=new Set;for(const r of e){if(!M3(r)){t.push(r);continue}const i=t.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=ax(r.children);t.push(new oi(r.value,i))}return t.filter(r=>!n.has(r))}function lx(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function cx(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function ux(e){return e.data||{}}function dx(e){return e.resolve||{}}function fx(e){return"string"==typeof e.title||null===e.title}function vh(e){return Pr(t=>{const n=e(t);return n?lt(n).pipe(_e(()=>t)):he(t)})}const gs=new pe("ROUTES");let Sh=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Pe(Xm)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return he(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=vi(n.loadComponent()).pipe(_e(gx),hn(a=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=a}),rh(()=>{this.componentLoaders.delete(n)})),i=new yw(r,()=>new gt).pipe(th());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(_e(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,m,E=!1;Array.isArray(g)?m=g:(p=g.create(n).injector,m=Dw(p.get(gs,[],de.Self|de.Optional)));return{routes:m.map(Eh),injector:p}}),rh(()=>{this.childrenLoaders.delete(r)})),u=new yw(a,()=>new gt).pipe(th());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(n){return vi(n()).pipe(_e(gx),Wt(r=>r instanceof rm||Array.isArray(r)?he(r):lt(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function gx(e){return function B3(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Hc=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new gt,this.configLoader=Pe(Sh),this.environmentInjector=Pe(qr),this.urlSerializer=Pe(Aa),this.rootContexts=Pe(Ta),this.navigationId=0,this.afterPreactivation=()=>he(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new vM(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new IM(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new Er({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:_a,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Di(r=>0!==r.id),_e(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),Pr(r=>{let i=!1,a=!1;return he(r).pipe(hn(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pr(u=>{const g=n.browserUrlTree.toString(),p=!n.navigated||u.extractedUrl.toString()!==g||g!==n.currentUrlTree.toString();if(!p&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const E="";return this.events.next(new Rc(u.id,n.serializeUrl(r.rawUrl),E,0)),n.rawUrlTree=u.rawUrl,u.resolve(null),Xn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return px(u.source)&&(n.browserUrlTree=u.extractedUrl),he(u).pipe(Pr(E=>{const A=this.transitions?.getValue();return this.events.next(new uh(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),A!==this.transitions?.getValue()?Xn:Promise.resolve(E)}),function A3(e,t,n,r){return Pr(i=>function E3(e,t,n,r,i){return new D3(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(_e(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),hn(E=>{this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects},r.urlAfterRedirects=E.urlAfterRedirects}),function R3(e,t,n,r,i){return Wt(a=>function S3(e,t,n,r,i,a,u="emptyOnly"){return new _3(e,t,n,r,i,u,a).recognize().pipe(Pr(g=>null===g?function v3(e){return new at(t=>t.error(e))}(new I3):he(g)))}(e,t,n,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe(_e(u=>({...a,targetSnapshot:u}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),hn(E=>{if(r.targetSnapshot=E.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!E.extras.skipLocationChange){const v=n.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);n.setBrowserUrl(v,E)}n.browserUrlTree=E.urlAfterRedirects}const A=new xM(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(A)}));if(p&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:E,extractedUrl:A,source:v,restoredState:T,extras:N}=u,F=new uh(E,this.urlSerializer.serialize(A),v,T);this.events.next(F);const B=zw(A,this.rootComponentType).snapshot;return he(r={...u,targetSnapshot:B,urlAfterRedirects:A,extras:{...N,skipLocationChange:!1,replaceUrl:!1}})}{const E="";return this.events.next(new Rc(u.id,n.serializeUrl(r.extractedUrl),E,1)),n.rawUrlTree=u.rawUrl,u.resolve(null),Xn}}),hn(u=>{const g=new CM(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(g)}),_e(u=>r={...u,guards:XM(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function o3(e,t){return Wt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=n;return 0===u.length&&0===a.length?he({...n,guardsResult:!0}):function s3(e,t,n,r){return lt(e).pipe(Wt(i=>function f3(e,t,n,r,i){const a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return a&&0!==a.length?he(a.map(g=>{const p=Ma(t)??i,m=fs(g,p);return vi(function n3(e){return e&&Oa(e.canDeactivate)}(m)?m.canDeactivate(e,t,n,r):p.runInContext(()=>m(e,t,n,r))).pipe(Ai())})).pipe(hs()):he(!0)}(i.component,i.route,n,t,r)),Ai(i=>!0!==i,!0))}(u,r,i,e).pipe(Wt(g=>g&&function KM(e){return"boolean"==typeof e}(g)?function a3(e,t,n,r){return lt(t).pipe(io(i=>eh(function c3(e,t){return null!==e&&t&&t(new SM(e)),he(!0)}(i.route.parent,r),function l3(e,t){return null!==e&&t&&t(new bM(e)),he(!0)}(i.route,r),function d3(e,t,n){const r=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(u=>function ZM(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(u)).filter(u=>null!==u).map(u=>mw(()=>he(u.guards.map(p=>{const m=Ma(u.node)??n,E=fs(p,m);return vi(function t3(e){return e&&Oa(e.canActivateChild)}(E)?E.canActivateChild(r,e):m.runInContext(()=>E(r,e))).pipe(Ai())})).pipe(hs())));return he(a).pipe(hs())}(e,i.path,n),function u3(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return he(!0);const i=r.map(a=>mw(()=>{const u=Ma(t)??n,g=fs(a,u);return vi(function e3(e){return e&&Oa(e.canActivate)}(g)?g.canActivate(t,e):u.runInContext(()=>g(t,e))).pipe(Ai())}));return he(i).pipe(hs())}(e,i.route,n))),Ai(i=>!0!==i,!0))}(r,a,e,t):he(g)),_e(g=>({...n,guardsResult:g})))})}(this.environmentInjector,u=>this.events.next(u)),hn(u=>{if(r.guardsResult=u.guardsResult,so(u.guardsResult))throw Yw(0,u.guardsResult);const g=new EM(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(g)}),Di(u=>!!u.guardsResult||(n.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),vh(u=>{if(u.guards.canActivateChecks.length)return he(u).pipe(hn(g=>{const p=new DM(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(p)}),Pr(g=>{let p=!1;return he(g).pipe(function O3(e,t){return Wt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return he(n);let a=0;return lt(i).pipe(io(u=>function L3(e,t,n,r){const i=e.routeConfig,a=e._resolve;return void 0!==i?.title&&!fx(i)&&(a[Ea]=i.title),function P3(e,t,n,r){const i=function F3(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return he({});const a={};return lt(i).pipe(Wt(u=>function k3(e,t,n,r){const i=Ma(t)??r,a=fs(e,i);return vi(a.resolve?a.resolve(t,n):i.runInContext(()=>a(t,n)))}(e[u],t,n,r).pipe(Ai(),hn(g=>{a[u]=g}))),nh(1),function YT(e){return _e(()=>e)}(a),Ii(u=>Dh(u)?Xn:Ca(u)))}(a,e,t,r).pipe(_e(u=>(e._resolvedData=u,e.data=Gw(e,n).resolve,i&&fx(i)&&(e.data[Ea]=i.title),null)))}(u.route,r,e,t)),hn(()=>a++),nh(1),Wt(u=>a===i.length?he(n):Xn))})}(n.paramsInheritanceStrategy,this.environmentInjector),hn({next:()=>p=!0,complete:()=>{p||(n.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),hn(g=>{const p=new AM(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(p)}))}),vh(u=>{const g=p=>{const m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(hn(E=>{p.component=E}),_e(()=>{})));for(const E of p.children)m.push(...g(E));return m};return gw(g(u.targetSnapshot.root)).pipe(Ac(),os(1))}),vh(()=>this.afterPreactivation()),_e(u=>{const g=function kM(e,t,n){const r=ba(e,t._root,n?n._root:void 0);return new Hw(r,t)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return r={...u,targetRouterState:g}}),hn(u=>{n.currentUrlTree=u.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),n.routerState=u.targetRouterState,"deferred"===n.urlUpdateStrategy&&(u.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,u),n.browserUrlTree=u.urlAfterRedirects)}),((e,t,n)=>_e(r=>(new YM(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u)),os(1),hn({next:u=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new ao(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{i=!0}}),rh(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ii(u=>{if(a=!0,qw(u)){Zw(u)||(n.navigated=!0,n.restoreHistory(r,!0));const g=new Nc(r.id,this.urlSerializer.serialize(r.extractedUrl),u.message,u.cancellationCode);if(this.events.next(g),Zw(u)){const p=n.urlHandlingStrategy.merge(u.url,n.rawUrlTree),m={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||px(r.source)};n.scheduleNavigation(p,_a,null,m,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const g=new dh(r.id,this.urlSerializer.serialize(r.extractedUrl),u,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(n.errorHandler(u))}catch(p){r.reject(p)}}return Xn}))}))}cancelNavigationTransition(n,r,i){const a=new Nc(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(a),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function px(e){return e!==_a}let mx=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Ie);return r}getResolvedTitleForRoute(n){return n.data[Ea]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:function(){return Pe(U3)},providedIn:"root"}),e})(),U3=(()=>{class e extends mx{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(ue(dw))},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),j3=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:function(){return Pe(H3)},providedIn:"root"}),e})();class V3{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let H3=(()=>{class e extends V3{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=function v0(e){return cn(()=>{const t=e.prototype.constructor,n=t[Bt]||Iu(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const a=i[Bt]||Iu(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return a=>new a})}(e)))(r||e)}}(),e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const zc=new pe("",{providedIn:"root",factory:()=>({})});let G3=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:function(){return Pe(W3)},providedIn:"root"}),e})(),W3=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function $3(e){throw e}function Y3(e,t,n){return t.parse("/")}const X3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hn=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Pe(mS),this.isNgZoneEnabled=!1,this.options=Pe(zc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||$3,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Y3,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Pe(G3),this.routeReuseStrategy=Pe(j3),this.urlCreationStrategy=Pe(LM),this.titleStrategy=Pe(mx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Dw(Pe(gs,{optional:!0})??[]),this.navigationTransitions=Pe(Hc),this.urlSerializer=Pe(Aa),this.location=Pe(Tf),this.isNgZoneEnabled=Pe(Ot)instanceof Ot&&Ot.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Si,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),_a,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const a={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(a.state=p)}const g=this.parseUrl(n);this.scheduleNavigation(g,r,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Eh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:g,preserveFragment:p}=r,m=p?this.currentUrlTree.fragment:u;let E=null;switch(g){case"merge":E={...this.currentUrlTree.queryParams,...a};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=a||null}return null!==E&&(E=this.removeEmptyProps(E)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,n,E,m??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=so(n)?n:this.parseUrl(n),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,_a,null,r)}navigate(n,r={skipLocationChange:!1}){return function q3(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Y(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...X3}:!1===r?{...Z3}:r,so(n))return vw(this.currentUrlTree,n,i);const a=this.parseUrl(n);return vw(this.currentUrlTree,a,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const a=n[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(n,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let g,p,m,E;return u?(g=u.resolve,p=u.reject,m=u.promise):m=new Promise((A,v)=>{g=A,p=v}),E="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:E,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:a,resolve:g,reject:p,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(A=>Promise.reject(A))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",u)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class yx{}let J3=(()=>{class e{constructor(n,r,i,a,u){this.router=n,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Di(n=>n instanceof ao),io(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=ql(a.providers,n,`Route: ${a.path}`));const u=a._injector??n,g=a._loadedInjector??u;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(u,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(g,a.children??a._loadedRoutes))}return lt(i).pipe(di())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):he(null);const a=i.pipe(Wt(u=>null===u?he(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??n,u.routes))));return r.loadComponent&&!r._loadedComponent?lt([a,this.loader.loadComponent(r)]).pipe(di()):a})}}return e.\u0275fac=function(n){return new(n||e)(ue(Hn),ue(Xm),ue(qr),ue(yx),ue(Sh))},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Th=new pe("");let wx=(()=>{class e{constructor(n,r,i,a,u={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof uh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ao&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof jw&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jw(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function tg(){throw new Error("invalid")}()},e.\u0275prov=ge({token:e,factory:e.\u0275fac}),e})();var zn=(()=>((zn=zn||{})[zn.COMPLETE=0]="COMPLETE",zn[zn.FAILED=1]="FAILED",zn[zn.REDIRECTING=2]="REDIRECTING",zn))();const ps=!1;function _i(e,t){return{\u0275kind:e,\u0275providers:t}}const Mh=new pe("",{providedIn:"root",factory:()=>!1});function Cx(){const e=Pe(Kr);return t=>{const n=e.get(rc);if(t!==n.components[0])return;const r=e.get(Hn),i=e.get(Ex);1===e.get(Nh)&&r.initialNavigation(),e.get(Dx,null,de.Optional)?.setUpPreloading(),e.get(Th,null,de.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Ex=new pe(ps?"bootstrap done indicator":"",{factory:()=>new gt}),Nh=new pe(ps?"initial navigation":"",{providedIn:"root",factory:()=>1});function iN(){let e=[];return e=ps?[{provide:bl,multi:!0,useFactory:()=>{const t=Pe(Hn);return()=>t.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function MM(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],_i(1,e)}const Dx=new pe(ps?"router preloader":"");function oN(e){return _i(0,[{provide:Dx,useExisting:J3},{provide:yx,useExisting:e}])}const Pa=!1,Ax=new pe(Pa?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),sN=[Tf,{provide:Aa,useClass:ih},Hn,Ta,{provide:ds,useFactory:function xx(e){return e.routerState.root},deps:[Hn]},Sh,Pa?{provide:Mh,useValue:!0}:[]];function aN(){return new ny("Router",Hn)}let Ix=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[sN,Pa&&r?.enableTracing?iN().\u0275providers:[],{provide:gs,multi:!0,useValue:n},{provide:Ax,useFactory:dN,deps:[[Hn,new Hs,new zs]]},{provide:zc,useValue:r||{}},r?.useHash?{provide:ro,useClass:r_}:{provide:ro,useClass:vy},{provide:Th,useFactory:()=>{const e=Pe(vb),t=Pe(Ot),n=Pe(zc),r=Pe(Hc),i=Pe(Aa);return n.scrollOffset&&e.setOffset(n.scrollOffset),new wx(i,r,e,t,n)}},r?.preloadingStrategy?oN(r.preloadingStrategy).\u0275providers:[],{provide:ny,multi:!0,useFactory:aN},r?.initialNavigation?fN(r):[],[{provide:vx,useFactory:Cx},{provide:ty,multi:!0,useExisting:vx}]]}}static forChild(n){return{ngModule:e,providers:[{provide:gs,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(ue(Ax,8))},e.\u0275mod=dr({type:e}),e.\u0275inj=cr({imports:[xh]}),e})();function dN(e){if(Pa&&e)throw new Y(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function fN(e){return["disabled"===e.initialNavigation?_i(3,[{provide:ec,multi:!0,useFactory:()=>{const t=Pe(Hn);return()=>{t.setUpLocationChangeListener()}}},{provide:Nh,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?_i(2,[{provide:Nh,useValue:0},{provide:ec,multi:!0,deps:[Kr],useFactory:t=>{const n=t.get(t_,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(Hn),a=t.get(Ex);(function eN(e,t){e.events.pipe(Di(n=>n instanceof ao||n instanceof Nc||n instanceof dh||n instanceof Rc),_e(n=>n instanceof ao||n instanceof Rc?zn.COMPLETE:n instanceof Nc&&(0===n.code||1===n.code)?zn.REDIRECTING:zn.FAILED),Di(n=>n!==zn.REDIRECTING),os(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get(Hc).afterPreactivation=()=>(r(!0),a.closed?he(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const vx=new pe(Pa?"Router Initializer":"");var ne=(()=>{return(e=ne||(ne={}))[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",ne;var e})(),Sx=new Map([[ne.QR_CODE,"QR_CODE"],[ne.AZTEC,"AZTEC"],[ne.CODABAR,"CODABAR"],[ne.CODE_39,"CODE_39"],[ne.CODE_93,"CODE_93"],[ne.CODE_128,"CODE_128"],[ne.DATA_MATRIX,"DATA_MATRIX"],[ne.MAXICODE,"MAXICODE"],[ne.ITF,"ITF"],[ne.EAN_13,"EAN_13"],[ne.EAN_8,"EAN_8"],[ne.PDF_417,"PDF_417"],[ne.RSS_14,"RSS_14"],[ne.RSS_EXPANDED,"RSS_EXPANDED"],[ne.UPC_A,"UPC_A"],[ne.UPC_E,"UPC_E"],[ne.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function gN(e){return Object.values(ne).includes(e)}var si=(()=>{return(e=si||(si={}))[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",si;var e})(),Dr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[si.SCAN_TYPE_CAMERA,si.SCAN_TYPE_FILE],e}(),_x=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Sx.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Sx.get(t))},e}(),bx=function(){function e(){}return e.createFromText=function(t){return{decodedText:t,result:{text:t}}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Gc=(()=>{return(e=Gc||(Gc={}))[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",Gc;var e})(),Tx=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Gc.UNKWOWN_ERROR}},e}(),Mx=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||!0===n)&&console.error(t)},e.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Br(e){return typeof e>"u"||null===e}var e,ms=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),ot=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Nx=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Rx=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if("object"!=typeof t)return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(typeof t,"."),!0),!1;for(var a=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),g=0,p=Object.keys(t);g<p.length;g++){var m=p[g];if(a.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}(),Et=W(140),Ox=function(){function e(t,n,r){if(this.formatMap=new Map([[ne.QR_CODE,Et.BarcodeFormat.QR_CODE],[ne.AZTEC,Et.BarcodeFormat.AZTEC],[ne.CODABAR,Et.BarcodeFormat.CODABAR],[ne.CODE_39,Et.BarcodeFormat.CODE_39],[ne.CODE_93,Et.BarcodeFormat.CODE_93],[ne.CODE_128,Et.BarcodeFormat.CODE_128],[ne.DATA_MATRIX,Et.BarcodeFormat.DATA_MATRIX],[ne.MAXICODE,Et.BarcodeFormat.MAXICODE],[ne.ITF,Et.BarcodeFormat.ITF],[ne.EAN_13,Et.BarcodeFormat.EAN_13],[ne.EAN_8,Et.BarcodeFormat.EAN_8],[ne.PDF_417,Et.BarcodeFormat.PDF_417],[ne.RSS_14,Et.BarcodeFormat.RSS_14],[ne.RSS_EXPANDED,Et.BarcodeFormat.RSS_EXPANDED],[ne.UPC_A,Et.BarcodeFormat.UPC_A],[ne.UPC_E,Et.BarcodeFormat.UPC_E],[ne.UPC_EAN_EXTENSION,Et.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Et)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),a=new Map;a.set(Et.DecodeHintType.POSSIBLE_FORMATS,i),a.set(Et.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(a){i(a)}})},e.prototype.decode=function(t){var n=new Et.MultiFormatReader(this.verbose,this.hints),r=new Et.HTMLCanvasElementLuminanceSource(t),i=new Et.BinaryBitmap(new Et.HybridBinarizer(r)),a=n.decode(i);return{text:a.text,format:_x.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Lx=function(){function e(t,n,r){if(this.formatMap=new Map([[ne.QR_CODE,"qr_code"],[ne.AZTEC,"aztec"],[ne.CODABAR,"codabar"],[ne.CODE_39,"code_39"],[ne.CODE_93,"code_93"],[ne.CODE_128,"code_128"],[ne.DATA_MATRIX,"data_matrix"],[ne.ITF,"itf"],[ne.EAN_13,"ean_13"],[ne.EAN_8,"ean_8"],[ne.PDF_417,"pdf417"],[ne.UPC_A,"upc_a"],[ne.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&typeof new BarcodeDetector({formats:["qr_code"]})<"u"},e.prototype.decodeAsync=function(t){return function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(E){try{m(r.next(E))}catch(A){u(A)}}function p(E){try{m(r.throw(E))}catch(A){u(A)}}function m(E){E.done?a(E.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(E.value).then(g,p)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var n,r;return function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(m){return function(E){return function p(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(6===m[0]&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],i=0}finally{r=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}}(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(!(n=i.sent())||0===n.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(n)).rawValue,format:_x.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,a=t;i<a.length;i++){var u=a[i],g=u.boundingBox.width*u.boundingBox.height;g>r&&(r=g,n=u)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Px=function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(E){try{m(r.next(E))}catch(A){u(A)}}function p(E){try{m(r.throw(E))}catch(A){u(A)}}function m(E){E.done?a(E.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(E.value).then(g,p)}m((r=r.apply(e,t||[])).next())})},Fx=function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(m){return function(E){return function p(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(6===m[0]&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],i=0}finally{r=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}},wN=function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Lx.isSupported()?(this.primaryDecoder=new Lx(t,r,i),this.secondaryDecoder=new Ox(t,r,i)):this.primaryDecoder=new Ox(t,r,i)}return e.prototype.decodeAsync=function(t){return Px(this,void 0,void 0,function(){var n;return Fx(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Px(this,void 0,void 0,function(){var n,r;return Fx(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++)t+=r[n];console.log("".concat(t/this.executionResults.length," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Rh=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Wc=function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(E){try{m(r.next(E))}catch(A){u(A)}}function p(E){try{m(r.throw(E))}catch(A){u(A)}}function m(E){E.done?a(E.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(E.value).then(g,p)}m((r=r.apply(e,t||[])).next())})},$c=function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(m){return function(E){return function p(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(6===m[0]&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],i=0}finally{r=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}},kx=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(t){var n={};return n[this.name]=t,this.track.applyConstraints({advanced:[n]})},e.prototype.value=function(){var t=this.track.getSettings();return this.name in t?t[this.name]:null},e}(),xN=function(e){function t(n,r){return e.call(this,n,r)||this}return Rh(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};return r[this.name]=n,this.track.applyConstraints({advanced:[r]})},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities()[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(kx),CN=function(e){function t(n){return e.call(this,"zoom",n)||this}return Rh(t,e),t}(xN),EN=function(e){function t(n){return e.call(this,"torch",n)||this}return Rh(t,e),t}(kx),DN=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new CN(this.track)},e.prototype.torchFeature=function(){return new EN(this.track)},e}(),AN=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){t.callbacks.onRenderSurfaceReady(t.surface.clientWidth,t.surface.clientHeight),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return Wc(this,void 0,void 0,function(){var a,u;return $c(this,function(g){switch(g.label){case 0:return a=new e(t,n,i),r.aspectRatio?(u={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:g.sent(),g.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Wc(this,void 0,void 0,function(){return $c(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var a=t.mediaStream.getVideoTracks().length,u=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++u>=a&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new DN(this.getFirstTrackOrFail())},e}(),IN=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return Wc(this,void 0,void 0,function(){return $c(this,function(i){return[2,AN.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return Wc(this,void 0,void 0,function(){return $c(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[4,navigator.mediaDevices.getUserMedia({audio:!1,video:t})];case 1:return[2,new e(i.sent())]}})})},e}(),Bx=function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(E){try{m(r.next(E))}catch(A){u(A)}}function p(E){try{m(r.throw(E))}catch(A){u(A)}}function m(E){E.done?a(E.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(E.value).then(g,p)}m((r=r.apply(e,t||[])).next())})},Ux=function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(m){return function(E){return function p(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(6===m[0]&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],i=0}finally{r=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}},vN=function(){function e(){}return e.failIfNotSupported=function(){return Bx(this,void 0,void 0,function(){return Ux(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Bx(this,void 0,void 0,function(){return Ux(this,function(n){return[2,IN.create(t)]})})},e}(),bN=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=ms.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=ms.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var t=location.host.split(":")[0];return"127.0.0.1"===t||"localhost"===t},e.getCamerasFromMediaDevices=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(E){try{m(r.next(E))}catch(A){u(A)}}function p(E){try{m(r.throw(E))}catch(A){u(A)}}function m(E){E.done?a(E.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(E.value).then(g,p)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var t,n,r,i,a,u,g;return function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(m){return function(E){return function p(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(6===m[0]&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],i=0}finally{r=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}}(this,function(p){switch(p.label){case 0:return t=function(m){for(var A=0,v=m.getVideoTracks();A<v.length;A++){var T=v[A];T.enabled=!1,T.stop(),m.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=p.sent(),i=[],a=0,u=r;a<u.length;a++)"videoinput"===(g=u[a]).kind&&i.push({id:g.deviceId,label:g.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){MediaStreamTrack.getSources(function(a){for(var u=[],g=0,p=a;g<p.length;g++){var m=p[g];"video"===m.kind&&u.push({id:m.id,label:m.label})}t(u)})})},e}(),_t=(()=>(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(_t||(_t={})),_t))(),TN=function(){function e(){this.state=_t.NOT_STARTED,this.onGoingTransactionNewState=_t.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===_t.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=_t.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===_t.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=_t.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==_t.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case _t.UNKNOWN:throw"Transition from unknown is not allowed";case _t.NOT_STARTED:this.failIfNewStateIs(t,[_t.PAUSED])}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++)if(t===i[r])throw"Cannot transition from ".concat(this.state," to ").concat(t)},e}(),MN=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===_t.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==_t.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===_t.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===_t.PAUSED},e}(),NN=function(){function e(){}return e.create=function(){return new MN(new TN)},e}(),RN=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return RN(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Dr),ON=function(){function e(t,n){this.logger=n,this.fps=Gn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Gn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Rx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Br(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),jx=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");var i;this.elementId=t,this.verbose=!1,"boolean"==typeof n?this.verbose=!0===n:n&&(this.verbose=!0===(i=n).verbose),this.logger=new Mx(this.verbose),this.qrcode=new wN(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.shouldScan=!0,this.stateManagerProxy=NN.create()}return e.prototype.start=function(t,n,r,i){var u,a=this;if(!t)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";u=i||(this.verbose?this.logger.log:function(){});var g=ON.create(n,this.logger);this.clearElement();var p=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=p,E=document.getElementById(this.elementId);E.style.position="relative",this.shouldScan=!0,this.element=E;var v=this,T=this.stateManagerProxy.startTransition(_t.SCANNING);return new Promise(function(N,F){var B=m?g.videoConstraints:v.createVideoConstraints(t);if(!B)return T.cancel(),void F("videoConstraints should be defined");var G={};(!m||g.aspectRatio)&&(G.aspectRatio=g.aspectRatio);var Q={onRenderSurfaceReady:function(j,ie){v.setupUi(j,ie,g),v.isScanning=!0,v.foreverScan(g,r,u)}};vN.failIfNotSupported().then(function(j){j.create(B).then(function(ie){return ie.render(a.element,G,Q).then(function(Ne){v.renderedCamera=Ne,T.execute(),N(null)}).catch(function(Ne){T.cancel(),F(Ne)})}).catch(function(ie){T.cancel(),F(ms.errorGettingUserMedia(ie))})}).catch(function(j){T.cancel(),F(ms.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(_t.PAUSED),this.showPausedState(),(Br(t)||!0!==t)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(_t.SCANNING),t.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){n()}):n()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(_t.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),function(){if(t.element){var a=document.getElementById(Gn.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}}(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!(t&&t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Br(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var u=new Image;u.onload=function(){var g=u.width,p=u.height,m=document.getElementById(r.elementId),E=m.clientWidth?m.clientWidth:Gn.DEFAULT_WIDTH,A=Math.max(m.clientHeight?m.clientHeight:p,Gn.FILE_SCAN_MIN_HEIGHT),v=r.computeCanvasDrawConfig(g,p,E,A);if(n){var T=r.createCanvasElement(E,A,"qr-canvas-visible");T.style.display="inline-block",m.appendChild(T);var N=T.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=E,N.canvas.height=A,N.drawImage(u,0,0,g,p,v.x,v.y,v.width,v.height)}var F=Gn.FILE_SCAN_HIDDEN_CANVAS_PADDING,B=Math.max(u.width,v.width),G=Math.max(u.height,v.height),Q=B+2*F,j=G+2*F,ie=r.createCanvasElement(Q,j);m.appendChild(ie);var Ne=ie.getContext("2d");if(!Ne)throw"Unable to get 2d context from canvas";Ne.canvas.width=Q,Ne.canvas.height=j,Ne.drawImage(u,0,0,g,p,F,F,B,G);try{r.qrcode.decodeRobustlyAsync(ie).then(function(mt){i(bx.createFromQrcodeResult(mt))}).catch(a)}catch(mt){a("QR code parse error, error = ".concat(mt))}},u.onerror=a,u.onabort=a,u.onstalled=a,u.onsuspend=a,u.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return bN.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(!t)throw"videoConstaints is required argument.";if(!Rx.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){if(!t||"boolean"==typeof t||!t.formatsToSupport)return[ne.QR_CODE,ne.AZTEC,ne.CODABAR,ne.CODE_39,ne.CODE_93,ne.CODE_128,ne.DATA_MATRIX,ne.MAXICODE,ne.ITF,ne.EAN_13,ne.EAN_8,ne.PDF_417,ne.RSS_14,ne.RSS_EXPANDED,ne.UPC_A,ne.UPC_E,ne.UPC_EAN_EXTENSION];if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===t.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=t.formatsToSupport;i<a.length;i++){var u=a[i];gN(u)?r.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Br(t))return!0;if(!Br(t.useBarCodeDetectorIfSupported))return!1!==t.useBarCodeDetectorIfSupported;if(Br(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return!!Br(n.useBarCodeDetectorIfSupported)||!1!==n.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(t,n,r){var a=r.qrbox;this.validateQrboxConfig(a);var m,u=this.toQrdimensions(t,n,a),g=function(m){if(m<Gn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Gn.MIN_QR_BOX_SIZE,"px.")};g(u.width),g(u.height),u.width=((m=u.width)>t&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m)},e.prototype.validateQrboxConfig=function(t){if("number"!=typeof t&&"function"!=typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if("number"==typeof r)return{width:r,height:r};if("function"==typeof r)try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=Br(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(t,n,i);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=r.isShadedBoxEnabled()&&a.height<=n,g={x:0,y:0,width:t,height:n},p=u?this.getShadedRegionBounds(t,n,a):g,m=this.createCanvasElement(p.width,p.height),A=m.getContext("2d",{willReadFrequently:!0});A.canvas.width=p.width,A.canvas.height=p.height,this.element.append(m),u&&this.possiblyInsertShadingElement(this.element,t,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=A,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=ms.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,bx.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=ms.codeParseError(i);return n(a,Tx.createFrom(a)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),u=a.videoWidth/a.clientWidth,g=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";this.context.drawImage(a,this.qrRegion.x*u,this.qrRegion.y*g,this.qrRegion.width*u,this.qrRegion.height*g,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(T){T||!0===t.disableFlip?v():(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){v()}))}).catch(function(T){i.logger.logError("Error happend while scanning context",T),v()})}},e.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var n="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",u=function(N){if(N in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},g=Object.keys(t);if(1!==g.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var p=Object.keys(t)[0];if(p!==n&&p!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(p!==n){var A=t.deviceId;if("string"==typeof A)return{deviceId:A};if("object"==typeof A){if(a in A)return{deviceId:{exact:A["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof A)}var m=t.facingMode;if("string"==typeof m){if(u(m))return{facingMode:m}}else{if("object"!=typeof m)throw"Invalid type of 'facingMode' = ".concat(typeof m);if(!(a in m))throw"'facingMode' should be string or object with"+" ".concat(a," as key.");if(u(m["".concat(a)]))return{facingMode:{exact:m["".concat(a)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof t)},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i)return{x:(r-t)/2,y:(i-n)/2,width:t,height:n};var g=t,p=n;return t>r&&(n*=r/t,t=r),n>i&&(t*=i/n,n=i),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(p)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,i)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Gn.BORDER_SHADER_MATCH_COLOR:Gn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,a=n,u=document.createElement("canvas");return u.style.width="".concat(i,"px"),u.style.height="".concat(a,"px"),u.style.display="none",u.id=Br(r)?"qr-canvas":r,u},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var u=(n-i.width)/2,g=(r-i.height)/2;if(a.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Gn.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{this.insertShaderBorders(a,40,5,-5,null,0,!0),this.insertShaderBorders(a,40,5,-5,null,0,!1),this.insertShaderBorders(a,40,5,null,-5,0,!0),this.insertShaderBorders(a,40,5,null,-5,0,!1),this.insertShaderBorders(a,5,45,-5,null,-5,!0),this.insertShaderBorders(a,5,45,null,-5,-5,!0),this.insertShaderBorders(a,5,45,-5,null,-5,!1),this.insertShaderBorders(a,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,n,r,i,a,u,g){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Gn.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(n,"px"),p.style.height="".concat(r,"px"),null!==i&&(p.style.top="".concat(i,"px")),null!==a&&(p.style.bottom="".concat(a,"px")),g?p.style.left="".concat(u,"px"):p.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),t.appendChild(p)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Oh="data:image/svg+xml;base64,",LN=Oh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",PN=Oh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Vx=Oh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Hx=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),kN=function(){function e(){this.data=Hx.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Hx.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),BN=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Nx.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var a=document.createElement("a");a.innerText=Nx.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),UN=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Vx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Vx,this.infoIcon.style.opacity="0.6")},e}(),jN=function(){function e(){var t=this;this.infoDiv=new BN,this.infoIcon=new UN(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),zx=function(){function e(){}return e.hasPermissions=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(E){try{m(r.next(E))}catch(A){u(A)}}function p(E){try{m(r.throw(E))}catch(A){u(A)}}function m(E){E.done?a(E.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(E.value).then(g,p)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var t,n,r,i;return function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(m){return function(E){return function p(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(6===m[0]&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],i=0}finally{r=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}}(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=a.sent(),n=0,r=t;n<r.length;n++)if("videoinput"===(i=r[n]).kind&&i.label)return[2,!0];return[2,!1]}})})},e}(),bi=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++)if(e.isCameraScanType(n[t]))return!0;return!1},e.isCameraScanType=function(t){return t===si.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===si.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return Dr.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Dr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=t;r<i.length;r++){var a=i[r];if(!Dr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return t},e}(),Wn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),ai=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(Wn.ALL_ELEMENT_CLASS),"button"===t&&r.setAttribute("type","button"),r},e}(),Gx=function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(E){try{m(r.next(E))}catch(A){u(A)}}function p(E){try{m(r.throw(E))}catch(A){u(A)}}function m(E){E.done?a(E.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(E.value).then(g,p)}m((r=r.apply(e,t||[])).next())})},Wx=function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(m){return function(E){return function p(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(6===m[0]&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],i=0}finally{r=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}},$x=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Gx(this,void 0,void 0,function(){var t,n;return Wx(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?ot.torchOffButton():ot.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?ot.torchOnFailedMessage():ot.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),zN=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=ai.createElement("button",Wn.TORCH_BUTTON_ID),this.torchController=new $x(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=ot.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(a){return Gx(r,void 0,void 0,function(){return Wx(this,function(u){switch(u.label){case 0:return[4,i.torchController.flipState()];case 1:return u.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(Wn.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(Wn.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(Wn.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(Wn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new $x(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=ot.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var a=new e(n,i);return a.render(t,r),a},e}(),GN=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=ai.createElement("button",Wn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=ai.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(g){if(null!=g&&null!=g.target){var p=g.target;if(!p.files||0!==p.files.length){var E=p.files[0];a.setImageNameToButton(E.name),r(E)}}});var u=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(u),this.fileBasedScanRegion.addEventListener("dragenter",function(g){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var p=g.dataTransfer;if(p){var m=p.files;if(!m||0===m.length)return;for(var E=!1,A=0;A<m.length;++A){var v=m.item(A);if(v&&v.type.match(/image.*/)){E=!0,a.setImageNameToButton(v.name),r(v),u.innerText=ot.dragAndDropMessage();break}}E||(u.innerText=ot.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=ot.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){if(t.length>20){var r=t.substring(0,8),i=t.length,a=t.substring(i-8,i);t="".concat(r,"....").concat(a)}var u=ot.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=u},e.prototype.setInitialValueToButton=function(){var t=ot.fileSelectionChooseImage()+" - "+ot.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),WN=function(){function e(t){this.selectElement=ai.createElement("select",Wn.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(0===r)throw new Error("No cameras found");if(1===r)n.style.display="none";else{var i=ot.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var a=1,u=0,g=this.cameras;u<g.length;u++){var p=g[u],m=p.id,E=null==p.label?m:p.label;(!E||""===E)&&(E=[ot.anonymousCameraPrefix(),a++].join(" "));var A=document.createElement("option");A.value=m,A.innerText=E,this.options.push(A),this.selectElement.appendChild(A)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++)if(r[n].value===t)return!0;return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),$N=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ai.createElement("input",Wn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,i){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}(),On=(()=>(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(On||(On={})),On))(),ZN=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=!0===r,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new bi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Mx(this.verbose),this.persistedDataManager=new kN,!0!==n.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(a,u){if(t)t(a,u);else{if(r.lastMatchFound===a)return;r.lastMatchFound=a,r.setHeaderMessage(ot.lastMatch(a),On.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,u){n&&n(a,u)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new jx(this.getScanRegionId(),function XN(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}(this.config,this.verbose))},e.prototype.pause=function(t){(Br(t)||!0!==t)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){t.html5Qrcode?t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(a){t.html5Qrcode?(t.html5Qrcode.clear(),n(),r()):r()}).catch(function(a){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",a),i(a)}):(t.html5Qrcode.clear(),n(),r()):r()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Dr.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Dr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Dr.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Dr.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Dr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Dr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Dr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),bi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),a=this.getDashboardId();i.id=a,i.style.width="100%",t.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n),(new jN).renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(ot.cameraPermissionRequesting());var a=function(){r||i.createPermissionButton(t,n)};jx.getCameras().then(function(u){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),u&&u.length>0?(t.removeChild(n),i.renderCameraSelection(u)):(i.setHeaderMessage(ot.noCameraFound(),On.STATUS_WARNING),a())}).catch(function(u){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:a(),i.setHeaderMessage(u,On.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,i=ai.createElement("button",this.getCameraPermissionButtonId());i.innerText=ot.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(t,n,i)}),n.appendChild(i)},e.prototype.createPermissionsUi=function(t,n){var r=this;bi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?zx.hasPermissions().then(function(i){i?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)}):this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=bi.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=bi.isFileScanType(this.currentScanType),r=this;this.fileSelectionUi=GN.create(t,n,function(a){if(!r.html5Qrcode)throw"html5Qrcode not defined";bi.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(ot.loadingImage()),r.html5Qrcode.scanFileV2(a,!0).then(function(u){r.resetHeaderMessage(),r.qrCodeSuccessCallback(u.decodedText,u)}).catch(function(u){r.setHeaderMessage(u,On.STATUS_WARNING),r.qrCodeErrorCallback(u,Tx.createFrom(u))}))})},e.prototype.renderCameraSelection=function(t){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var a=$N.create(i,!1),g=WN.create(i,t),p=document.createElement("span"),m=ai.createElement("button",Wn.CAMERA_START_BUTTON_ID);m.innerText=ot.scanButtonStartScanningText(),p.appendChild(m);var A,E=ai.createElement("button",Wn.CAMERA_STOP_BUTTON_ID);E.innerText=ot.scanButtonStopScanningText(),E.style.display="none",E.disabled=!0,p.appendChild(E),i.appendChild(p);var T=function(F){F||(m.style.display="none"),m.innerText=ot.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,F&&(m.style.display="inline-block")};if(m.addEventListener("click",function(F){m.innerText=ot.scanButtonScanningStarting(),g.disable(),m.disabled=!0,m.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var B=g.getValue();r.persistedDataManager.setLastUsedCameraId(B),r.html5Qrcode.start(B,function YN(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(G){E.disabled=!1,E.style.display="inline-block",T(!1);var Q=r.html5Qrcode.getRunningTrackCameraCapabilities();!0===n.config.showTorchButtonIfSupported&&function(F){F.torchFeature().isSupported()?(A?A.updateTorchCapability(F.torchFeature()):A=zN.create(p,F.torchFeature(),{display:"none",marginLeft:"5px"},function(B){r.setHeaderMessage(B,On.STATUS_WARNING)}),A.show()):A&&A.hide()}(Q),!0===n.config.showZoomSliderIfSupported&&function(F){var B=F.zoomFeature();if(B.isSupported()){a.setOnCameraZoomValueChangeCallback(function(Q){B.apply(Q)});var G=1;n.config.defaultZoomValueIfSupported&&(G=n.config.defaultZoomValueIfSupported),G=function pN(e,t,n){return e>n?n:e<t?t:e}(G,B.min(),B.max()),a.setValues(B.min(),B.max(),G,B.step()),a.show()}}(Q)}).catch(function(G){r.showHideScanTypeSwapLink(!0),g.enable(),T(!0),r.setHeaderMessage(G,On.STATUS_WARNING)})}),g.hasSingleItem()&&m.click(),E.addEventListener("click",function(F){if(!r.html5Qrcode)throw"html5Qrcode not defined";E.disabled=!0,r.html5Qrcode.stop().then(function(B){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),g.enable(),m.disabled=!1,E.style.display="none",m.style.display="inline-block",A&&(A.reset(),A.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(B){E.disabled=!1,r.setHeaderMessage(B,On.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var N=r.persistedDataManager.getLastUsedCameraId();g.hasValue(N)?(g.setValue(N),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=ot.textIfCameraScanSelected(),r=ot.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var u=ai.createElement("span",this.getDashboardSectionSwapLinkId());u.style.textDecoration="underline",u.style.cursor="pointer",u.innerText=bi.isCameraScanType(this.currentScanType)?n:r,u.addEventListener("click",function(){t.sectionSwapAllowed?(t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,bi.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),u.innerText=r,t.currentScanType=si.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),u.innerText=n,t.currentScanType=si.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0):t.verbose&&t.logger.logError("Section swap called when not allowed")}),a.appendChild(u),i.appendChild(a)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;this.persistedDataManager.hasCameraPermissions()&&zx.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=On.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case On.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case On.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return n.innerHTML="<br>",void n.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=LN,this.cameraScanImage.alt=ot.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return n.innerHTML="<br>",void n.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=PN,this.fileScanImage.alt=ot.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Wn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Wn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const qN=[{path:"",component:(()=>{class e{constructor(){}ngOnDestroy(){this.html5QrcodeScanner.clear()}ngOnInit(){this.html5QrcodeScanner=new ZN("html5qr-code-full-region",{fps:10,qrbox:250,disableFlip:!0},!0),this.html5QrcodeScanner.render(this.qrCodeSuccessCallback,this.qrCodeErrorCallback)}qrCodeSuccessCallback(){}qrCodeErrorCallback(){}close(){this.html5QrcodeScanner.clear()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Io({type:e,selectors:[["app-camera"]],decls:1,vars:0,consts:[["id","html5qr-code-full-region"]],template:function(r,i){1&r&&ra(0,"div",0)}})}return e})()}];let QN=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=dr({type:e});static#n=this.\u0275inj=cr({imports:[Ix.forRoot(qN),Ix]})}return e})(),KN=(()=>{class e{constructor(){this.title="qr-app"}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Io({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&ra(0,"router-outlet")},dependencies:[wh]})}return e})(),JN=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=dr({type:e,bootstrap:[KN]});static#n=this.\u0275inj=cr({imports:[AT,QN]})}return e})();DT().bootstrapModule(JN).catch(e=>console.error(e))},140:function(Fa,ka){!function(W){"use strict";function Ze(x){return null==x}var ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,o){x.__proto__=o}||function(x,o){for(var s in o)o.hasOwnProperty(s)&&(x[s]=o[s])};var Ba=function(x){function o(s){var l=this.constructor,c=x.call(this,s)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),function xs(x,o){var s=Object.setPrototypeOf;s?s(x,o):x.__proto__=o}(c,l.prototype),function vn(x,o){void 0===o&&(o=x.constructor);var s=Error.captureStackTrace;s&&s(x,o)}(c),c}return function ws(x,o){function s(){this.constructor=x}ys(x,o),x.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}(o,x),o}(Error);let Zt=(()=>{class x extends Ba{constructor(s){super(s),this.message=s}getKind(){return this.constructor.kind}}return x.kind="Exception",x})(),gn=(()=>{class x extends Zt{}return x.kind="ArgumentException",x})(),te=(()=>{class x extends Zt{}return x.kind="IllegalArgumentException",x})();class ir{constructor(o){if(this.binarizer=o,null===o)throw new te("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,s){return this.binarizer.getBlackRow(o,s)}getBlackMatrix(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,s,l,c){const d=this.binarizer.getLuminanceSource().crop(o,s,l,c);return new ir(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new ir(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new ir(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let Rt=(()=>{class x extends Zt{static getChecksumInstance(){return new x}}return x.kind="ChecksumException",x})();class Cs{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class tt{static arraycopy(o,s,l,c,d){for(;d--;)l[c++]=o[s++]}static currentTimeMillis(){return Date.now()}}let Es=(()=>{class x extends Zt{}return x.kind="IndexOutOfBoundsException",x})(),Ua=(()=>{class x extends Es{constructor(s,l){super(l),this.index=s,this.message=l}}return x.kind="ArrayIndexOutOfBoundsException",x})();class bt{static fill(o,s){for(let l=0,c=o.length;l<c;l++)o[l]=s}static fillWithin(o,s,l,c){bt.rangeCheck(o.length,s,l);for(let d=s;d<l;d++)o[d]=c}static rangeCheck(o,s,l){if(s>l)throw new te("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new Ua(s);if(l>o)throw new Ua(l)}static asList(...o){return o}static create(o,s,l){return Array.from({length:o}).map(d=>Array.from({length:s}).fill(l))}static createInt32Array(o,s,l){return Array.from({length:o}).map(d=>Int32Array.from({length:s}).fill(l))}static equals(o,s){if(!(o&&s&&o.length&&s.length&&o.length===s.length))return!1;for(let l=0,c=o.length;l<c;l++)if(o[l]!==s[l])return!1;return!0}static hashCode(o){if(null===o)return 0;let s=1;for(const l of o)s=31*s+l;return s}static fillUint8Array(o,s){for(let l=0;l!==o.length;l++)o[l]=s}static copyOf(o,s){return o.slice(0,s)}static copyOfUint8Array(o,s){if(o.length<=s){const l=new Uint8Array(s);return l.set(o),l}return o.slice(0,s)}static copyOfRange(o,s,l){const c=l-s,d=new Int32Array(c);return tt.arraycopy(o,s,d,0,c),d}static binarySearch(o,s,l){void 0===l&&(l=bt.numberComparator);let c=0,d=o.length-1;for(;c<=d;){const f=d+c>>1,h=l(s,o[f]);if(h>0)c=f+1;else{if(!(h<0))return f;d=f-1}}return-c-1}static numberComparator(o,s){return o-s}}class Ce{static numberOfTrailingZeros(o){let s;if(0===o)return 32;let l=31;return s=o<<16,0!==s&&(l-=16,o=s),s=o<<8,0!==s&&(l-=8,o=s),s=o<<4,0!==s&&(l-=4,o=s),s=o<<2,0!==s&&(l-=2,o=s),l-(o<<1>>>31)}static numberOfLeadingZeros(o){if(0===o)return 32;let s=1;return o>>>16||(s+=16,o<<=16),o>>>24||(s+=8,o<<=8),o>>>28||(s+=4,o<<=4),o>>>30||(s+=2,o<<=2),s-=o>>>31,s}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=(o=(858993459&(o-=o>>>1&1431655765))+(o>>>2&858993459))+(o>>>4)&252645135,63&(o+=o>>>8)+(o>>>16)}static truncDivision(o,s){return Math.trunc(o/s)}static parseInt(o,s){return parseInt(o,s)}}Ce.MIN_VALUE_32_BITS=-2147483648,Ce.MAX_VALUE=Number.MAX_SAFE_INTEGER;class nt{constructor(o,s){void 0===o?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,this.bits=null==s?nt.makeArray(o):s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>32*this.bits.length){const s=nt.makeArray(o);tt.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(o){return 0!=(this.bits[Math.floor(o/32)]&1<<(31&o))}set(o){this.bits[Math.floor(o/32)]|=1<<(31&o)}flip(o){this.bits[Math.floor(o/32)]^=1<<(31&o)}getNextSet(o){const s=this.size;if(o>=s)return s;const l=this.bits;let c=Math.floor(o/32),d=l[c];d&=~((1<<(31&o))-1);const f=l.length;for(;0===d;){if(++c===f)return s;d=l[c]}const h=32*c+Ce.numberOfTrailingZeros(d);return h>s?s:h}getNextUnset(o){const s=this.size;if(o>=s)return s;const l=this.bits;let c=Math.floor(o/32),d=~l[c];d&=~((1<<(31&o))-1);const f=l.length;for(;0===d;){if(++c===f)return s;d=~l[c]}const h=32*c+Ce.numberOfTrailingZeros(d);return h>s?s:h}setBulk(o,s){this.bits[Math.floor(o/32)]=s}setRange(o,s){if(s<o||o<0||s>this.size)throw new te;if(s===o)return;s--;const l=Math.floor(o/32),c=Math.floor(s/32),d=this.bits;for(let f=l;f<=c;f++)d[f]|=(2<<(f<c?31:31&s))-(1<<(f>l?0:31&o))}clear(){const o=this.bits.length,s=this.bits;for(let l=0;l<o;l++)s[l]=0}isRange(o,s,l){if(s<o||o<0||s>this.size)throw new te;if(s===o)return!0;s--;const c=Math.floor(o/32),d=Math.floor(s/32),f=this.bits;for(let h=c;h<=d;h++){const C=(2<<(h<d?31:31&s))-(1<<(h>c?0:31&o))&4294967295;if((f[h]&C)!==(l?C:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(o,s){if(s<0||s>32)throw new te("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit(1==(o>>l-1&1))}appendBitArray(o){const s=o.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(o.get(l))}xor(o){if(this.size!==o.size)throw new te("Sizes don't match");const s=this.bits;for(let l=0,c=s.length;l<c;l++)s[l]^=o.bits[l]}toBytes(o,s,l,c){for(let d=0;d<c;d++){let f=0;for(let h=0;h<8;h++)this.get(o)&&(f|=1<<7-h),o++;s[l+d]=f}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,c=this.bits;for(let d=0;d<l;d++){let f=c[d];f=f>>1&1431655765|(1431655765&f)<<1,f=f>>2&858993459|(858993459&f)<<2,f=f>>4&252645135|(252645135&f)<<4,f=f>>8&16711935|(16711935&f)<<8,f=f>>16&65535|(65535&f)<<16,o[s-d]=f}if(this.size!==32*l){const d=32*l-this.size;let f=o[0]>>>d;for(let h=1;h<l;h++){const y=o[h];f|=y<<32-d,o[h-1]=f,f=y>>>d}o[l-1]=f}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){return o instanceof nt&&this.size===o.size&&bt.equals(this.bits,o.bits)}hashCode(){return 31*this.size+bt.hashCode(this.bits)}toString(){let o="";for(let s=0,l=this.size;s<l;s++)7&s||(o+=" "),o+=this.get(s)?"X":".";return o}clone(){return new nt(this.size,this.bits.slice())}}var lo=(()=>{return(x=lo||(lo={}))[x.OTHER=0]="OTHER",x[x.PURE_BARCODE=1]="PURE_BARCODE",x[x.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",x[x.TRY_HARDER=3]="TRY_HARDER",x[x.CHARACTER_SET=4]="CHARACTER_SET",x[x.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",x[x.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",x[x.ASSUME_GS1=7]="ASSUME_GS1",x[x.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",x[x.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",x[x.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",lo;var x})(),st=lo;let K=(()=>{class x extends Zt{static getFormatInstance(){return new x}}return x.kind="FormatException",x})();var Ue=(()=>{return(x=Ue||(Ue={}))[x.Cp437=0]="Cp437",x[x.ISO8859_1=1]="ISO8859_1",x[x.ISO8859_2=2]="ISO8859_2",x[x.ISO8859_3=3]="ISO8859_3",x[x.ISO8859_4=4]="ISO8859_4",x[x.ISO8859_5=5]="ISO8859_5",x[x.ISO8859_6=6]="ISO8859_6",x[x.ISO8859_7=7]="ISO8859_7",x[x.ISO8859_8=8]="ISO8859_8",x[x.ISO8859_9=9]="ISO8859_9",x[x.ISO8859_10=10]="ISO8859_10",x[x.ISO8859_11=11]="ISO8859_11",x[x.ISO8859_13=12]="ISO8859_13",x[x.ISO8859_14=13]="ISO8859_14",x[x.ISO8859_15=14]="ISO8859_15",x[x.ISO8859_16=15]="ISO8859_16",x[x.SJIS=16]="SJIS",x[x.Cp1250=17]="Cp1250",x[x.Cp1251=18]="Cp1251",x[x.Cp1252=19]="Cp1252",x[x.Cp1256=20]="Cp1256",x[x.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",x[x.UTF8=22]="UTF8",x[x.ASCII=23]="ASCII",x[x.Big5=24]="Big5",x[x.GB18030=25]="GB18030",x[x.EUC_KR=26]="EUC_KR",Ue;var x})();class X{constructor(o,s,l,...c){this.valueIdentifier=o,this.name=l,this.values="number"==typeof s?Int32Array.from([s]):s,this.otherEncodingNames=c,X.VALUE_IDENTIFIER_TO_ECI.set(o,this),X.NAME_TO_ECI.set(l,this);const d=this.values;for(let f=0,h=d.length;f!==h;f++)X.VALUES_TO_ECI.set(d[f],this);for(const f of c)X.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new K("incorect value");const s=X.VALUES_TO_ECI.get(o);if(void 0===s)throw new K("incorect value");return s}static getCharacterSetECIByName(o){const s=X.NAME_TO_ECI.get(o);if(void 0===s)throw new K("incorect value");return s}equals(o){if(!(o instanceof X))return!1;const s=o;return this.getName()===s.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(Ue.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(Ue.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(Ue.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(Ue.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(Ue.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(Ue.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(Ue.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(Ue.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(Ue.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(Ue.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(Ue.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(Ue.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(Ue.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(Ue.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(Ue.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(Ue.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(Ue.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(Ue.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(Ue.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(Ue.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(Ue.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(Ue.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(Ue.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(Ue.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(Ue.Big5,28,"Big5"),X.GB18030=new X(Ue.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(Ue.EUC_KR,30,"EUC_KR","EUC-KR");let or=(()=>{class x extends Zt{}return x.kind="UnsupportedOperationException",x})();class zt{static decode(o,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(o,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(o,l):new TextDecoder(l).decode(o)}static shouldDecodeOnFallback(o){return!zt.isBrowser()&&"ISO-8859-1"===o}static encode(o,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(o,l):typeof TextEncoder>"u"?this.encodeFallback(o):(new TextEncoder).encode(o)}static isBrowser(){return typeof window<"u"&&"[object Window]"==={}.toString.call(window)}static encodingName(o){return"string"==typeof o?o:o.getName()}static encodingCharacterSet(o){return o instanceof X?o:X.getCharacterSetECIByName(o)}static decodeFallback(o,s){const l=this.encodingCharacterSet(s);if(zt.isDecodeFallbackSupported(l)){let c="";for(let d=0,f=o.length;d<f;d++){let h=o[d].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(l.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new or(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(X.UTF8)||o.equals(X.ISO8859_1)||o.equals(X.ASCII)}static encodeFallback(o){const l=btoa(unescape(encodeURIComponent(o))).split(""),c=[];for(let d=0;d<l.length;d++)c.push(l[d].charCodeAt(0));return new Uint8Array(c)}}class we{static castAsNonUtf8Char(o,s=null){const l=s?s.getName():this.ISO88591;return zt.decode(new Uint8Array([o]),l)}static guessEncoding(o,s){if(null!=s&&void 0!==s.get(st.CHARACTER_SET))return s.get(st.CHARACTER_SET).toString();const l=o.length;let c=!0,d=!0,f=!0,h=0,y=0,w=0,C=0,D=0,I=0,S=0,b=0,M=0,R=0,O=0;const $=o.length>3&&239===o[0]&&187===o[1]&&191===o[2];for(let q=0;q<l&&(c||d||f);q++){const L=255&o[q];f&&(h>0?128&L?h--:f=!1:128&L&&(64&L?(h++,32&L?(h++,16&L?(h++,8&L?f=!1:C++):w++):y++):f=!1)),c&&(L>127&&L<160?c=!1:L>159&&(L<192||215===L||247===L)&&O++),d&&(D>0?L<64||127===L||L>252?d=!1:D--:128===L||160===L||L>239?d=!1:L>160&&L<224?(I++,b=0,S++,S>M&&(M=S)):L>127?(D++,S=0,b++,b>R&&(R=b)):(S=0,b=0))}return f&&h>0&&(f=!1),d&&D>0&&(d=!1),f&&($||y+w+C>0)?we.UTF8:d&&(we.ASSUME_SHIFT_JIS||M>=3||R>=3)?we.SHIFT_JIS:c&&d?2===M&&2===I||10*O>=l?we.SHIFT_JIS:we.ISO88591:c?we.ISO88591:d?we.SHIFT_JIS:f?we.UTF8:we.PLATFORM_DEFAULT_ENCODING}static format(o,...s){let l=-1;return o.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(f,h,y,w,C,D){if("%%"===f)return"%";if(void 0===s[++l])return;f=w?parseInt(w.substr(1)):void 0;let S,I=C?parseInt(C.substr(1)):void 0;switch(D){case"s":S=s[l];break;case"c":S=s[l][0];break;case"f":S=parseFloat(s[l]).toFixed(f);break;case"p":S=parseFloat(s[l]).toPrecision(f);break;case"e":S=parseFloat(s[l]).toExponential(f);break;case"x":S=parseInt(s[l]).toString(I||16);break;case"d":S=parseFloat(parseInt(s[l],I||10).toPrecision(f)).toFixed(0)}S="object"==typeof S?JSON.stringify(S):(+S).toString(I);let b=parseInt(y),M=y&&y[0]+""=="0"?"0":" ";for(;S.length<b;)S=void 0!==h?S+M:M+S;return S})}static getBytes(o,s){return zt.encode(o,s)}static getCharCode(o,s=0){return o.charCodeAt(s)}static getCharAt(o){return String.fromCharCode(o)}}we.SHIFT_JIS=X.SJIS.getName(),we.GB2312="GB2312",we.ISO88591=X.ISO8859_1.getName(),we.EUC_JP="EUC_JP",we.UTF8=X.UTF8.getName(),we.PLATFORM_DEFAULT_ENCODING=we.UTF8,we.ASSUME_SHIFT_JIS=!1;class qe{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return this.value+="string"==typeof o?o.toString():this.encoding?we.castAsNonUtf8Char(o,this.encoding):String.fromCharCode(o),this}appendChars(o,s,l){for(let c=s;s<s+l;c++)this.append(o[c]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,s){this.value=this.value.substr(0,o)+s+this.value.substr(o+1)}substring(o,s){return this.value.substring(o,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,s){this.value=this.value.substr(0,o)+s+this.value.substr(o+s.length)}}class Ft{constructor(o,s,l,c){if(this.width=o,this.height=s,this.rowSize=l,this.bits=c,null==s&&(s=o),this.height=s,o<1||s<1)throw new te("Both dimensions must be greater than 0");null==l&&(l=Math.floor((o+31)/32)),this.rowSize=l,null==c&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const s=o.length,l=o[0].length,c=new Ft(l,s);for(let d=0;d<s;d++){const f=o[d];for(let h=0;h<l;h++)f[h]&&c.set(h,d)}return c}static parseFromString(o,s,l){if(null===o)throw new te("stringRepresentation cannot be null");const c=new Array(o.length);let d=0,f=0,h=-1,y=0,w=0;for(;w<o.length;)if("\n"===o.charAt(w)||"\r"===o.charAt(w)){if(d>f){if(-1===h)h=d-f;else if(d-f!==h)throw new te("row lengths do not match");f=d,y++}w++}else if(o.substring(w,w+s.length)===s)w+=s.length,c[d]=!0,d++;else{if(o.substring(w,w+l.length)!==l)throw new te("illegal character encountered: "+o.substring(w));w+=l.length,c[d]=!1,d++}if(d>f){if(-1===h)h=d-f;else if(d-f!==h)throw new te("row lengths do not match");y++}const C=new Ft(h,y);for(let D=0;D<d;D++)c[D]&&C.set(Math.floor(D%h),Math.floor(D/h));return C}get(o,s){const l=s*this.rowSize+Math.floor(o/32);return 0!=(this.bits[l]>>>(31&o)&1)}set(o,s){const l=s*this.rowSize+Math.floor(o/32);this.bits[l]|=1<<(31&o)&4294967295}unset(o,s){const l=s*this.rowSize+Math.floor(o/32);this.bits[l]&=~(1<<(31&o)&4294967295)}flip(o,s){const l=s*this.rowSize+Math.floor(o/32);this.bits[l]^=1<<(31&o)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new te("input matrix dimensions do not match");const s=new nt(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let d=0,f=this.height;d<f;d++){const h=d*l,y=o.getRow(d,s).getBitArray();for(let w=0;w<l;w++)c[h+w]^=y[w]}}clear(){const o=this.bits,s=o.length;for(let l=0;l<s;l++)o[l]=0}setRegion(o,s,l,c){if(s<0||o<0)throw new te("Left and top must be nonnegative");if(c<1||l<1)throw new te("Height and width must be at least 1");const d=o+l,f=s+c;if(f>this.height||d>this.width)throw new te("The region must fit inside the matrix");const h=this.rowSize,y=this.bits;for(let w=s;w<f;w++){const C=w*h;for(let D=o;D<d;D++)y[C+Math.floor(D/32)]|=1<<(31&D)&4294967295}}getRow(o,s){null==s||s.getSize()<this.width?s=new nt(this.width):s.clear();const l=this.rowSize,c=this.bits,d=o*l;for(let f=0;f<l;f++)s.setBulk(32*f,c[d+f]);return s}setRow(o,s){tt.arraycopy(s.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),s=this.getHeight();let l=new nt(o),c=new nt(o);for(let d=0,f=Math.floor((s+1)/2);d<f;d++)l=this.getRow(d,l),c=this.getRow(s-1-d,c),l.reverse(),c.reverse(),this.setRow(d,c),this.setRow(s-1-d,l)}getEnclosingRectangle(){const s=this.height,l=this.rowSize,c=this.bits;let d=this.width,f=s,h=-1,y=-1;for(let w=0;w<s;w++)for(let C=0;C<l;C++){const D=c[w*l+C];if(0!==D){if(w<f&&(f=w),w>y&&(y=w),32*C<d){let I=0;for(;!(D<<31-I&4294967295);)I++;32*C+I<d&&(d=32*C+I)}if(32*C+31>h){let I=31;for(;!(D>>>I);)I--;32*C+I>h&&(h=32*C+I)}}}return h<d||y<f?null:Int32Array.from([d,f,h-d+1,y-f+1])}getTopLeftOnBit(){const o=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&0===s[l];)l++;if(l===s.length)return null;const c=l/o;let d=l%o*32;const f=s[l];let h=0;for(;!(f<<31-h&4294967295);)h++;return d+=h,Int32Array.from([d,c])}getBottomRightOnBit(){const o=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&0===s[l];)l--;if(l<0)return null;const c=Math.floor(l/o);let d=32*Math.floor(l%o);const f=s[l];let h=31;for(;!(f>>>h);)h--;return d+=h,Int32Array.from([d,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){return o instanceof Ft&&this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&bt.equals(this.bits,o.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+bt.hashCode(this.bits),o}toString(o="X ",s="  ",l="\n"){return this.buildToString(o,s,l)}buildToString(o,s,l){let c=new qe;for(let d=0,f=this.height;d<f;d++){for(let h=0,y=this.width;h<y;h++)c.append(this.get(h,d)?o:s);c.append(l)}return c.toString()}clone(){return new Ft(this.width,this.height,this.rowSize,this.bits.slice())}}let U=(()=>{class x extends Zt{static getNotFoundInstance(){return new x}}return x.kind="NotFoundException",x})();class ft extends Cs{constructor(o){super(o),this.luminances=ft.EMPTY,this.buckets=new Int32Array(ft.LUMINANCE_BUCKETS)}getBlackRow(o,s){const l=this.getLuminanceSource(),c=l.getWidth();null==s||s.getSize()<c?s=new nt(c):s.clear(),this.initArrays(c);const d=l.getRow(o,this.luminances),f=this.buckets;for(let y=0;y<c;y++)f[(255&d[y])>>ft.LUMINANCE_SHIFT]++;const h=ft.estimateBlackPoint(f);if(c<3)for(let y=0;y<c;y++)(255&d[y])<h&&s.set(y);else{let y=255&d[0],w=255&d[1];for(let C=1;C<c-1;C++){const D=255&d[C+1];(4*w-y-D)/2<h&&s.set(C),y=w,w=D}}return s}getBlackMatrix(){const o=this.getLuminanceSource(),s=o.getWidth(),l=o.getHeight(),c=new Ft(s,l);this.initArrays(s);const d=this.buckets;for(let y=1;y<5;y++){const w=Math.floor(l*y/5),C=o.getRow(w,this.luminances),D=Math.floor(4*s/5);for(let I=Math.floor(s/5);I<D;I++)d[(255&C[I])>>ft.LUMINANCE_SHIFT]++}const f=ft.estimateBlackPoint(d),h=o.getMatrix();for(let y=0;y<l;y++){const w=y*s;for(let C=0;C<s;C++)(255&h[w+C])<f&&c.set(C,y)}return c}createBinarizer(o){return new ft(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const s=this.buckets;for(let l=0;l<ft.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(o){const s=o.length;let l=0,c=0,d=0;for(let C=0;C<s;C++)o[C]>d&&(c=C,d=o[C]),o[C]>l&&(l=o[C]);let f=0,h=0;for(let C=0;C<s;C++){const D=C-c,I=o[C]*D*D;I>h&&(f=C,h=I)}if(c>f){const C=c;c=f,f=C}if(f-c<=s/16)throw new U;let y=f-1,w=-1;for(let C=f-1;C>c;C--){const D=C-c,I=D*D*(f-C)*(l-o[C]);I>w&&(y=C,w=I)}return y<<ft.LUMINANCE_SHIFT}}ft.LUMINANCE_BITS=5,ft.LUMINANCE_SHIFT=8-ft.LUMINANCE_BITS,ft.LUMINANCE_BUCKETS=1<<ft.LUMINANCE_BITS,ft.EMPTY=Uint8ClampedArray.from([0]);class ve extends ft{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const o=this.getLuminanceSource(),s=o.getWidth(),l=o.getHeight();if(s>=ve.MINIMUM_DIMENSION&&l>=ve.MINIMUM_DIMENSION){const c=o.getMatrix();let d=s>>ve.BLOCK_SIZE_POWER;s&ve.BLOCK_SIZE_MASK&&d++;let f=l>>ve.BLOCK_SIZE_POWER;l&ve.BLOCK_SIZE_MASK&&f++;const h=ve.calculateBlackPoints(c,d,f,s,l),y=new Ft(s,l);ve.calculateThresholdForBlock(c,d,f,s,l,h,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new ve(o)}static calculateThresholdForBlock(o,s,l,c,d,f,h){const y=d-ve.BLOCK_SIZE,w=c-ve.BLOCK_SIZE;for(let C=0;C<l;C++){let D=C<<ve.BLOCK_SIZE_POWER;D>y&&(D=y);const I=ve.cap(C,2,l-3);for(let S=0;S<s;S++){let b=S<<ve.BLOCK_SIZE_POWER;b>w&&(b=w);const M=ve.cap(S,2,s-3);let R=0;for(let $=-2;$<=2;$++){const q=f[I+$];R+=q[M-2]+q[M-1]+q[M]+q[M+1]+q[M+2]}ve.thresholdBlock(o,b,D,R/25,c,h)}}}static cap(o,s,l){return o<s?s:o>l?l:o}static thresholdBlock(o,s,l,c,d,f){for(let h=0,y=l*d+s;h<ve.BLOCK_SIZE;h++,y+=d)for(let w=0;w<ve.BLOCK_SIZE;w++)(255&o[y+w])<=c&&f.set(s+w,l+h)}static calculateBlackPoints(o,s,l,c,d){const f=d-ve.BLOCK_SIZE,h=c-ve.BLOCK_SIZE,y=new Array(l);for(let w=0;w<l;w++){y[w]=new Int32Array(s);let C=w<<ve.BLOCK_SIZE_POWER;C>f&&(C=f);for(let D=0;D<s;D++){let I=D<<ve.BLOCK_SIZE_POWER;I>h&&(I=h);let S=0,b=255,M=0;for(let O=0,$=C*c+I;O<ve.BLOCK_SIZE;O++,$+=c){for(let q=0;q<ve.BLOCK_SIZE;q++){const L=255&o[$+q];S+=L,L<b&&(b=L),L>M&&(M=L)}if(M-b>ve.MIN_DYNAMIC_RANGE)for(O++,$+=c;O<ve.BLOCK_SIZE;O++,$+=c)for(let q=0;q<ve.BLOCK_SIZE;q++)S+=255&o[$+q]}let R=S>>2*ve.BLOCK_SIZE_POWER;if(M-b<=ve.MIN_DYNAMIC_RANGE&&(R=b/2,w>0&&D>0)){const O=(y[w-1][D]+2*y[w][D-1]+y[w-1][D-1])/4;b<O&&(R=O)}y[w][D]=R}}return y}}ve.BLOCK_SIZE_POWER=3,ve.BLOCK_SIZE=1<<ve.BLOCK_SIZE_POWER,ve.BLOCK_SIZE_MASK=ve.BLOCK_SIZE-1,ve.MINIMUM_DIMENSION=5*ve.BLOCK_SIZE,ve.MIN_DYNAMIC_RANGE=24;class li{constructor(o,s){this.width=o,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,s,l,c){throw new or("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new or("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new or("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let s=new qe;for(let l=0;l<this.height;l++){const c=this.getRow(l,o);for(let d=0;d<this.width;d++){const f=255&c[d];let h;h=f<64?"#":f<128?"+":f<192?".":" ",s.append(h)}s.append("\n")}return s.toString()}}class at extends li{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,s){const l=this.delegate.getRow(o,s),c=this.getWidth();for(let d=0;d<c;d++)l[d]=255-(255&l[d]);return l}getMatrix(){const o=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let c=0;c<s;c++)l[c]=255-(255&o[c]);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(o,s,l,c){return new at(this.delegate.crop(o,s,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new at(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new at(this.delegate.rotateCounterClockwise45())}}class sr extends li{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=sr.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const s=o.getContext("2d").getImageData(0,0,o.width,o.height);return sr.toGrayscaleBuffer(s.data,o.width,o.height)}static toGrayscaleBuffer(o,s,l){const c=new Uint8ClampedArray(s*l);for(let d=0,f=0,h=o.length;d<h;d+=4,f++){let y;y=0===o[d+3]?255:306*o[d]+601*o[d+1]+117*o[d+2]+512>>10,c[f]=y}return c}getRow(o,s){if(o<0||o>=this.getHeight())throw new te("Requested row is outside the image: "+o);const l=this.getWidth(),c=o*l;return null===s?s=this.buffer.slice(c,c+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(c,c+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,s,l,c){return super.crop(o,s,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const s=this.getTempCanvasElement(),l=s.getContext("2d"),c=o*sr.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*d+Math.abs(Math.sin(c))*f),y=Math.ceil(Math.abs(Math.sin(c))*d+Math.abs(Math.cos(c))*f);return s.width=h,s.height=y,l.translate(h/2,y/2),l.rotate(c),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=sr.makeBufferFromCanvasImageData(s),this}invert(){return new at(this)}}sr.DEGREE_TO_RADIANS=Math.PI/180;class ja{constructor(o,s,l){this.deviceId=o,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var tn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(x,o,s,l){return new(s||(s=Promise))(function(d,f){function h(C){try{w(l.next(C))}catch(D){f(D)}}function y(C){try{w(l.throw(C))}catch(D){f(D)}}function w(C){C.done?d(C.value):function c(d){return d instanceof s?d:new s(function(f){f(d)})}(C.value).then(h,y)}w((l=l.apply(x,o||[])).next())})};class Ur{constructor(o,s=500,l){this.reader=o,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return tn(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of o){const c="video"===l.kind?"videoinput":l.kind;"videoinput"===c&&s.push({deviceId:l.deviceId||l.id,label:l.label||`Video device ${s.length+1}`,kind:c,groupId:l.groupId})}return s})}getVideoInputDevices(){return tn(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new ja(s.deviceId,s.label))})}findDeviceById(o){return tn(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===o):null})}decodeFromInputVideoDevice(o,s){return tn(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,s)})}decodeOnceFromVideoDevice(o,s){return tn(this,void 0,void 0,function*(){let l;this.reset(),l=o?{deviceId:{exact:o}}:{facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(o,s){return tn(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(o,s){return tn(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(o,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(o,s,l){return tn(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,s,l)})}decodeFromVideoDevice(o,s,l){return tn(this,void 0,void 0,function*(){let c;c=o?{deviceId:{exact:o}}:{facingMode:"environment"};const d={video:c};return yield this.decodeFromConstraints(d,s,l)})}decodeFromConstraints(o,s,l){return tn(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(c,s,l)})}decodeFromStream(o,s,l){return tn(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(o,s);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,s){return tn(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,o),this.videoElement=l,this.stream=o,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(o){return new Promise((s,l)=>this.playVideoOnLoad(o,()=>s()))}playVideoOnLoad(o,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",s),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return tn(this,void 0,void 0,function*(){if(this.isVideoPlaying(o))console.warn("Trying to play video that is already playing.");else try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,s){const l=document.getElementById(o);if(!l)throw new gn(`element with id '${o}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new gn(`element with id '${o}' must be an ${s} element`);return l}decodeFromImage(o,s){if(!o&&!s)throw new gn("either imageElement with a src set or an url must be provided");return s&&!o?this.decodeFromImageUrl(s):this.decodeFromImageElement(o)}decodeFromVideo(o,s){if(!o&&!s)throw new gn("Either an element with a src set or an URL must be provided");return s&&!o?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,s,l){if(void 0===o&&void 0===s)throw new gn("Either an element with a src set or an URL must be provided");return s&&!o?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(o,l)}decodeFromImageElement(o){if(!o)throw new gn("An image element must be provided.");this.reset();const s=this.prepareImageElement(o);let l;return this.imageElement=s,l=this.isImageLoaded(s)?this.decodeOnce(s,!1,!0):this._decodeOnLoadImage(s),l}decodeFromVideoElement(o){const s=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(o,s){const l=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(o){if(!o)throw new gn("A video element must be provided.");this.reset();const s=this.prepareVideoElement(o);return this.videoElement=s,s}decodeFromImageUrl(o){if(!o)throw new gn("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=o,l}decodeFromVideoUrl(o){if(!o)throw new gn("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=o,l}decodeFromVideoUrlContinuously(o,s){if(!o)throw new gn("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,s);return l.src=o,c}_decodeOnLoadImage(o){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(s,l),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return tn(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,s){return tn(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,s)})}isImageLoaded(o){return!(!o.complete||0===o.naturalWidth)}prepareImageElement(o){let s;return typeof o>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),"string"==typeof o&&(s=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(s=o),s}prepareVideoElement(o){let s;return!o&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),"string"==typeof o&&(s=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(s=o),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(o,s=!0,l=!0){this._stopAsyncDecode=!1;const c=(d,f)=>{if(this._stopAsyncDecode)return f(new U("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{d(this.decode(o))}catch(h){if(s&&h instanceof U||(h instanceof Rt||h instanceof K)&&l)return setTimeout(c,this._timeBetweenDecodingAttempts,d,f);f(h)}};return new Promise((d,f)=>c(d,f))}decodeContinuously(o,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const c=this.decode(o);s(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){s(null,c),(c instanceof Rt||c instanceof K||c instanceof U)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(o){const s=this.createBinaryBitmap(o);return this.decodeBitmap(s)}_isHTMLVideoElement(o){return 0!==o.videoWidth}drawFrameOnCanvas(o,s,l){s||(s={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(o,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(o,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(o,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const l=this.getCaptureCanvas(o),c=new sr(l),d=new ve(c);return new ir(d)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const s=this.createCaptureCanvas(o);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,c;return typeof o<"u"&&(o instanceof HTMLVideoElement?(l=o.videoWidth,c=o.videoHeight):o instanceof HTMLImageElement&&(l=o.naturalWidth||o.width,c=o.naturalHeight||o.height)),s.style.width=l+"px",s.style.height=c+"px",s.width=l,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,s){try{o.srcObject=s}catch{o.src=URL.createObjectURL(s)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class gt{constructor(o,s,l=(null==s?0:8*s.length),c,d,f=tt.currentTimeMillis()){this.text=o,this.rawBytes=s,this.numBits=l,this.resultPoints=c,this.format=d,this.timestamp=f,this.text=o,this.rawBytes=s,this.numBits=null==l?null==s?0:8*s.length:l,this.resultPoints=c,this.format=d,this.resultMetadata=null,this.timestamp=null==f?tt.currentTimeMillis():f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,s){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(o,s)}putAllMetadata(o){null!==o&&(this.resultMetadata=null===this.resultMetadata?o:new Map(o))}addResultPoints(o){const s=this.resultPoints;if(null===s)this.resultPoints=o;else if(null!==o&&o.length>0){const l=new Array(s.length+o.length);tt.arraycopy(s,0,l,0,s.length),tt.arraycopy(o,0,l,s.length,o.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ti=(()=>{return(x=Ti||(Ti={}))[x.AZTEC=0]="AZTEC",x[x.CODABAR=1]="CODABAR",x[x.CODE_39=2]="CODE_39",x[x.CODE_93=3]="CODE_93",x[x.CODE_128=4]="CODE_128",x[x.DATA_MATRIX=5]="DATA_MATRIX",x[x.EAN_8=6]="EAN_8",x[x.EAN_13=7]="EAN_13",x[x.ITF=8]="ITF",x[x.MAXICODE=9]="MAXICODE",x[x.PDF_417=10]="PDF_417",x[x.QR_CODE=11]="QR_CODE",x[x.RSS_14=12]="RSS_14",x[x.RSS_EXPANDED=13]="RSS_EXPANDED",x[x.UPC_A=14]="UPC_A",x[x.UPC_E=15]="UPC_E",x[x.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",Ti;var x})(),ae=Ti,Dt=(()=>{return(x=Dt||(Dt={}))[x.OTHER=0]="OTHER",x[x.ORIENTATION=1]="ORIENTATION",x[x.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",x[x.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",x[x.ISSUE_NUMBER=4]="ISSUE_NUMBER",x[x.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",x[x.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",x[x.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",x[x.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",x[x.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",x[x.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",Dt;var x})(),Oe=Dt;class Mi{constructor(o,s,l,c,d=-1,f=-1){this.rawBytes=o,this.text=s,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=null==o?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class _e{exp(o){return this.expTable[o]}log(o){if(0===o)throw new te;return this.logTable[o]}static addOrSubtract(o,s){return o^s}}class qt{constructor(o,s){if(0===s.length)throw new te;this.field=o;const l=s.length;if(l>1&&0===s[0]){let c=1;for(;c<l&&0===s[c];)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),tt.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(0===o)return this.getCoefficient(0);const s=this.coefficients;let l;if(1===o){l=0;for(let f=0,h=s.length;f!==h;f++)l=_e.addOrSubtract(l,s[f]);return l}l=s[0];const c=s.length,d=this.field;for(let f=1;f<c;f++)l=_e.addOrSubtract(d.multiply(o,l),s[f]);return l}addOrSubtract(o){if(!this.field.equals(o.field))throw new te("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let s=this.coefficients,l=o.coefficients;if(s.length>l.length){const f=s;s=l,l=f}let c=new Int32Array(l.length);const d=l.length-s.length;tt.arraycopy(l,0,c,0,d);for(let f=d;f<l.length;f++)c[f]=_e.addOrSubtract(s[f-d],l[f]);return new qt(this.field,c)}multiply(o){if(!this.field.equals(o.field))throw new te("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,c=o.coefficients,d=c.length,f=new Int32Array(l+d-1),h=this.field;for(let y=0;y<l;y++){const w=s[y];for(let C=0;C<d;C++)f[y+C]=_e.addOrSubtract(f[y+C],h.multiply(w,c[C]))}return new qt(h,f)}multiplyScalar(o){if(0===o)return this.field.getZero();if(1===o)return this;const s=this.coefficients.length,l=this.field,c=new Int32Array(s),d=this.coefficients;for(let f=0;f<s;f++)c[f]=l.multiply(d[f],o);return new qt(l,c)}multiplyByMonomial(o,s){if(o<0)throw new te;if(0===s)return this.field.getZero();const l=this.coefficients,c=l.length,d=new Int32Array(c+o),f=this.field;for(let h=0;h<c;h++)d[h]=f.multiply(l[h],s);return new qt(f,d)}divide(o){if(!this.field.equals(o.field))throw new te("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new te("Divide by 0");const s=this.field;let l=s.getZero(),c=this;const d=o.getCoefficient(o.getDegree()),f=s.inverse(d);for(;c.getDegree()>=o.getDegree()&&!c.isZero();){const h=c.getDegree()-o.getDegree(),y=s.multiply(c.getCoefficient(c.getDegree()),f),w=o.multiplyByMonomial(h,y),C=s.buildMonomial(h,y);l=l.addOrSubtract(C),c=c.addOrSubtract(w)}return[l,c]}toString(){let o="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(0!==l){if(l<0?(o+=" - ",l=-l):o.length>0&&(o+=" + "),0===s||1!==l){const c=this.field.log(l);0===c?o+="1":1===c?o+="a":(o+="a^",o+=c)}0!==s&&(1===s?o+="x":(o+="x^",o+=s))}}return o}}let Ds=(()=>{class x extends Zt{}return x.kind="ArithmeticException",x})();class Be extends _e{constructor(o,s,l){super(),this.primitive=o,this.size=s,this.generatorBase=l;const c=new Int32Array(s);let d=1;for(let h=0;h<s;h++)c[h]=d,d*=2,d>=s&&(d^=o,d&=s-1);this.expTable=c;const f=new Int32Array(s);for(let h=0;h<s-1;h++)f[c[h]]=h;this.logTable=f,this.zero=new qt(this,Int32Array.from([0])),this.one=new qt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,s){if(o<0)throw new te;if(0===s)return this.zero;const l=new Int32Array(o+1);return l[0]=s,new qt(this,l)}inverse(o){if(0===o)throw new Ds;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,s){return 0===o||0===s?0:this.expTable[(this.logTable[o]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Ce.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Be.AZTEC_DATA_12=new Be(4201,4096,1),Be.AZTEC_DATA_10=new Be(1033,1024,1),Be.AZTEC_DATA_6=new Be(67,64,1),Be.AZTEC_PARAM=new Be(19,16,1),Be.QR_CODE_FIELD_256=new Be(285,256,0),Be.DATA_MATRIX_FIELD_256=new Be(301,256,1),Be.AZTEC_DATA_8=Be.DATA_MATRIX_FIELD_256,Be.MAXICODE_FIELD_64=Be.AZTEC_DATA_6;let Ni=(()=>{class x extends Zt{}return x.kind="ReedSolomonException",x})(),ar=(()=>{class x extends Zt{}return x.kind="IllegalStateException",x})();class Ri{constructor(o){this.field=o}decode(o,s){const l=this.field,c=new qt(l,o),d=new Int32Array(s);let f=!0;for(let S=0;S<s;S++){const b=c.evaluateAt(l.exp(S+l.getGeneratorBase()));d[d.length-1-S]=b,0!==b&&(f=!1)}if(f)return;const h=new qt(l,d),y=this.runEuclideanAlgorithm(l.buildMonomial(s,1),h,s),C=y[1],D=this.findErrorLocations(y[0]),I=this.findErrorMagnitudes(C,D);for(let S=0;S<D.length;S++){const b=o.length-1-l.log(D[S]);if(b<0)throw new Ni("Bad error location");o[b]=Be.addOrSubtract(o[b],I[S])}}runEuclideanAlgorithm(o,s,l){if(o.getDegree()<s.getDegree()){const S=o;o=s,s=S}const c=this.field;let d=o,f=s,h=c.getZero(),y=c.getOne();for(;f.getDegree()>=(l/2|0);){let S=d,b=h;if(d=f,h=y,d.isZero())throw new Ni("r_{i-1} was zero");f=S;let M=c.getZero();const R=d.getCoefficient(d.getDegree()),O=c.inverse(R);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){const $=f.getDegree()-d.getDegree(),q=c.multiply(f.getCoefficient(f.getDegree()),O);M=M.addOrSubtract(c.buildMonomial($,q)),f=f.addOrSubtract(d.multiplyByMonomial($,q))}if(y=M.multiply(h).addOrSubtract(b),f.getDegree()>=d.getDegree())throw new ar("Division algorithm failed to reduce polynomial?")}const w=y.getCoefficient(0);if(0===w)throw new Ni("sigmaTilde(0) was zero");const C=c.inverse(w);return[y.multiplyScalar(C),f.multiplyScalar(C)]}findErrorLocations(o){const s=o.getDegree();if(1===s)return Int32Array.from([o.getCoefficient(1)]);const l=new Int32Array(s);let c=0;const d=this.field;for(let f=1;f<d.getSize()&&c<s;f++)0===o.evaluateAt(f)&&(l[c]=d.inverse(f),c++);if(c!==s)throw new Ni("Error locator degree does not match number of roots");return l}findErrorMagnitudes(o,s){const l=s.length,c=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){const h=d.inverse(s[f]);let y=1;for(let w=0;w<l;w++)if(f!==w){const C=d.multiply(s[w],h);y=d.multiply(y,1&C?-2&C:1|C)}c[f]=d.multiply(o.evaluateAt(h),d.inverse(y)),0!==d.getGeneratorBase()&&(c[f]=d.multiply(c[f],h))}return c}}var Gt=(()=>{return(x=Gt||(Gt={}))[x.UPPER=0]="UPPER",x[x.LOWER=1]="LOWER",x[x.MIXED=2]="MIXED",x[x.DIGIT=3]="DIGIT",x[x.PUNCT=4]="PUNCT",x[x.BINARY=5]="BINARY",Gt;var x})();let Va=(()=>{class x{decode(s){this.ddata=s;let l=s.getBits(),c=this.extractBits(l),d=this.correctBits(c),f=x.convertBoolArrayToByteArray(d),h=x.getEncodedData(d),y=new Mi(f,h,null,null);return y.setNumBits(d.length),y}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let l=s.length,c=Gt.UPPER,d=Gt.UPPER,f="",h=0;for(;h<l;)if(d===Gt.BINARY){if(l-h<5)break;let y=x.readCode(s,h,5);if(h+=5,0===y){if(l-h<11)break;y=x.readCode(s,h,11)+31,h+=11}for(let w=0;w<y;w++){if(l-h<8){h=l;break}const C=x.readCode(s,h,8);f+=we.castAsNonUtf8Char(C),h+=8}d=c}else{let y=d===Gt.DIGIT?4:5;if(l-h<y)break;let w=x.readCode(s,h,y);h+=y;let C=x.getCharacter(d,w);C.startsWith("CTRL_")?(c=d,d=x.getTable(C.charAt(5)),"L"===C.charAt(6)&&(c=d)):(f+=C,d=c)}return f}static getTable(s){switch(s){case"L":return Gt.LOWER;case"P":return Gt.PUNCT;case"M":return Gt.MIXED;case"D":return Gt.DIGIT;case"B":return Gt.BINARY;default:return Gt.UPPER}}static getCharacter(s,l){switch(s){case Gt.UPPER:return x.UPPER_TABLE[l];case Gt.LOWER:return x.LOWER_TABLE[l];case Gt.MIXED:return x.MIXED_TABLE[l];case Gt.PUNCT:return x.PUNCT_TABLE[l];case Gt.DIGIT:return x.DIGIT_TABLE[l];default:throw new ar("Bad table")}}correctBits(s){let l,c;this.ddata.getNbLayers()<=2?(c=6,l=Be.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,l=Be.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,l=Be.AZTEC_DATA_10):(c=12,l=Be.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=s.length/c;if(f<d)throw new K;let h=s.length%c,y=new Int32Array(f);for(let S=0;S<f;S++,h+=c)y[S]=x.readCode(s,h,c);try{new Ri(l).decode(y,f-d)}catch(S){throw new K(S)}let w=(1<<c)-1,C=0;for(let S=0;S<d;S++){let b=y[S];if(0===b||b===w)throw new K;(1===b||b===w-1)&&C++}let D=new Array(d*c-C),I=0;for(let S=0;S<d;S++){let b=y[S];if(1===b||b===w-1)D.fill(b>1,I,I+c-1),I+=c-1;else for(let M=c-1;M>=0;--M)D[I++]=0!=(b&1<<M)}return D}extractBits(s){let l=this.ddata.isCompact(),c=this.ddata.getNbLayers(),d=(l?11:14)+4*c,f=new Int32Array(d),h=new Array(this.totalBitsInLayer(c,l));if(l)for(let y=0;y<f.length;y++)f[y]=y;else{let y=d+1+2*Ce.truncDivision(Ce.truncDivision(d,2)-1,15),w=d/2,C=Ce.truncDivision(y,2);for(let D=0;D<w;D++){let I=D+Ce.truncDivision(D,15);f[w-D-1]=C-I-1,f[w+D]=C+I+1}}for(let y=0,w=0;y<c;y++){let C=4*(c-y)+(l?9:12),D=2*y,I=d-1-D;for(let S=0;S<C;S++){let b=2*S;for(let M=0;M<2;M++)h[w+b+M]=s.get(f[D+M],f[D+S]),h[w+2*C+b+M]=s.get(f[D+S],f[I-M]),h[w+4*C+b+M]=s.get(f[I-M],f[I-S]),h[w+6*C+b+M]=s.get(f[I-S],f[D+M])}w+=8*C}return h}static readCode(s,l,c){let d=0;for(let f=l;f<l+c;f++)d<<=1,s[f]&&(d|=1);return d}static readByte(s,l){let c=s.length-l;return c>=8?x.readCode(s,l,8):x.readCode(s,l,c)<<8-c}static convertBoolArrayToByteArray(s){let l=new Uint8Array((s.length+7)/8);for(let c=0;c<l.length;c++)l[c]=x.readByte(s,8*c);return l}totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}return x.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],x.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],x.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],x.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],x.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],x})();class je{constructor(){}static round(o){return NaN===o?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,s,l,c){const d=o-l,f=s-c;return Math.sqrt(d*d+f*f)}static sum(o){let s=0;for(let l=0,c=o.length;l!==c;l++)s+=o[l];return s}}class As{static floatToIntBits(o){return o}}As.MAX_VALUE=Number.MAX_SAFE_INTEGER;class re{constructor(o,s){this.x=o,this.y=s}getX(){return this.x}getY(){return this.y}equals(o){return o instanceof re&&this.x===o.x&&this.y===o.y}hashCode(){return 31*As.floatToIntBits(this.x)+As.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const s=this.distance(o[0],o[1]),l=this.distance(o[1],o[2]),c=this.distance(o[0],o[2]);let d,f,h;if(l>=s&&l>=c?(f=o[0],d=o[1],h=o[2]):c>=l&&c>=s?(f=o[1],d=o[0],h=o[2]):(f=o[2],d=o[0],h=o[1]),this.crossProductZ(d,f,h)<0){const y=d;d=h,h=y}o[0]=d,o[1]=f,o[2]=h}static distance(o,s){return je.distance(o.x,o.y,s.x,s.y)}static crossProductZ(o,s,l){const c=s.x,d=s.y;return(l.x-c)*(o.y-d)-(l.y-d)*(o.x-c)}}class Oi{constructor(o,s){this.bits=o,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ha extends Oi{constructor(o,s,l,c,d){super(o,s),this.compact=l,this.nbDatablocks=c,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let ci=(()=>{class x{constructor(s,l,c,d){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),null==l&&(l=x.INIT_SIZE),null==c&&(c=s.getWidth()/2|0),null==d&&(d=s.getHeight()/2|0);const f=l/2|0;if(this.leftInit=c-f,this.rightInit=c+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}detect(){let s=this.leftInit,l=this.rightInit,c=this.upInit,d=this.downInit,f=!1,h=!0,y=!1,w=!1,C=!1,D=!1,I=!1;const S=this.width,b=this.height;for(;h;){h=!1;let M=!0;for(;(M||!w)&&l<S;)M=this.containsBlackPoint(c,d,l,!1),M?(l++,h=!0,w=!0):w||l++;if(l>=S){f=!0;break}let R=!0;for(;(R||!C)&&d<b;)R=this.containsBlackPoint(s,l,d,!0),R?(d++,h=!0,C=!0):C||d++;if(d>=b){f=!0;break}let O=!0;for(;(O||!D)&&s>=0;)O=this.containsBlackPoint(c,d,s,!1),O?(s--,h=!0,D=!0):D||s--;if(s<0){f=!0;break}let $=!0;for(;($||!I)&&c>=0;)$=this.containsBlackPoint(s,l,c,!0),$?(c--,h=!0,I=!0):I||c--;if(c<0){f=!0;break}h&&(y=!0)}if(!f&&y){const M=l-s;let R=null;for(let L=1;null===R&&L<M;L++)R=this.getBlackPointOnSegment(s,d-L,s+L,d);if(null==R)throw new U;let O=null;for(let L=1;null===O&&L<M;L++)O=this.getBlackPointOnSegment(s,c+L,s+L,c);if(null==O)throw new U;let $=null;for(let L=1;null===$&&L<M;L++)$=this.getBlackPointOnSegment(l,c+L,l-L,c);if(null==$)throw new U;let q=null;for(let L=1;null===q&&L<M;L++)q=this.getBlackPointOnSegment(l,d-L,l-L,d);if(null==q)throw new U;return this.centerEdges(q,R,$,O)}throw new U}getBlackPointOnSegment(s,l,c,d){const f=je.round(je.distance(s,l,c,d)),h=(c-s)/f,y=(d-l)/f,w=this.image;for(let C=0;C<f;C++){const D=je.round(s+C*h),I=je.round(l+C*y);if(w.get(D,I))return new re(D,I)}return null}centerEdges(s,l,c,d){const f=s.getX(),h=s.getY(),y=l.getX(),w=l.getY(),C=c.getX(),D=c.getY(),I=d.getX(),S=d.getY(),b=x.CORR;return f<this.width/2?[new re(I-b,S+b),new re(y+b,w+b),new re(C-b,D-b),new re(f+b,h-b)]:[new re(I+b,S+b),new re(y+b,w-b),new re(C-b,D+b),new re(f-b,h-b)]}containsBlackPoint(s,l,c,d){const f=this.image;if(d){for(let h=s;h<=l;h++)if(f.get(h,c))return!0}else for(let h=s;h<=l;h++)if(f.get(c,h))return!0;return!1}}return x.INIT_SIZE=10,x.CORR=1,x})();class Is{static checkAndNudgePoints(o,s){const l=o.getWidth(),c=o.getHeight();let d=!0;for(let f=0;f<s.length&&d;f+=2){const h=Math.floor(s[f]),y=Math.floor(s[f+1]);if(h<-1||h>l||y<-1||y>c)throw new U;d=!1,-1===h?(s[f]=0,d=!0):h===l&&(s[f]=l-1,d=!0),-1===y?(s[f+1]=0,d=!0):y===c&&(s[f+1]=c-1,d=!0)}d=!0;for(let f=s.length-2;f>=0&&d;f-=2){const h=Math.floor(s[f]),y=Math.floor(s[f+1]);if(h<-1||h>l||y<-1||y>c)throw new U;d=!1,-1===h?(s[f]=0,d=!0):h===l&&(s[f]=l-1,d=!0),-1===y?(s[f+1]=0,d=!0):y===c&&(s[f+1]=c-1,d=!0)}}}class pn{constructor(o,s,l,c,d,f,h,y,w){this.a11=o,this.a21=s,this.a31=l,this.a12=c,this.a22=d,this.a32=f,this.a13=h,this.a23=y,this.a33=w}static quadrilateralToQuadrilateral(o,s,l,c,d,f,h,y,w,C,D,I,S,b,M,R){const O=pn.quadrilateralToSquare(o,s,l,c,d,f,h,y);return pn.squareToQuadrilateral(w,C,D,I,S,b,M,R).times(O)}transformPoints(o){const s=o.length,l=this.a11,c=this.a12,d=this.a13,f=this.a21,h=this.a22,y=this.a23,w=this.a31,C=this.a32,D=this.a33;for(let I=0;I<s;I+=2){const S=o[I],b=o[I+1],M=d*S+y*b+D;o[I]=(l*S+f*b+w)/M,o[I+1]=(c*S+h*b+C)/M}}transformPointsWithValues(o,s){const l=this.a11,c=this.a12,d=this.a13,f=this.a21,h=this.a22,y=this.a23,w=this.a31,C=this.a32,D=this.a33,I=o.length;for(let S=0;S<I;S++){const b=o[S],M=s[S],R=d*b+y*M+D;o[S]=(l*b+f*M+w)/R,s[S]=(c*b+h*M+C)/R}}static squareToQuadrilateral(o,s,l,c,d,f,h,y){const w=o-l+d-h,C=s-c+f-y;if(0===w&&0===C)return new pn(l-o,d-l,o,c-s,f-c,s,0,0,1);{const D=l-d,I=h-d,S=c-f,b=y-f,M=D*b-I*S,R=(w*b-I*C)/M,O=(D*C-w*S)/M;return new pn(l-o+R*l,h-o+O*h,o,c-s+R*c,y-s+O*y,s,R,O,1)}}static quadrilateralToSquare(o,s,l,c,d,f,h,y){return pn.squareToQuadrilateral(o,s,l,c,d,f,h,y).buildAdjoint()}buildAdjoint(){return new pn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new pn(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class vs extends Is{sampleGrid(o,s,l,c,d,f,h,y,w,C,D,I,S,b,M,R,O,$,q){const L=pn.quadrilateralToQuadrilateral(c,d,f,h,y,w,C,D,I,S,b,M,R,O,$,q);return this.sampleGridWithTransform(o,s,l,L)}sampleGridWithTransform(o,s,l,c){if(s<=0||l<=0)throw new U;const d=new Ft(s,l),f=new Float32Array(2*s);for(let h=0;h<l;h++){const y=f.length,w=h+.5;for(let C=0;C<y;C+=2)f[C]=C/2+.5,f[C+1]=w;c.transformPoints(f),Is.checkAndNudgePoints(o,f);try{for(let C=0;C<y;C+=2)o.get(Math.floor(f[C]),Math.floor(f[C+1]))&&d.set(C/2,h)}catch{throw new U}}return d}}class Ar{static setGridSampler(o){Ar.gridSampler=o}static getInstance(){return Ar.gridSampler}}Ar.gridSampler=new vs;class nn{constructor(o,s){this.x=o,this.y=s}toResultPoint(){return new re(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class za{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(o){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Ha(c,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!(this.isValidPoint(o[0])&&this.isValidPoint(o[1])&&this.isValidPoint(o[2])&&this.isValidPoint(o[3])))throw new U;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(o[0],o[1],s),this.sampleLine(o[1],o[2],s),this.sampleLine(o[2],o[3],s),this.sampleLine(o[3],o[0],s)]);this.shift=this.getRotation(l,s);let c=0;for(let f=0;f<4;f++){let h=l[(this.shift+f)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let d=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=1+(d>>6),this.nbDataBlocks=1+(63&d)):(this.nbLayers=1+(d>>11),this.nbDataBlocks=1+(2047&d))}getRotation(o,s){let l=0;o.forEach((c,d,f)=>{l=(c>>s-2<<1)+(1&c)+(l<<3)}),l=((1&l)<<11)+(l>>1);for(let c=0;c<4;c++)if(Ce.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new U}getCorrectedParameterData(o,s){let l,c;s?(l=7,c=2):(l=10,c=4);let d=l-c,f=new Int32Array(l);for(let y=l-1;y>=0;--y)f[y]=15&o,o>>=4;try{new Ri(Be.AZTEC_PARAM).decode(f,d)}catch{throw new U}let h=0;for(let y=0;y<c;y++)h=(h<<4)+f[y];return h}getBullsEyeCorners(o){let s=o,l=o,c=o,d=o,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(s,f,1,-1),I=this.getFirstDifferent(l,f,1,1),S=this.getFirstDifferent(c,f,-1,1),b=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(b,D)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(D,I,S,b))break}s=D,l=I,c=S,d=b,f=!f}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new U;this.compact=5===this.nbCenterLayers;let h=new re(s.getX()+.5,s.getY()-.5),y=new re(l.getX()+.5,l.getY()+.5),w=new re(c.getX()-.5,c.getY()+.5),C=new re(d.getX()-.5,d.getY()-.5);return this.expandSquare([h,y,w,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,s,l,c;try{let h=new ci(this.image).detect();o=h[0],s=h[1],l=h[2],c=h[3]}catch{let y=this.image.getWidth()/2,w=this.image.getHeight()/2;o=this.getFirstDifferent(new nn(y+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new nn(y+7,w+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new nn(y-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new nn(y-7,w-7),!1,-1,-1).toResultPoint()}let d=je.round((o.getX()+c.getX()+s.getX()+l.getX())/4),f=je.round((o.getY()+c.getY()+s.getY()+l.getY())/4);try{let h=new ci(this.image,15,d,f).detect();o=h[0],s=h[1],l=h[2],c=h[3]}catch{o=this.getFirstDifferent(new nn(d+7,f-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new nn(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new nn(d-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new nn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=je.round((o.getX()+c.getX()+s.getX()+l.getX())/4),f=je.round((o.getY()+c.getY()+s.getY()+l.getY())/4),new nn(d,f)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,s,l,c,d){let f=Ar.getInstance(),h=this.getDimension(),y=h/2-this.nbCenterLayers,w=h/2+this.nbCenterLayers;return f.sampleGrid(o,h,h,y,y,w,y,w,w,y,w,s.getX(),s.getY(),l.getX(),l.getY(),c.getX(),c.getY(),d.getX(),d.getY())}sampleLine(o,s,l){let c=0,d=this.distanceResultPoint(o,s),f=d/l,h=o.getX(),y=o.getY(),w=f*(s.getX()-o.getX())/d,C=f*(s.getY()-o.getY())/d;for(let D=0;D<l;D++)this.image.get(je.round(h+D*w),je.round(y+D*C))&&(c|=1<<l-D-1);return c}isWhiteOrBlackRectangle(o,s,l,c){o=new nn(o.getX()-3,o.getY()+3),s=new nn(s.getX()-3,s.getY()-3),l=new nn(l.getX()+3,l.getY()-3),c=new nn(c.getX()+3,c.getY()+3);let f=this.getColor(c,o);if(0===f)return!1;let h=this.getColor(o,s);return h===f&&(h=this.getColor(s,l),h===f)&&(h=this.getColor(l,c),h===f)}getColor(o,s){let l=this.distancePoint(o,s),c=(s.getX()-o.getX())/l,d=(s.getY()-o.getY())/l,f=0,h=o.getX(),y=o.getY(),w=this.image.get(o.getX(),o.getY()),C=Math.ceil(l);for(let I=0;I<C;I++)h+=c,y+=d,this.image.get(je.round(h),je.round(y))!==w&&f++;let D=f/l;return D>.1&&D<.9?0:D<=.1===w?1:-1}getFirstDifferent(o,s,l,c){let d=o.getX()+l,f=o.getY()+c;for(;this.isValid(d,f)&&this.image.get(d,f)===s;)d+=l,f+=c;for(d-=l,f-=c;this.isValid(d,f)&&this.image.get(d,f)===s;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===s;)f+=c;return f-=c,new nn(d,f)}expandSquare(o,s,l){let c=l/(2*s),d=o[0].getX()-o[2].getX(),f=o[0].getY()-o[2].getY(),h=(o[0].getX()+o[2].getX())/2,y=(o[0].getY()+o[2].getY())/2,w=new re(h+c*d,y+c*f),C=new re(h-c*d,y-c*f);return d=o[1].getX()-o[3].getX(),f=o[1].getY()-o[3].getY(),h=(o[1].getX()+o[3].getX())/2,y=(o[1].getY()+o[3].getY())/2,[w,new re(h+c*d,y+c*f),C,new re(h-c*d,y-c*f)]}isValid(o,s){return o>=0&&o<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(o){let s=je.round(o.getX()),l=je.round(o.getY());return this.isValid(s,l)}distancePoint(o,s){return je.distance(o.getX(),o.getY(),s.getX(),s.getY())}distanceResultPoint(o,s){return je.distance(o.getX(),o.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ce.truncDivision(this.nbLayers-4,8)+1)+15}}class Ln{decode(o,s=null){let l=null,c=new za(o.getBlackMatrix()),d=null,f=null;try{let C=c.detectMirror(!1);d=C.getPoints(),this.reportFoundResultPoints(s,d),f=(new Va).decode(C)}catch(C){l=C}if(null==f)try{let C=c.detectMirror(!0);d=C.getPoints(),this.reportFoundResultPoints(s,d),f=(new Va).decode(C)}catch(C){throw l??C}let h=new gt(f.getText(),f.getRawBytes(),f.getNumBits(),d,ae.AZTEC,tt.currentTimeMillis()),y=f.getByteSegments();null!=y&&h.putMetadata(Oe.BYTE_SEGMENTS,y);let w=f.getECLevel();return null!=w&&h.putMetadata(Oe.ERROR_CORRECTION_LEVEL,w),h}reportFoundResultPoints(o,s){if(null!=o){let l=o.get(st.NEED_RESULT_POINT_CALLBACK);null!=l&&s.forEach((c,d,f)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class Tt{decode(o,s){try{return this.doDecode(o,s)}catch{if(s&&!0===s.get(st.TRY_HARDER)&&o.isRotateSupported()){const d=o.rotateCounterClockwise(),f=this.doDecode(d,s),h=f.getResultMetadata();let y=270;null!==h&&!0===h.get(Oe.ORIENTATION)&&(y+=h.get(Oe.ORIENTATION)%360),f.putMetadata(Oe.ORIENTATION,y);const w=f.getResultPoints();if(null!==w){const C=d.getHeight();for(let D=0;D<w.length;D++)w[D]=new re(C-w[D].getY()-1,w[D].getX())}return f}throw new U}}reset(){}doDecode(o,s){const l=o.getWidth(),c=o.getHeight();let d=new nt(l);const f=s&&!0===s.get(st.TRY_HARDER),h=Math.max(1,c>>(f?8:5));let y;y=f?c:15;const w=Math.trunc(c/2);for(let C=0;C<y;C++){const D=Math.trunc((C+1)/2),S=w+h*(0==(1&C)?D:-D);if(S<0||S>=c)break;try{d=o.getBlackRow(S,d)}catch{continue}for(let b=0;b<2;b++){if(1===b&&(d.reverse(),s&&!0===s.get(st.NEED_RESULT_POINT_CALLBACK))){const M=new Map;s.forEach((R,O)=>M.set(O,R)),M.delete(st.NEED_RESULT_POINT_CALLBACK),s=M}try{const M=this.decodeRow(S,d,s);if(1===b){M.putMetadata(Oe.ORIENTATION,180);const R=M.getResultPoints();null!==R&&(R[0]=new re(l-R[0].getX()-1,R[0].getY()),R[1]=new re(l-R[1].getX()-1,R[1].getY()))}return M}catch{}}}throw new U}static recordPattern(o,s,l){const c=l.length;for(let w=0;w<c;w++)l[w]=0;const d=o.getSize();if(s>=d)throw new U;let f=!o.get(s),h=0,y=s;for(;y<d;){if(o.get(y)!==f)l[h]++;else{if(++h===c)break;l[h]=1,f=!f}y++}if(h!==c&&(h!==c-1||y!==d))throw new U}static recordPatternInReverse(o,s,l){let c=l.length,d=o.get(s);for(;s>0&&c>=0;)o.get(--s)!==d&&(c--,d=!d);if(c>=0)throw new U;Tt.recordPattern(o,s+1,l)}static patternMatchVariance(o,s,l){const c=o.length;let d=0,f=0;for(let w=0;w<c;w++)d+=o[w],f+=s[w];if(d<f)return Number.POSITIVE_INFINITY;const h=d/f;l*=h;let y=0;for(let w=0;w<c;w++){const C=o[w],D=s[w]*h,I=C>D?C-D:D-C;if(I>l)return Number.POSITIVE_INFINITY;y+=I}return y/d}}class Z extends Tt{static findStartPattern(o){const s=o.getSize(),l=o.getNextSet(0);let c=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,h=!1;for(let w=l;w<s;w++)if(o.get(w)!==h)d[c]++;else{if(5===c){let C=Z.MAX_AVG_VARIANCE,D=-1;for(let I=Z.CODE_START_A;I<=Z.CODE_START_C;I++){const S=Tt.patternMatchVariance(d,Z.CODE_PATTERNS[I],Z.MAX_INDIVIDUAL_VARIANCE);S<C&&(C=S,D=I)}if(D>=0&&o.isRange(Math.max(0,f-(w-f)/2),f,!1))return Int32Array.from([f,w,D]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[c-1]=0,d[c]=0,c--}else c++;d[c]=1,h=!h}throw new U}static decodeCode(o,s,l){Tt.recordPattern(o,l,s);let c=Z.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<Z.CODE_PATTERNS.length;f++){const y=this.patternMatchVariance(s,Z.CODE_PATTERNS[f],Z.MAX_INDIVIDUAL_VARIANCE);y<c&&(c=y,d=f)}if(d>=0)return d;throw new U}decodeRow(o,s,l){const c=l&&!0===l.get(st.ASSUME_GS1),d=Z.findStartPattern(s),f=d[2];let h=0;const y=new Uint8Array(20);let w;switch(y[h++]=f,f){case Z.CODE_START_A:w=Z.CODE_CODE_A;break;case Z.CODE_START_B:w=Z.CODE_CODE_B;break;case Z.CODE_START_C:w=Z.CODE_CODE_C;break;default:throw new K}let C=!1,D=!1,I="",S=d[0],b=d[1];const M=Int32Array.from([0,0,0,0,0,0]);let R=0,O=0,$=f,q=0,L=!0,Se=!1,xe=!1;for(;!C;){const $r=D;switch(D=!1,R=O,O=Z.decodeCode(s,M,b),y[h++]=O,O!==Z.CODE_STOP&&(L=!0),O!==Z.CODE_STOP&&(q++,$+=q*O),S=b,b+=M.reduce((dt,Vh)=>dt+Vh,0),O){case Z.CODE_START_A:case Z.CODE_START_B:case Z.CODE_START_C:throw new K}switch(w){case Z.CODE_CODE_A:if(O<64)I+=String.fromCharCode(xe===Se?" ".charCodeAt(0)+O:" ".charCodeAt(0)+O+128),xe=!1;else if(O<96)I+=String.fromCharCode(xe===Se?O-64:O+64),xe=!1;else switch(O!==Z.CODE_STOP&&(L=!1),O){case Z.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_A:!Se&&xe?(Se=!0,xe=!1):Se&&xe?(Se=!1,xe=!1):xe=!0;break;case Z.CODE_SHIFT:D=!0,w=Z.CODE_CODE_B;break;case Z.CODE_CODE_B:w=Z.CODE_CODE_B;break;case Z.CODE_CODE_C:w=Z.CODE_CODE_C;break;case Z.CODE_STOP:C=!0}break;case Z.CODE_CODE_B:if(O<96)I+=String.fromCharCode(xe===Se?" ".charCodeAt(0)+O:" ".charCodeAt(0)+O+128),xe=!1;else switch(O!==Z.CODE_STOP&&(L=!1),O){case Z.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_B:!Se&&xe?(Se=!0,xe=!1):Se&&xe?(Se=!1,xe=!1):xe=!0;break;case Z.CODE_SHIFT:D=!0,w=Z.CODE_CODE_A;break;case Z.CODE_CODE_A:w=Z.CODE_CODE_A;break;case Z.CODE_CODE_C:w=Z.CODE_CODE_C;break;case Z.CODE_STOP:C=!0}break;case Z.CODE_CODE_C:if(O<100)O<10&&(I+="0"),I+=O;else switch(O!==Z.CODE_STOP&&(L=!1),O){case Z.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Z.CODE_CODE_A:w=Z.CODE_CODE_A;break;case Z.CODE_CODE_B:w=Z.CODE_CODE_B;break;case Z.CODE_STOP:C=!0}}$r&&(w=w===Z.CODE_CODE_A?Z.CODE_CODE_B:Z.CODE_CODE_A)}const rn=b-S;if(b=s.getNextUnset(b),!s.isRange(b,Math.min(s.getSize(),b+(b-S)/2),!1))throw new U;if($-=q*R,$%103!==R)throw new Rt;const en=I.length;if(0===en)throw new U;en>0&&L&&(I=I.substring(0,w===Z.CODE_CODE_C?en-2:en-1));const Je=(d[1]+d[0])/2,Xe=S+rn/2,xt=y.length,Ct=new Uint8Array(xt);for(let $r=0;$r<xt;$r++)Ct[$r]=y[$r];const Qn=[new re(Je,o),new re(Xe,o)];return new gt(I,Ct,0,Qn,ae.CODE_128,(new Date).getTime())}}Z.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Z.MAX_AVG_VARIANCE=.25,Z.MAX_INDIVIDUAL_VARIANCE=.7,Z.CODE_SHIFT=98,Z.CODE_CODE_C=99,Z.CODE_CODE_B=100,Z.CODE_CODE_A=101,Z.CODE_FNC_1=102,Z.CODE_FNC_2=97,Z.CODE_FNC_3=96,Z.CODE_FNC_4_A=101,Z.CODE_FNC_4_B=100,Z.CODE_START_A=103,Z.CODE_START_B=104,Z.CODE_START_C=105,Z.CODE_STOP=106;let Ss=(()=>{class x extends Tt{constructor(s=!1,l=!1){super(),this.usingCheckDigit=s,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,l,c){let d=this.counters;d.fill(0),this.decodeRowResult="";let w,C,f=x.findAsteriskPattern(l,d),h=l.getNextSet(f[1]),y=l.getSize();do{x.recordPattern(l,h,d);let R=x.toNarrowWidePattern(d);if(R<0)throw new U;w=x.patternToChar(R),this.decodeRowResult+=w,C=h;for(let O of d)h+=O;h=l.getNextSet(h)}while("*"!==w);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S,D=0;for(let R of d)D+=R;if(h!==y&&2*(h-C-D)<D)throw new U;if(this.usingCheckDigit){let R=this.decodeRowResult.length-1,O=0;for(let $=0;$<R;$++)O+=x.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt($));if(this.decodeRowResult.charAt(R)!==x.ALPHABET_STRING.charAt(O%43))throw new Rt;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(0===this.decodeRowResult.length)throw new U;S=this.extendedMode?x.decodeExtended(this.decodeRowResult):this.decodeRowResult;let M=C+D/2;return new gt(S,null,0,[new re((f[1]+f[0])/2,s),new re(M,s)],ae.CODE_39,(new Date).getTime())}static findAsteriskPattern(s,l){let c=s.getSize(),d=s.getNextSet(0),f=0,h=d,y=!1,w=l.length;for(let C=d;C<c;C++)if(s.get(C)!==y)l[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(l)===x.ASTERISK_ENCODING&&s.isRange(Math.max(0,h-Math.floor((C-h)/2)),h,!1))return[h,C];h+=l[0]+l[1],l.copyWithin(0,2,2+f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,y=!y}throw new U}static toNarrowWidePattern(s){let d,l=s.length,c=0;do{let f=2147483647;for(let w of s)w<f&&w>c&&(f=w);c=f,d=0;let h=0,y=0;for(let w=0;w<l;w++){let C=s[w];C>c&&(y|=1<<l-1-w,d++,h+=C)}if(3===d){for(let w=0;w<l&&d>0;w++){let C=s[w];if(C>c&&(d--,2*C>=h))return-1}return y}}while(d>3);return-1}static patternToChar(s){for(let l=0;l<x.CHARACTER_ENCODINGS.length;l++)if(x.CHARACTER_ENCODINGS[l]===s)return x.ALPHABET_STRING.charAt(l);if(s===x.ASTERISK_ENCODING)return"*";throw new U}static decodeExtended(s){let l=s.length,c="";for(let d=0;d<l;d++){let f=s.charAt(d);if("+"===f||"$"===f||"%"===f||"/"===f){let h=s.charAt(d+1),y="\0";switch(f){case"+":if(!(h>="A"&&h<="Z"))throw new K;y=String.fromCharCode(h.charCodeAt(0)+32);break;case"$":if(!(h>="A"&&h<="Z"))throw new K;y=String.fromCharCode(h.charCodeAt(0)-64);break;case"%":if(h>="A"&&h<="E")y=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")y=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")y=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")y=String.fromCharCode(h.charCodeAt(0)+43);else if("U"===h)y="\0";else if("V"===h)y="@";else if("W"===h)y="`";else{if("X"!==h&&"Y"!==h&&"Z"!==h)throw new K;y="\x7f"}break;case"/":if(h>="A"&&h<="O")y=String.fromCharCode(h.charCodeAt(0)-32);else{if("Z"!==h)throw new K;y=":"}}c+=y,d++}else c+=f}return c}}return x.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",x.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],x.ASTERISK_ENCODING=148,x})();class rt extends Tt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,s,l){let c=this.decodeStart(s),d=this.decodeEnd(s),f=new qe;rt.decodeMiddle(s,c[1],d[0],f);let h=f.toString(),y=null;null!=l&&(y=l.get(st.ALLOWED_LENGTHS)),null==y&&(y=rt.DEFAULT_ALLOWED_LENGTHS);let w=h.length,C=!1,D=0;for(let b of y){if(w===b){C=!0;break}b>D&&(D=b)}if(!C&&w>D&&(C=!0),!C)throw new K;const I=[new re(c[1],o),new re(d[0],o)];return new gt(h,null,0,I,ae.ITF,(new Date).getTime())}static decodeMiddle(o,s,l,c){let d=new Int32Array(10),f=new Int32Array(5),h=new Int32Array(5);for(d.fill(0),f.fill(0),h.fill(0);s<l;){Tt.recordPattern(o,s,d);for(let w=0;w<5;w++){let C=2*w;f[w]=d[C],h[w]=d[C+1]}let y=rt.decodeDigit(f);c.append(y.toString()),y=this.decodeDigit(h),c.append(y.toString()),d.forEach(function(w){s+=w})}}decodeStart(o){let s=rt.skipWhiteSpace(o),l=rt.findGuardPattern(o,s,rt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(o,l[0]),l}validateQuietZone(o,s){let l=10*this.narrowLineWidth;l=l<s?l:s;for(let c=s-1;l>0&&c>=0&&!o.get(c);c--)l--;if(0!==l)throw new U}static skipWhiteSpace(o){const s=o.getSize(),l=o.getNextSet(0);if(l===s)throw new U;return l}decodeEnd(o){o.reverse();try{let l,s=rt.skipWhiteSpace(o);try{l=rt.findGuardPattern(o,s,rt.END_PATTERN_REVERSED[0])}catch(d){d instanceof U&&(l=rt.findGuardPattern(o,s,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,l[0]);let c=l[0];return l[0]=o.getSize()-l[1],l[1]=o.getSize()-c,l}finally{o.reverse()}}static findGuardPattern(o,s,l){let c=l.length,d=new Int32Array(c),f=o.getSize(),h=!1,y=0,w=s;d.fill(0);for(let C=s;C<f;C++)if(o.get(C)!==h)d[y]++;else{if(y===c-1){if(Tt.patternMatchVariance(d,l,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[w,C];w+=d[0]+d[1],tt.arraycopy(d,2,d,0,y-1),d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,h=!h}throw new U}static decodeDigit(o){let s=rt.MAX_AVG_VARIANCE,l=-1,c=rt.PATTERNS.length;for(let d=0;d<c;d++){let h=Tt.patternMatchVariance(o,rt.PATTERNS[d],rt.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,l=d):h===s&&(l=-1)}if(l>=0)return l%10;throw new U}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class yt extends Tt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let l,s=!1,c=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),l=yt.findGuardPattern(o,c,!1,this.START_END_PATTERN,d);let f=l[0];c=l[1];let h=f-(c-f);h>=0&&(s=o.isRange(h,f,!1))}return l}static checkChecksum(o){return yt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let s=o.length;if(0===s)return!1;let l=parseInt(o.charAt(s-1),10);return yt.getStandardUPCEANChecksum(o.substring(0,s-1))===l}static getStandardUPCEANChecksum(o){let s=o.length,l=0;for(let c=s-1;c>=0;c-=2){let d=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(d<0||d>9)throw new K;l+=d}l*=3;for(let c=s-2;c>=0;c-=2){let d=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(d<0||d>9)throw new K;l+=d}return(1e3-l)%10}static decodeEnd(o,s){return yt.findGuardPattern(o,s,!1,yt.START_END_PATTERN,new Int32Array(yt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,s,l,c){return this.findGuardPattern(o,s,l,c,new Int32Array(c.length))}static findGuardPattern(o,s,l,c,d){let f=o.getSize(),h=0,y=s=l?o.getNextUnset(s):o.getNextSet(s),w=c.length,C=l;for(let D=s;D<f;D++)if(o.get(D)!==C)d[h]++;else{if(h===w-1){if(Tt.patternMatchVariance(d,c,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return Int32Array.from([y,D]);y+=d[0]+d[1];let I=d.slice(2,d.length-1);for(let S=0;S<h-1;S++)d[S]=I[S];d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,C=!C}throw new U}static decodeDigit(o,s,l,c){this.recordPattern(o,l,s);let d=this.MAX_AVG_VARIANCE,f=-1,h=c.length;for(let y=0;y<h;y++){let C=Tt.patternMatchVariance(s,c[y],yt.MAX_INDIVIDUAL_VARIANCE);C<d&&(d=C,f=y)}if(f>=0)return f;throw new U}}yt.MAX_AVG_VARIANCE=.48,yt.MAX_INDIVIDUAL_VARIANCE=.7,yt.START_END_PATTERN=Int32Array.from([1,1,1]),yt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),yt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),yt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Li{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,s,l){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,c),f=c.toString(),h=Li.parseExtensionString(f),y=[new re((l[0]+l[1])/2,o),new re(d,o)],w=new gt(f,null,0,y,ae.UPC_EAN_EXTENSION,(new Date).getTime());return null!=h&&w.putAllMetadata(h),w}decodeMiddle(o,s,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=o.getSize(),f=s[1],h=0;for(let w=0;w<5&&f<d;w++){let C=yt.decodeDigit(o,c,f,yt.L_AND_G_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let D of c)f+=D;C>=10&&(h|=1<<4-w),4!==w&&(f=o.getNextSet(f),f=o.getNextUnset(f))}if(5!==l.length)throw new U;let y=this.determineCheckDigit(h);if(Li.extensionChecksum(l.toString())!==y)throw new U;return f}static extensionChecksum(o){let s=o.length,l=0;for(let c=s-2;c>=0;c-=2)l+=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);l*=3;for(let c=s-1;c>=0;c-=2)l+=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);return l*=3,l%10}determineCheckDigit(o){for(let s=0;s<10;s++)if(o===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new U}static parseExtensionString(o){if(5!==o.length)return null;let s=Li.parseExtension5String(o);return null==s?null:new Map([[Oe.SUGGESTED_PRICE,s]])}static parseExtension5String(o){let s;switch(o.charAt(0)){case"0":s="\xa3";break;case"5":s="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s=""}let l=parseInt(o.substring(1)),d=l%100;return s+(l/100).toString()+"."+(d<10?"0"+d:d.toString())}}class _s{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,s,l){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,c),f=c.toString(),h=_s.parseExtensionString(f),y=[new re((l[0]+l[1])/2,o),new re(d,o)],w=new gt(f,null,0,y,ae.UPC_EAN_EXTENSION,(new Date).getTime());return null!=h&&w.putAllMetadata(h),w}decodeMiddle(o,s,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=o.getSize(),f=s[1],h=0;for(let y=0;y<2&&f<d;y++){let w=yt.decodeDigit(o,c,f,yt.L_AND_G_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+w%10);for(let C of c)f+=C;w>=10&&(h|=1<<1-y),1!==y&&(f=o.getNextSet(f),f=o.getNextUnset(f))}if(2!==l.length)throw new U;if(parseInt(l.toString())%4!==h)throw new U;return f}static parseExtensionString(o){return 2!==o.length?null:new Map([[Oe.ISSUE_NUMBER,parseInt(o)]])}}class Wa{static decodeRow(o,s,l){let c=yt.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Li).decodeRow(o,s,c)}catch{return(new _s).decodeRow(o,s,c)}}}Wa.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ze extends yt{constructor(){super(),this.decodeRowStringBuffer="",ze.L_AND_G_PATTERNS=ze.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let s=ze.L_PATTERNS[o-10],l=new Int32Array(s.length);for(let c=0;c<s.length;c++)l[c]=s[s.length-c-1];ze.L_AND_G_PATTERNS[o]=l}}decodeRow(o,s,l){let c=ze.findStartGuardPattern(s),d=null==l?null:l.get(st.NEED_RESULT_POINT_CALLBACK);if(null!=d){const L=new re((c[0]+c[1])/2,o);d.foundPossibleResultPoint(L)}let f=this.decodeMiddle(s,c,this.decodeRowStringBuffer),h=f.rowOffset,y=f.resultString;if(null!=d){const L=new re(h,o);d.foundPossibleResultPoint(L)}let w=this.decodeEnd(s,h);if(null!=d){const L=new re((w[0]+w[1])/2,o);d.foundPossibleResultPoint(L)}let C=w[1],D=C+(C-w[0]);if(D>=s.getSize()||!s.isRange(C,D,!1))throw new U;let I=y.toString();if(I.length<8)throw new K;if(!ze.checkChecksum(I))throw new Rt;let S=(c[1]+c[0])/2,b=(w[1]+w[0])/2,M=this.getBarcodeFormat(),R=[new re(S,o),new re(b,o)],O=new gt(I,null,0,R,M,(new Date).getTime()),$=0;try{let L=Wa.decodeRow(o,s,w[1]);O.putMetadata(Oe.UPC_EAN_EXTENSION,L.getText()),O.putAllMetadata(L.getResultMetadata()),O.addResultPoints(L.getResultPoints()),$=L.getText().length}catch{}let q=null==l?null:l.get(st.ALLOWED_EAN_EXTENSIONS);if(null!=q){let L=!1;for(let Se in q)if($.toString()===Se){L=!0;break}if(!L)throw new U}return O}decodeEnd(o,s){return ze.findGuardPattern(o,s,!1,ze.START_END_PATTERN,new Int32Array(ze.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return ze.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let s=o.length;if(0===s)return!1;let l=parseInt(o.charAt(s-1),10);return ze.getStandardUPCEANChecksum(o.substring(0,s-1))===l}static getStandardUPCEANChecksum(o){let s=o.length,l=0;for(let c=s-1;c>=0;c-=2){let d=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(d<0||d>9)throw new K;l+=d}l*=3;for(let c=s-2;c>=0;c-=2){let d=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(d<0||d>9)throw new K;l+=d}return(1e3-l)%10}}let co=(()=>{class x extends ze{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=s.getSize(),h=l[1],y=0;for(let C=0;C<6&&h<f;C++){let D=ze.decodeDigit(s,d,h,ze.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+D%10);for(let I of d)h+=I;D>=10&&(y|=1<<5-C)}c=x.determineFirstDigit(c,y),h=ze.findGuardPattern(s,h,!0,ze.MIDDLE_PATTERN,new Int32Array(ze.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&h<f;C++){let D=ze.decodeDigit(s,d,h,ze.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+D);for(let I of d)h+=I}return{rowOffset:h,resultString:c}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(s,l){for(let c=0;c<10;c++)if(l===this.FIRST_DIGIT_ENCODINGS[c])return String.fromCharCode("0".charCodeAt(0)+c)+s;throw new U}}return x.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],x})();class $a extends ze{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,s,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=o.getSize(),f=s[1];for(let y=0;y<4&&f<d;y++){let w=ze.decodeDigit(o,c,f,ze.L_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+w);for(let C of c)f+=C}f=ze.findGuardPattern(o,f,!0,ze.MIDDLE_PATTERN,new Int32Array(ze.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<d;y++){let w=ze.decodeDigit(o,c,f,ze.L_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+w);for(let C of c)f+=C}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return ae.EAN_8}}class Ya extends ze{constructor(){super(...arguments),this.ean13Reader=new co}getBarcodeFormat(){return ae.UPC_A}decode(o,s){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,s,l))}decodeMiddle(o,s,l){return this.ean13Reader.decodeMiddle(o,s,l)}maybeReturnResult(o){let s=o.getText();if("0"===s.charAt(0)){let l=new gt(s.substring(1),null,null,o.getResultPoints(),ae.UPC_A);return null!=o.getResultMetadata()&&l.putAllMetadata(o.getResultMetadata()),l}throw new U}reset(){this.ean13Reader.reset()}}class $n extends ze{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,s,l){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const d=o.getSize();let f=s[1],h=0;for(let w=0;w<6&&f<d;w++){const C=$n.decodeDigit(o,c,f,$n.L_AND_G_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let D of c)f+=D;C>=10&&(h|=1<<5-w)}return{rowOffset:f,resultString:$n.determineNumSysAndCheckDigit(l,h)}}decodeEnd(o,s){return $n.findGuardPatternWithoutCounters(o,s,!0,$n.MIDDLE_END_PATTERN)}checkChecksum(o){return ze.checkChecksum($n.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,s){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c])return String.fromCharCode("0".charCodeAt(0)+l)+o+String.fromCharCode("0".charCodeAt(0)+c);throw U.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(o){const s=o.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new qe;l.append(o.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(c),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(c)}return o.length>=8&&l.append(o.charAt(7)),l.toString()}}$n.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),$n.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class uo extends Tt{constructor(o){super();let s=null==o?null:o.get(st.POSSIBLE_FORMATS),l=[];Ze(s)?(l.push(new co),l.push(new Ya),l.push(new $a),l.push(new $n)):(s.indexOf(ae.EAN_13)>-1&&l.push(new co),s.indexOf(ae.UPC_A)>-1&&l.push(new Ya),s.indexOf(ae.EAN_8)>-1&&l.push(new $a),s.indexOf(ae.UPC_E)>-1&&l.push(new $n)),this.readers=l}decodeRow(o,s,l){for(let c of this.readers)try{const d=c.decodeRow(o,s,l),f=d.getBarcodeFormat()===ae.EAN_13&&"0"===d.getText().charAt(0),h=null==l?null:l.get(st.POSSIBLE_FORMATS),y=null==h||h.includes(ae.UPC_A);if(f&&y){const w=d.getRawBytes(),C=new gt(d.getText().substring(1),w,w?w.length:null,d.getResultPoints(),ae.UPC_A);return C.putAllMetadata(d.getResultMetadata()),C}return d}catch{}throw new U}reset(){for(let o of this.readers)o.reset()}}let Ir=(()=>{class x extends Tt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,l){for(let c=0;c<l.length;c++)if(Tt.patternMatchVariance(s,l[c],x.MAX_INDIVIDUAL_VARIANCE)<x.MAX_AVG_VARIANCE)return c;throw new U}static count(s){return je.sum(new Int32Array(s))}static increment(s,l){let c=0,d=l[0];for(let f=1;f<s.length;f++)l[f]>d&&(d=l[f],c=f);s[c]++}static decrement(s,l){let c=0,d=l[0];for(let f=1;f<s.length;f++)l[f]<d&&(d=l[f],c=f);s[c]--}static isFinderPattern(s){let l=s[0]+s[1],d=l/(l+s[2]+s[3]);if(d>=x.MIN_FINDER_PATTERN_RATIO&&d<=x.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let y of s)y>h&&(h=y),y<f&&(f=y);return h<10*f}return!1}}return x.MAX_AVG_VARIANCE=.2,x.MAX_INDIVIDUAL_VARIANCE=.45,x.MIN_FINDER_PATTERN_RATIO=9.5/12,x.MAX_FINDER_PATTERN_RATIO=12.5/14,x})();class jr{constructor(o,s){this.value=o,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){return o instanceof jr&&this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pi{constructor(o,s,l,c,d){this.value=o,this.startEnd=s,this.value=o,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new re(l,d)),this.resultPoints.push(new re(c,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){return o instanceof Pi&&this.value===o.value}hashCode(){return this.value}}class Pn{constructor(){}static getRSSvalue(o,s,l){let c=0;for(let y of o)c+=y;let d=0,f=0,h=o.length;for(let y=0;y<h-1;y++){let w;for(w=1,f|=1<<y;w<o[y];w++,f&=~(1<<y)){let C=Pn.combins(c-w-1,h-y-2);if(l&&0===f&&c-w-(h-y-1)>=h-y-1&&(C-=Pn.combins(c-w-(h-y),h-y-2)),h-y-1>1){let D=0;for(let I=c-w-(h-y-2);I>s;I--)D+=Pn.combins(c-w-I-1,h-y-3);C-=D*(h-1-y)}else c-w>s&&C--;d+=C}c-=w}return d}static combins(o,s){let l,c;o-s>s?(c=s,l=o-s):(c=o-s,l=s);let d=1,f=1;for(let h=o;h>l;h--)d*=h,f<=c&&(d/=f,f++);for(;f<=c;)d/=f,f++;return d}}class Yc{static buildBitArray(o){let s=2*o.length-1;null==o[o.length-1].getRightChar()&&(s-=1);let c=new nt(12*s),d=0,h=o[0].getRightChar().getValue();for(let y=11;y>=0;--y)h&1<<y&&c.set(d),d++;for(let y=1;y<o.length;++y){let w=o[y],C=w.getLeftChar().getValue();for(let D=11;D>=0;--D)C&1<<D&&c.set(d),d++;if(null!=w.getRightChar()){let D=w.getRightChar().getValue();for(let I=11;I>=0;--I)D&1<<I&&c.set(d),d++}}return c}}class vr{constructor(o,s){s?this.decodedInformation=null:(this.finished=o,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class fo{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}let Sn=(()=>{class x extends fo{constructor(s,l){super(s),this.value=l}getValue(){return this.value}isFNC1(){return this.value===x.FNC1}}return x.FNC1="$",x})();class Sr extends fo{constructor(o,s,l){super(o),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Qt=(()=>{class x extends fo{constructor(s,l,c){if(super(s),l<0||l>10||c<0||c>10)throw new K;this.firstDigit=l,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===x.FNC1}isSecondDigitFNC1(){return this.secondDigit===x.FNC1}isAnyFNC1(){return this.firstDigit===x.FNC1||this.secondDigit===x.FNC1}}return x.FNC1=10,x})();class ee{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new U;let s=o.substring(0,2);for(let d of ee.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(2,d[2],o):ee.processFixedAI(2,d[1],o);if(o.length<3)throw new U;let l=o.substring(0,3);for(let d of ee.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(3,d[2],o):ee.processFixedAI(3,d[1],o);for(let d of ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(4,d[2],o):ee.processFixedAI(4,d[1],o);if(o.length<4)throw new U;let c=o.substring(0,4);for(let d of ee.FOUR_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(4,d[2],o):ee.processFixedAI(4,d[1],o);throw new U}static processFixedAI(o,s,l){if(l.length<o)throw new U;let c=l.substring(0,o);if(l.length<o+s)throw new U;let d=l.substring(o,o+s),f=l.substring(o+s),h="("+c+")"+d,y=ee.parseFieldsInGeneralPurpose(f);return null==y?h:h+y}static processVariableAI(o,s,l){let d,c=l.substring(0,o);d=l.length<o+s?l.length:o+s;let f=l.substring(o,d),h=l.substring(d),y="("+c+")"+f,w=ee.parseFieldsInGeneralPurpose(h);return null==w?y:y+w}}ee.VARIABLE_LENGTH=[],ee.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ee.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ee.VARIABLE_LENGTH,20],["22",ee.VARIABLE_LENGTH,29],["30",ee.VARIABLE_LENGTH,8],["37",ee.VARIABLE_LENGTH,8],["90",ee.VARIABLE_LENGTH,30],["91",ee.VARIABLE_LENGTH,30],["92",ee.VARIABLE_LENGTH,30],["93",ee.VARIABLE_LENGTH,30],["94",ee.VARIABLE_LENGTH,30],["95",ee.VARIABLE_LENGTH,30],["96",ee.VARIABLE_LENGTH,30],["97",ee.VARIABLE_LENGTH,3],["98",ee.VARIABLE_LENGTH,30],["99",ee.VARIABLE_LENGTH,30]],ee.THREE_DIGIT_DATA_LENGTH=[["240",ee.VARIABLE_LENGTH,30],["241",ee.VARIABLE_LENGTH,30],["242",ee.VARIABLE_LENGTH,6],["250",ee.VARIABLE_LENGTH,30],["251",ee.VARIABLE_LENGTH,30],["253",ee.VARIABLE_LENGTH,17],["254",ee.VARIABLE_LENGTH,20],["400",ee.VARIABLE_LENGTH,30],["401",ee.VARIABLE_LENGTH,30],["402",17],["403",ee.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ee.VARIABLE_LENGTH,20],["421",ee.VARIABLE_LENGTH,15],["422",3],["423",ee.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ee.VARIABLE_LENGTH,15],["391",ee.VARIABLE_LENGTH,18],["392",ee.VARIABLE_LENGTH,15],["393",ee.VARIABLE_LENGTH,18],["703",ee.VARIABLE_LENGTH,30]],ee.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ee.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ee.VARIABLE_LENGTH,20],["8003",ee.VARIABLE_LENGTH,30],["8004",ee.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ee.VARIABLE_LENGTH,30],["8008",ee.VARIABLE_LENGTH,12],["8018",18],["8020",ee.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ee.VARIABLE_LENGTH,70],["8200",ee.VARIABLE_LENGTH,70]];class ui{constructor(o){this.buffer=new qe,this.information=o}decodeAllCodes(o,s){let l=s,c=null;for(;;){let d=this.decodeGeneralPurposeField(l,c),f=ee.parseFieldsInGeneralPurpose(d.getNewString());if(null!=f&&o.append(f),c=d.isRemaining()?""+d.getRemainingValue():null,l===d.getNewPosition())break;l=d.getNewPosition()}return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let s=o;s<o+3;++s)if(this.information.get(s))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(o,4);return new Qt(this.information.getSize(),0===d?Qt.FNC1:d-1,Qt.FNC1)}let s=this.extractNumericValueFromBitArray(o,7);return new Qt(o+7,(s-8)/11,(s-8)%11)}extractNumericValueFromBitArray(o,s){return ui.extractNumericValueFromBitArray(this.information,o,s)}static extractNumericValueFromBitArray(o,s,l){let c=0;for(let d=0;d<l;++d)o.get(s+d)&&(c|=1<<l-d-1);return c}decodeGeneralPurposeField(o,s){this.buffer.setLengthToZero(),null!=s&&this.buffer.append(s),this.current.setPosition(o);let l=this.parseBlocks();return null!=l&&l.isRemaining()?new Sr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Sr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),o=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),o=s.isFinished()):(s=this.parseNumericBlock(),o=s.isFinished()),l===this.current.getPosition()&&!o)break}while(!o);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let s;return s=o.isSecondDigitFNC1()?new Sr(this.current.getPosition(),this.buffer.toString()):new Sr(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new vr(!0,s)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let s=new Sr(this.current.getPosition(),this.buffer.toString());return new vr(!0,s)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let s=new Sr(this.current.getPosition(),this.buffer.toString());return new vr(!0,s)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let s=new Sr(this.current.getPosition(),this.buffer.toString());return new vr(!0,s)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vr(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(o,5);if(s>=5&&s<16)return!0;if(o+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,7);if(l>=64&&l<116)return!0;if(o+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,8);return c>=232&&c<253}decodeIsoIec646(o){let s=this.extractNumericValueFromBitArray(o,5);if(15===s)return new Sn(o+5,Sn.FNC1);if(s>=5&&s<15)return new Sn(o+5,"0"+(s-5));let d,l=this.extractNumericValueFromBitArray(o,7);if(l>=64&&l<90)return new Sn(o+7,""+(l+1));if(l>=90&&l<116)return new Sn(o+7,""+(l+7));switch(this.extractNumericValueFromBitArray(o,8)){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new K}return new Sn(o+8,d)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(o,5);if(s>=5&&s<16)return!0;if(o+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,6);return l>=16&&l<63}decodeAlphanumeric(o){let s=this.extractNumericValueFromBitArray(o,5);if(15===s)return new Sn(o+5,Sn.FNC1);if(s>=5&&s<15)return new Sn(o+5,"0"+(s-5));let c,l=this.extractNumericValueFromBitArray(o,6);if(l>=32&&l<58)return new Sn(o+6,""+(l+33));switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new ar("Decoding invalid alphanumeric value: "+l)}return new Sn(o+6,c)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let s=0;s<5&&s+o<this.information.getSize();++s)if(2===s){if(!this.information.get(o+2))return!1}else if(this.information.get(o+s))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let s=o;s<o+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let s=0;s<4&&s+o<this.information.getSize();++s)if(this.information.get(o+s))return!1;return!0}}class bs{constructor(o){this.information=o,this.generalDecoder=new ui(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Fn=(()=>{class x extends bs{constructor(s){super(s)}encodeCompressedGtin(s,l){s.append("(01)");let c=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,l,c)}encodeCompressedGtinWithoutAI(s,l,c){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*d,10);f/100==0&&s.append("0"),f/10==0&&s.append("0"),s.append(f)}x.appendCheckDigit(s,c)}static appendCheckDigit(s,l){let c=0;for(let d=0;d<13;d++){let f=s.charAt(d+l).charCodeAt(0)-"0".charCodeAt(0);c+=1&d?f:3*f}c=10-c%10,10===c&&(c=0),s.append(c)}}return x.GTIN_SIZE=40,x})(),Xa=(()=>{class x extends Fn{constructor(s){super(s)}parseInformation(){let s=new qe;s.append("(01)");let l=s.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE,4);return s.append(c),this.encodeCompressedGtinWithoutAI(s,x.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(s,x.HEADER_SIZE+44)}}return x.HEADER_SIZE=4,x})(),Xc=(()=>{class x extends bs{constructor(s){super(s)}parseInformation(){let s=new qe;return this.getGeneralDecoder().decodeAllCodes(s,x.HEADER_SIZE)}}return x.HEADER_SIZE=5,x})();class ho extends Fn{constructor(o){super(o)}encodeCompressedWeight(o,s,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(o,c);let d=this.checkWeight(c),f=1e5;for(let h=0;h<5;++h)d/f==0&&o.append("0"),f/=10;o.append(d)}}let Yn=(()=>{class x extends ho{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=x.HEADER_SIZE+ho.GTIN_SIZE+x.WEIGHT_SIZE)throw new U;let s=new qe;return this.encodeCompressedGtin(s,x.HEADER_SIZE),this.encodeCompressedWeight(s,x.HEADER_SIZE+ho.GTIN_SIZE,x.WEIGHT_SIZE),s.toString()}}return x.HEADER_SIZE=5,x.WEIGHT_SIZE=15,x})();class Zc extends Yn{constructor(o){super(o)}addWeightCode(o,s){o.append("(3103)")}checkWeight(o){return o}}class Wt extends Yn{constructor(o){super(o)}addWeightCode(o,s){o.append(s<1e4?"(3202)":"(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}let di=(()=>{class x extends Fn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<x.HEADER_SIZE+Fn.GTIN_SIZE)throw new U;let s=new qe;this.encodeCompressedGtin(s,x.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+Fn.GTIN_SIZE,x.LAST_DIGIT_SIZE);s.append("(392"),s.append(l),s.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(x.HEADER_SIZE+Fn.GTIN_SIZE+x.LAST_DIGIT_SIZE,null);return s.append(c.getNewString()),s.toString()}}return x.HEADER_SIZE=8,x.LAST_DIGIT_SIZE=2,x})(),Xn=(()=>{class x extends Fn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<x.HEADER_SIZE+Fn.GTIN_SIZE)throw new U;let s=new qe;this.encodeCompressedGtin(s,x.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+Fn.GTIN_SIZE,x.LAST_DIGIT_SIZE);s.append("(393"),s.append(l),s.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+Fn.GTIN_SIZE+x.LAST_DIGIT_SIZE,x.FIRST_THREE_DIGITS_SIZE);c/100==0&&s.append("0"),c/10==0&&s.append("0"),s.append(c);let d=this.getGeneralDecoder().decodeGeneralPurposeField(x.HEADER_SIZE+Fn.GTIN_SIZE+x.LAST_DIGIT_SIZE+x.FIRST_THREE_DIGITS_SIZE,null);return s.append(d.getNewString()),s.toString()}}return x.HEADER_SIZE=8,x.LAST_DIGIT_SIZE=2,x.FIRST_THREE_DIGITS_SIZE=10,x})(),Vr=(()=>{class x extends ho{constructor(s,l,c){super(s),this.dateCode=c,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=x.HEADER_SIZE+x.GTIN_SIZE+x.WEIGHT_SIZE+x.DATE_SIZE)throw new U;let s=new qe;return this.encodeCompressedGtin(s,x.HEADER_SIZE),this.encodeCompressedWeight(s,x.HEADER_SIZE+x.GTIN_SIZE,x.WEIGHT_SIZE),this.encodeCompressedDate(s,x.HEADER_SIZE+x.GTIN_SIZE+x.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(l,x.DATE_SIZE);if(38400==c)return;s.append("("),s.append(this.dateCode),s.append(")");let d=c%32;c/=32;let f=c%12+1;c/=12;let h=c;h/10==0&&s.append("0"),s.append(h),f/10==0&&s.append("0"),s.append(f),d/10==0&&s.append("0"),s.append(d)}addWeightCode(s,l){s.append("("),s.append(this.firstAIdigits),s.append(l/1e5),s.append(")")}checkWeight(s){return s%1e5}}return x.HEADER_SIZE=8,x.WEIGHT_SIZE=20,x.DATE_SIZE=16,x})();function Za(x){try{if(x.get(1))return new Xa(x);if(!x.get(2))return new Xc(x);switch(ui.extractNumericValueFromBitArray(x,1,4)){case 4:return new Zc(x);case 5:return new Wt(x)}switch(ui.extractNumericValueFromBitArray(x,1,5)){case 12:return new di(x);case 13:return new Xn(x)}switch(ui.extractNumericValueFromBitArray(x,1,7)){case 56:return new Vr(x,"310","11");case 57:return new Vr(x,"320","11");case 58:return new Vr(x,"310","13");case 59:return new Vr(x,"320","13");case 60:return new Vr(x,"310","15");case 61:return new Vr(x,"320","15");case 62:return new Vr(x,"310","17");case 63:return new Vr(x,"320","17")}}catch(o){throw console.log(o),new ar("unknown decoder: "+x)}}class _r{constructor(o,s,l,c){this.leftchar=o,this.rightchar=s,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(o,s){return o instanceof _r&&_r.equalsOrNull(o.leftchar,s.leftchar)&&_r.equalsOrNull(o.rightchar,s.rightchar)&&_r.equalsOrNull(o.finderpattern,s.finderpattern)}static equalsOrNull(o,s){return null===o?null===s:_r.equals(o,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Fi{constructor(o,s,l){this.pairs=o,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,s){return o instanceof Fi&&this.checkEqualitity(o,s)&&o.wasReversed===s.wasReversed}checkEqualitity(o,s){if(!o||!s)return;let l;return o.forEach((c,d)=>{s.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class V extends Ir{constructor(o){super(...arguments),this.pairs=new Array(V.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===o}decodeRow(o,s,l){this.pairs.length=0,this.startFromEven=!1;try{return V.constructResult(this.decodeRow2pairs(o,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,V.constructResult(this.decodeRow2pairs(o,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,s){let c,l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,o))}catch(d){if(d instanceof U){if(!this.pairs.length)throw new U;l=!0}}if(this.checkChecksum())return this.pairs;if(c=!!this.rows.length,this.storeRow(o,!1),c){let d=this.checkRowsBoolean(!1);if(null!=d||(d=this.checkRowsBoolean(!0),null!=d))return d}throw new U}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return o&&(this.rows=this.rows.reverse()),s}checkRows(o,s){for(let l=s;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let f of o)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!V.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(o);d.push(c);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new U}static isValidSequence(o){for(let s of V.FINDER_PATTERN_SEQUENCES){if(o.length>s.length)continue;let l=!0;for(let c=0;c<o.length;c++)if(o[c].getFinderPattern().getValue()!=s[c]){l=!1;break}if(l)return!0}return!1}storeRow(o,s){let l=0,c=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>o){d=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),l++}d||c||V.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Fi(this.pairs,o,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,s){for(let l of s)if(l.getPairs().length!==o.length)for(let c of l.getPairs())for(let d of o)if(_r.equals(c,d))break}static isPartialRow(o,s){for(let l of s){let c=!0;for(let d of o){let f=!1;for(let h of l.getPairs())if(d.equals(h)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(o){let c=Za(Yc.buildBitArray(o)).parseInformation(),d=o[0].getFinderPattern().getResultPoints(),f=o[o.length-1].getFinderPattern().getResultPoints();return new gt(c,null,null,[d[0],d[1],f[0],f[1]],ae.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),s=o.getLeftChar(),l=o.getRightChar();if(null==l)return!1;let c=l.getChecksumPortion(),d=2;for(let h=1;h<this.pairs.size();++h){let y=this.pairs.get(h);c+=y.getLeftChar().getChecksumPortion(),d++;let w=y.getRightChar();null!=w&&(c+=w.getChecksumPortion(),d++)}return c%=211,211*(d-4)+c==s.getValue()}static getNextSecondBar(o,s){let l;return o.get(s)?(l=o.getNextUnset(s),l=o.getNextSet(l)):(l=o.getNextSet(s),l=o.getNextUnset(l)),l}retrieveNextPair(o,s,l){let c=s.length%2==0;this.startFromEven&&(c=!c);let d,f=!0,h=-1;do{this.findNextPair(o,s,h),d=this.parseFoundFinderPattern(o,l,c),null==d?h=V.getNextSecondBar(o,this.startEnd[0]):f=!1}while(f);let w,y=this.decodeDataCharacter(o,d,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new U;try{w=this.decodeDataCharacter(o,d,c,!1)}catch(C){w=null,this.verbose&&console.log(C)}return new _r(y,w,d,!0)}isEmptyPair(o){return 0===o.length}findNextPair(o,s,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f,d=o.getSize();f=l>=0?l:this.isEmptyPair(s)?0:s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let y=!1;for(;f<d&&(y=!o.get(f),y);)f++;let w=0,C=f;for(let D=f;D<d;D++)if(o.get(D)!=y)c[w]++;else{if(3==w){if(h&&V.reverseCounters(c),V.isFinderPattern(c))return this.startEnd[0]=C,void(this.startEnd[1]=D);h&&V.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,y=!y}throw new U}static reverseCounters(o){let s=o.length;for(let l=0;l<s/2;++l){let c=o[l];o[l]=o[s-l-1],o[s-l-1]=c}}parseFoundFinderPattern(o,s,l){let c,d,f;if(l){let w=this.startEnd[0]-1;for(;w>=0&&!o.get(w);)w--;w++,c=this.startEnd[0]-w,d=w,f=this.startEnd[1]}else d=this.startEnd[0],f=o.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let y,h=this.getDecodeFinderCounters();tt.arraycopy(h,0,h,1,h.length-1),h[0]=c;try{y=this.parseFinderValue(h,V.FINDER_PATTERNS)}catch{return null}return new Pi(y,[d,f],d,f,s)}decodeDataCharacter(o,s,l,c){let d=this.getDataCharacterCounters();for(let Xe=0;Xe<d.length;Xe++)d[Xe]=0;if(c)V.recordPatternInReverse(o,s.getStartEnd()[0],d);else{V.recordPattern(o,s.getStartEnd()[1],d);for(let Xe=0,xt=d.length-1;Xe<xt;Xe++,xt--){let Ct=d[Xe];d[Xe]=d[xt],d[xt]=Ct}}let h=je.sum(new Int32Array(d))/17,y=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-y)/y>.3)throw new U;let w=this.getOddCounts(),C=this.getEvenCounts(),D=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Xe=0;Xe<d.length;Xe++){let xt=1*d[Xe]/h,Ct=xt+.5;if(Ct<1){if(xt<.3)throw new U;Ct=1}else if(Ct>8){if(xt>8.7)throw new U;Ct=8}let Qn=Xe/2;1&Xe?(C[Qn]=Ct,I[Qn]=xt-Ct):(w[Qn]=Ct,D[Qn]=xt-Ct)}this.adjustOddEvenCounts(17);let S=4*s.getValue()+(l?0:2)+(c?0:1)-1,b=0,M=0;for(let Xe=w.length-1;Xe>=0;Xe--)V.isNotA1left(s,l,c)&&(M+=w[Xe]*V.WEIGHTS[S][2*Xe]),b+=w[Xe];let R=0;for(let Xe=C.length-1;Xe>=0;Xe--)V.isNotA1left(s,l,c)&&(R+=C[Xe]*V.WEIGHTS[S][2*Xe+1]);let O=M+R;if(1&b||b>13||b<4)throw new U;let $=(13-b)/2,q=V.SYMBOL_WIDEST[$],L=9-q,Se=Pn.getRSSvalue(w,q,!0),xe=Pn.getRSSvalue(C,L,!1);return new jr(Se*V.EVEN_TOTAL_SUBSET[$]+xe+V.GSUM[$],O)}static isNotA1left(o,s,l){return!(0==o.getValue()&&s&&l)}adjustOddEvenCounts(o){let s=je.sum(new Int32Array(this.getOddCounts())),l=je.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1;s>13?d=!0:s<4&&(c=!0);let f=!1,h=!1;l>13?h=!0:l<4&&(f=!0);let y=s+l-o,w=1==(1&s),C=0==(1&l);if(1==y)if(w){if(C)throw new U;d=!0}else{if(!C)throw new U;h=!0}else if(-1==y)if(w){if(C)throw new U;c=!0}else{if(!C)throw new U;f=!0}else{if(0!=y)throw new U;if(w){if(!C)throw new U;s<l?(c=!0,h=!0):(d=!0,f=!0)}else if(C)throw new U}if(c){if(d)throw new U;V.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&V.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new U;V.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&V.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}V.SYMBOL_WIDEST=[7,5,4,3,1],V.EVEN_TOTAL_SUBSET=[4,20,52,104,204],V.GSUM=[0,348,1388,2948,3988],V.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],V.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],V.FINDER_PAT_A=0,V.FINDER_PAT_B=1,V.FINDER_PAT_C=2,V.FINDER_PAT_D=3,V.FINDER_PAT_E=4,V.FINDER_PAT_F=5,V.FINDER_PATTERN_SEQUENCES=[[V.FINDER_PAT_A,V.FINDER_PAT_A],[V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B],[V.FINDER_PAT_A,V.FINDER_PAT_C,V.FINDER_PAT_B,V.FINDER_PAT_D],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_C],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_D,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_D],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_E],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F]],V.MAX_PAIRS=11;class ki extends jr{constructor(o,s,l){super(o,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class wt extends Ir{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,s,l){const c=this.decodePair(s,!1,o,l);wt.addOrTally(this.possibleLeftPairs,c),s.reverse();let d=this.decodePair(s,!0,o,l);wt.addOrTally(this.possibleRightPairs,d),s.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1)for(let h of this.possibleRightPairs)if(h.getCount()>1&&wt.checkChecksum(f,h))return wt.constructResult(f,h);throw new U}static addOrTally(o,s){if(null==s)return;let l=!1;for(let c of o)if(c.getValue()===s.getValue()){c.incrementCount(),l=!0;break}l||o.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,s){let l=4537077*o.getValue()+s.getValue(),c=new String(l).toString(),d=new qe;for(let w=13-c.length;w>0;w--)d.append("0");d.append(c);let f=0;for(let w=0;w<13;w++){let C=d.charAt(w).charCodeAt(0)-"0".charCodeAt(0);f+=1&w?C:3*C}f=10-f%10,10===f&&(f=0),d.append(f.toString());let h=o.getFinderPattern().getResultPoints(),y=s.getFinderPattern().getResultPoints();return new gt(d.toString(),null,0,[h[0],h[1],y[0],y[1]],ae.RSS_14,(new Date).getTime())}static checkChecksum(o,s){let l=(o.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*o.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(o,s,l,c){try{let d=this.findFinderPattern(o,s),f=this.parseFoundFinderPattern(o,l,s,d),h=null==c?null:c.get(st.NEED_RESULT_POINT_CALLBACK);if(null!=h){let C=(d[0]+d[1])/2;s&&(C=o.getSize()-1-C),h.foundPossibleResultPoint(new re(C,l))}let y=this.decodeDataCharacter(o,f,!0),w=this.decodeDataCharacter(o,f,!1);return new ki(1597*y.getValue()+w.getValue(),y.getChecksumPortion()+4*w.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(o,s,l){let c=this.getDataCharacterCounters();for(let R=0;R<c.length;R++)c[R]=0;if(l)Tt.recordPatternInReverse(o,s.getStartEnd()[0],c);else{Tt.recordPattern(o,s.getStartEnd()[1]+1,c);for(let R=0,O=c.length-1;R<O;R++,O--){let $=c[R];c[R]=c[O],c[O]=$}}let d=l?16:15,f=je.sum(new Int32Array(c))/d,h=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let R=0;R<c.length;R++){let O=c[R]/f,$=Math.floor(O+.5);$<1?$=1:$>8&&($=8);let q=Math.floor(R/2);1&R?(y[q]=$,C[q]=O-$):(h[q]=$,w[q]=O-$)}this.adjustOddEvenCounts(l,d);let D=0,I=0;for(let R=h.length-1;R>=0;R--)I*=9,I+=h[R],D+=h[R];let S=0,b=0;for(let R=y.length-1;R>=0;R--)S*=9,S+=y[R],b+=y[R];let M=I+3*S;if(l){if(1&D||D>12||D<4)throw new U;let R=(12-D)/2,O=wt.OUTSIDE_ODD_WIDEST[R],$=9-O,q=Pn.getRSSvalue(h,O,!1),L=Pn.getRSSvalue(y,$,!0);return new jr(q*wt.OUTSIDE_EVEN_TOTAL_SUBSET[R]+L+wt.OUTSIDE_GSUM[R],M)}{if(1&b||b>10||b<4)throw new U;let R=(10-b)/2,O=wt.INSIDE_ODD_WIDEST[R],$=9-O,q=Pn.getRSSvalue(h,O,!0),L=Pn.getRSSvalue(y,$,!1);return new jr(L*wt.INSIDE_ODD_TOTAL_SUBSET[R]+q+wt.INSIDE_GSUM[R],M)}}findFinderPattern(o,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=o.getSize(),d=!1,f=0;for(;f<c&&(d=!o.get(f),s!==d);)f++;let h=0,y=f;for(let w=f;w<c;w++)if(o.get(w)!==d)l[h]++;else{if(3===h){if(Ir.isFinderPattern(l))return[y,w];y+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,h--}else h++;l[h]=1,d=!d}throw new U}parseFoundFinderPattern(o,s,l,c){let d=o.get(c[0]),f=c[0]-1;for(;f>=0&&d!==o.get(f);)f--;f++;const h=c[0]-f,y=this.getDecodeFinderCounters(),w=new Int32Array(y.length);tt.arraycopy(y,0,w,1,y.length-1),w[0]=h;const C=this.parseFinderValue(w,wt.FINDER_PATTERNS);let D=f,I=c[1];return l&&(D=o.getSize()-1-D,I=o.getSize()-1-I),new Pi(C,[f,c[1]],D,I,s)}adjustOddEvenCounts(o,s){let l=je.sum(new Int32Array(this.getOddCounts())),c=je.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,h=!1,y=!1;o?(l>12?f=!0:l<4&&(d=!0),c>12?y=!0:c<4&&(h=!0)):(l>11?f=!0:l<5&&(d=!0),c>10?y=!0:c<4&&(h=!0));let w=l+c-s,C=(1&l)==(o?1:0),D=1==(1&c);if(1===w)if(C){if(D)throw new U;f=!0}else{if(!D)throw new U;y=!0}else if(-1===w)if(C){if(D)throw new U;d=!0}else{if(!D)throw new U;h=!0}else{if(0!==w)throw new U;if(C){if(!D)throw new U;l<c?(d=!0,y=!0):(f=!0,h=!0)}else if(D)throw new U}if(d){if(f)throw new U;Ir.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ir.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(y)throw new U;Ir.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ir.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}wt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],wt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],wt.OUTSIDE_GSUM=[0,161,961,2015,2715],wt.INSIDE_GSUM=[0,336,1036,1516],wt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],wt.INSIDE_ODD_WIDEST=[2,4,6,8],wt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Hr extends Tt{constructor(o,s){super(),this.readers=[],this.verbose=!0===s;const l=o?o.get(st.POSSIBLE_FORMATS):null,c=o&&void 0!==o.get(st.ASSUME_CODE_39_CHECK_DIGIT);l?((l.includes(ae.EAN_13)||l.includes(ae.UPC_A)||l.includes(ae.EAN_8)||l.includes(ae.UPC_E))&&this.readers.push(new uo(o)),l.includes(ae.CODE_39)&&this.readers.push(new Ss(c)),l.includes(ae.CODE_128)&&this.readers.push(new Z),l.includes(ae.ITF)&&this.readers.push(new rt),l.includes(ae.RSS_14)&&this.readers.push(new wt),l.includes(ae.RSS_EXPANDED)&&this.readers.push(new V(this.verbose))):(this.readers.push(new uo(o)),this.readers.push(new Ss),this.readers.push(new uo(o)),this.readers.push(new Z),this.readers.push(new rt),this.readers.push(new wt),this.readers.push(new V(this.verbose)))}decodeRow(o,s,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(o,s,l)}catch{}throw new U}reset(){this.readers.forEach(o=>o.reset())}}class Qe{constructor(o,s,l){this.ecCodewords=o,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ge{constructor(o,s){this.count=o,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Le{constructor(o,s,l,c,d,f){this.versionNumber=o,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=d,this.ecBlocks=f;let h=0;const y=f.getECCodewords(),w=f.getECBlocks();for(let C of w)h+=C.getCount()*(C.getDataCodewords()+y);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,s){if(1&o||1&s)throw new K;for(let l of Le.VERSIONS)if(l.symbolSizeRows===o&&l.symbolSizeColumns===s)return l;throw new K}toString(){return""+this.versionNumber}static buildVersions(){return[new Le(1,10,10,8,8,new Qe(5,new Ge(1,3))),new Le(2,12,12,10,10,new Qe(7,new Ge(1,5))),new Le(3,14,14,12,12,new Qe(10,new Ge(1,8))),new Le(4,16,16,14,14,new Qe(12,new Ge(1,12))),new Le(5,18,18,16,16,new Qe(14,new Ge(1,18))),new Le(6,20,20,18,18,new Qe(18,new Ge(1,22))),new Le(7,22,22,20,20,new Qe(20,new Ge(1,30))),new Le(8,24,24,22,22,new Qe(24,new Ge(1,36))),new Le(9,26,26,24,24,new Qe(28,new Ge(1,44))),new Le(10,32,32,14,14,new Qe(36,new Ge(1,62))),new Le(11,36,36,16,16,new Qe(42,new Ge(1,86))),new Le(12,40,40,18,18,new Qe(48,new Ge(1,114))),new Le(13,44,44,20,20,new Qe(56,new Ge(1,144))),new Le(14,48,48,22,22,new Qe(68,new Ge(1,174))),new Le(15,52,52,24,24,new Qe(42,new Ge(2,102))),new Le(16,64,64,14,14,new Qe(56,new Ge(2,140))),new Le(17,72,72,16,16,new Qe(36,new Ge(4,92))),new Le(18,80,80,18,18,new Qe(48,new Ge(4,114))),new Le(19,88,88,20,20,new Qe(56,new Ge(4,144))),new Le(20,96,96,22,22,new Qe(68,new Ge(4,174))),new Le(21,104,104,24,24,new Qe(56,new Ge(6,136))),new Le(22,120,120,18,18,new Qe(68,new Ge(6,175))),new Le(23,132,132,20,20,new Qe(62,new Ge(8,163))),new Le(24,144,144,22,22,new Qe(62,new Ge(8,156),new Ge(2,155))),new Le(25,8,18,6,16,new Qe(7,new Ge(1,5))),new Le(26,8,32,6,14,new Qe(11,new Ge(1,10))),new Le(27,12,26,10,24,new Qe(14,new Ge(1,16))),new Le(28,12,36,10,16,new Qe(18,new Ge(1,22))),new Le(29,16,36,14,16,new Qe(24,new Ge(1,32))),new Le(30,16,48,14,22,new Qe(28,new Ge(1,49)))]}}Le.VERSIONS=Le.buildVersions();class Ts{constructor(o){const s=o.getHeight();if(s<8||s>144||1&s)throw new K;this.version=Ts.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new Ft(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const s=o.getHeight(),l=o.getWidth();return Le.getVersionForDimensions(s,l)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,c=0;const d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let h=!1,y=!1,w=!1,C=!1;do{if(l!==d||0!==c||h)if(l===d-2&&0===c&&3&f&&!y)o[s++]=255&this.readCorner2(d,f),l-=2,c+=2,y=!0;else if(l!==d+4||2!==c||7&f||w)if(l!==d-2||0!==c||4!=(7&f)||C){do{l<d&&c>=0&&!this.readMappingMatrix.get(c,l)&&(o[s++]=255&this.readUtah(l,c,d,f)),l-=2,c+=2}while(l>=0&&c<f);l+=1,c+=3;do{l>=0&&c<f&&!this.readMappingMatrix.get(c,l)&&(o[s++]=255&this.readUtah(l,c,d,f)),l+=2,c-=2}while(l<d&&c>=0);l+=3,c+=1}else o[s++]=255&this.readCorner4(d,f),l-=2,c+=2,C=!0;else o[s++]=255&this.readCorner3(d,f),l-=2,c+=2,w=!0;else o[s++]=255&this.readCorner1(d,f),l-=2,c+=2,h=!0}while(l<d||c<f);if(s!==this.version.getTotalCodewords())throw new K;return o}readModule(o,s,l,c){return o<0&&(o+=l,s+=4-(l+4&7)),s<0&&(s+=c,o+=4-(c+4&7)),this.readMappingMatrix.set(s,o),this.mappingBitMatrix.get(s,o)}readUtah(o,s,l,c){let d=0;return this.readModule(o-2,s-2,l,c)&&(d|=1),d<<=1,this.readModule(o-2,s-1,l,c)&&(d|=1),d<<=1,this.readModule(o-1,s-2,l,c)&&(d|=1),d<<=1,this.readModule(o-1,s-1,l,c)&&(d|=1),d<<=1,this.readModule(o-1,s,l,c)&&(d|=1),d<<=1,this.readModule(o,s-2,l,c)&&(d|=1),d<<=1,this.readModule(o,s-1,l,c)&&(d|=1),d<<=1,this.readModule(o,s,l,c)&&(d|=1),d}readCorner1(o,s){let l=0;return this.readModule(o-1,0,o,s)&&(l|=1),l<<=1,this.readModule(o-1,1,o,s)&&(l|=1),l<<=1,this.readModule(o-1,2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-1,o,s)&&(l|=1),l<<=1,this.readModule(1,s-1,o,s)&&(l|=1),l<<=1,this.readModule(2,s-1,o,s)&&(l|=1),l<<=1,this.readModule(3,s-1,o,s)&&(l|=1),l}readCorner2(o,s){let l=0;return this.readModule(o-3,0,o,s)&&(l|=1),l<<=1,this.readModule(o-2,0,o,s)&&(l|=1),l<<=1,this.readModule(o-1,0,o,s)&&(l|=1),l<<=1,this.readModule(0,s-4,o,s)&&(l|=1),l<<=1,this.readModule(0,s-3,o,s)&&(l|=1),l<<=1,this.readModule(0,s-2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-1,o,s)&&(l|=1),l<<=1,this.readModule(1,s-1,o,s)&&(l|=1),l}readCorner3(o,s){let l=0;return this.readModule(o-1,0,o,s)&&(l|=1),l<<=1,this.readModule(o-1,s-1,o,s)&&(l|=1),l<<=1,this.readModule(0,s-3,o,s)&&(l|=1),l<<=1,this.readModule(0,s-2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-1,o,s)&&(l|=1),l<<=1,this.readModule(1,s-3,o,s)&&(l|=1),l<<=1,this.readModule(1,s-2,o,s)&&(l|=1),l<<=1,this.readModule(1,s-1,o,s)&&(l|=1),l}readCorner4(o,s){let l=0;return this.readModule(o-3,0,o,s)&&(l|=1),l<<=1,this.readModule(o-2,0,o,s)&&(l|=1),l<<=1,this.readModule(o-1,0,o,s)&&(l|=1),l<<=1,this.readModule(0,s-2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-1,o,s)&&(l|=1),l<<=1,this.readModule(1,s-1,o,s)&&(l|=1),l<<=1,this.readModule(2,s-1,o,s)&&(l|=1),l<<=1,this.readModule(3,s-1,o,s)&&(l|=1),l}extractDataRegion(o){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(o.getHeight()!==s)throw new te("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=s/c|0,h=l/d|0,C=new Ft(h*d,f*c);for(let D=0;D<f;++D){const I=D*c;for(let S=0;S<h;++S){const b=S*d;for(let M=0;M<c;++M){const R=D*(c+2)+1+M,O=I+M;for(let $=0;$<d;++$)o.get(S*(d+2)+1+$,R)&&C.set(b+$,O)}}}return C}}class go{constructor(o,s){this.numDataCodewords=o,this.codewords=s}static getDataBlocks(o,s){const l=s.getECBlocks();let c=0;const d=l.getECBlocks();for(let M of d)c+=M.getCount();const f=new Array(c);let h=0;for(let M of d)for(let R=0;R<M.getCount();R++){const O=M.getDataCodewords(),$=l.getECCodewords()+O;f[h++]=new go(O,new Uint8Array($))}const w=f[0].codewords.length-l.getECCodewords(),C=w-1;let D=0;for(let M=0;M<C;M++)for(let R=0;R<h;R++)f[R].codewords[M]=o[D++];const I=24===s.getVersionNumber(),S=I?8:h;for(let M=0;M<S;M++)f[M].codewords[w-1]=o[D++];const b=f[0].codewords.length;for(let M=w;M<b;M++)for(let R=0;R<h;R++){const O=I?(R+8)%h:R;f[O].codewords[I&&O>7?M-1:M]=o[D++]}if(D!==o.length)throw new te;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ms{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new te(""+o);let s=0,l=this.bitOffset,c=this.byteOffset;const d=this.bytes;if(l>0){const f=8-l,h=o<f?o:f,y=f-h;s=(d[c]&255>>8-h<<y)>>y,o-=h,l+=h,8===l&&(l=0,c++)}if(o>0){for(;o>=8;)s=s<<8|255&d[c],c++,o-=8;if(o>0){const f=8-o;s=s<<o|(d[c]&255>>f<<f)>>f,l+=o}}return this.bitOffset=l,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Mt=(()=>{return(x=Mt||(Mt={}))[x.PAD_ENCODE=0]="PAD_ENCODE",x[x.ASCII_ENCODE=1]="ASCII_ENCODE",x[x.C40_ENCODE=2]="C40_ENCODE",x[x.TEXT_ENCODE=3]="TEXT_ENCODE",x[x.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",x[x.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",x[x.BASE256_ENCODE=6]="BASE256_ENCODE",Mt;var x})();class lt{static decode(o){const s=new Ms(o),l=new qe,c=new qe,d=new Array;let f=Mt.ASCII_ENCODE;do{if(f===Mt.ASCII_ENCODE)f=this.decodeAsciiSegment(s,l,c);else{switch(f){case Mt.C40_ENCODE:this.decodeC40Segment(s,l);break;case Mt.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Mt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Mt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Mt.BASE256_ENCODE:this.decodeBase256Segment(s,l,d);break;default:throw new K}f=Mt.ASCII_ENCODE}}while(f!==Mt.PAD_ENCODE&&s.available()>0);return c.length()>0&&l.append(c.toString()),new Mi(o,l.toString(),0===d.length?null:d,null)}static decodeAsciiSegment(o,s,l){let c=!1;do{let d=o.readBits(8);if(0===d)throw new K;if(d<=128)return c&&(d+=128),s.append(String.fromCharCode(d-1)),Mt.ASCII_ENCODE;if(129===d)return Mt.PAD_ENCODE;if(d<=229){const f=d-130;f<10&&s.append("0"),s.append(""+f)}else switch(d){case 230:return Mt.C40_ENCODE;case 231:return Mt.BASE256_ENCODE;case 232:s.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:c=!0;break;case 236:s.append("[)>\x1e05\x1d"),l.insert(0,"\x1e\x04");break;case 237:s.append("[)>\x1e06\x1d"),l.insert(0,"\x1e\x04");break;case 238:return Mt.ANSIX12_ENCODE;case 239:return Mt.TEXT_ENCODE;case 240:return Mt.EDIFACT_ENCODE;default:if(254!==d||0!==o.available())throw new K}}while(o.available()>0);return Mt.ASCII_ENCODE}static decodeC40Segment(o,s){let l=!1;const c=[];let d=0;do{if(8===o.available())return;const f=o.readBits(8);if(254===f)return;this.parseTwoBytes(f,o.readBits(8),c);for(let h=0;h<3;h++){const y=c[h];switch(d){case 0:if(y<3)d=y+1;else{if(!(y<this.C40_BASIC_SET_CHARS.length))throw new K;{const w=this.C40_BASIC_SET_CHARS[y];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w)}}break;case 1:l?(s.append(String.fromCharCode(y+128)),l=!1):s.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[y];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w)}else switch(y){case 27:s.append(String.fromCharCode(29));break;case 30:l=!0;break;default:throw new K}d=0;break;case 3:l?(s.append(String.fromCharCode(y+224)),l=!1):s.append(String.fromCharCode(y+96)),d=0;break;default:throw new K}}}while(o.available()>0)}static decodeTextSegment(o,s){let l=!1,c=[],d=0;do{if(8===o.available())return;const f=o.readBits(8);if(254===f)return;this.parseTwoBytes(f,o.readBits(8),c);for(let h=0;h<3;h++){const y=c[h];switch(d){case 0:if(y<3)d=y+1;else{if(!(y<this.TEXT_BASIC_SET_CHARS.length))throw new K;{const w=this.TEXT_BASIC_SET_CHARS[y];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w)}}break;case 1:l?(s.append(String.fromCharCode(y+128)),l=!1):s.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[y];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w)}else switch(y){case 27:s.append(String.fromCharCode(29));break;case 30:l=!0;break;default:throw new K}d=0;break;case 3:if(!(y<this.TEXT_SHIFT3_SET_CHARS.length))throw new K;{const w=this.TEXT_SHIFT3_SET_CHARS[y];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w),d=0}break;default:throw new K}}}while(o.available()>0)}static decodeAnsiX12Segment(o,s){const l=[];do{if(8===o.available())return;const c=o.readBits(8);if(254===c)return;this.parseTwoBytes(c,o.readBits(8),l);for(let d=0;d<3;d++){const f=l[d];switch(f){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(f<14)s.append(String.fromCharCode(f+44));else{if(!(f<40))throw new K;s.append(String.fromCharCode(f+51))}}}}while(o.available()>0)}static parseTwoBytes(o,s,l){let c=(o<<8)+s-1,d=Math.floor(c/1600);l[0]=d,c-=1600*d,d=Math.floor(c/40),l[1]=d,l[2]=c-40*d}static decodeEdifactSegment(o,s){do{if(o.available()<=16)return;for(let l=0;l<4;l++){let c=o.readBits(6);if(31===c){const d=8-o.getBitOffset();return void(8!==d&&o.readBits(d))}32&c||(c|=64),s.append(String.fromCharCode(c))}}while(o.available()>0)}static decodeBase256Segment(o,s,l){let c=1+o.getByteOffset();const d=this.unrandomize255State(o.readBits(8),c++);let f;if(f=0===d?o.available()/8|0:d<250?d:250*(d-249)+this.unrandomize255State(o.readBits(8),c++),f<0)throw new K;const h=new Uint8Array(f);for(let y=0;y<f;y++){if(o.available()<8)throw new K;h[y]=this.unrandomize255State(o.readBits(8),c++)}l.push(h);try{s.append(zt.decode(h,we.ISO88591))}catch(y){throw new ar("Platform does not support required encoding: "+y.message)}}static unrandomize255State(o,s){const c=o-(149*s%255+1);return c>=0?c:c+256}}lt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],lt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],lt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],lt.TEXT_SHIFT2_SET_CHARS=lt.C40_SHIFT2_SET_CHARS,lt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class qc{constructor(){this.rsDecoder=new Ri(Be.DATA_MATRIX_FIELD_256)}decode(o){const s=new Ts(o),l=s.getVersion(),c=s.readCodewords(),d=go.getDataBlocks(c,l);let f=0;for(let w of d)f+=w.getNumDataCodewords();const h=new Uint8Array(f),y=d.length;for(let w=0;w<y;w++){const C=d[w],D=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(D,I);for(let S=0;S<I;S++)h[S*y+w]=D[S]}return lt.decode(h)}correctErrors(o,s){const l=new Int32Array(o);try{this.rsDecoder.decode(l,o.length-s)}catch{throw new Rt}for(let c=0;c<s;c++)o[c]=l[c]}}class At{constructor(o){this.image=o,this.rectangleDetector=new ci(this.image)}detect(){const o=this.rectangleDetector.detect();let s=this.detectSolid1(o);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new U;s=this.shiftToModuleCenter(s);const l=s[0],c=s[1],d=s[2],f=s[3];let h=this.transitionsBetween(l,f)+1,y=this.transitionsBetween(d,f)+1;1==(1&h)&&(h+=1),1==(1&y)&&(y+=1),4*h<7*y&&4*y<7*h&&(h=y=Math.max(h,y));let w=At.sampleGrid(this.image,l,c,d,f,h,y);return new Oi(w,[l,c,d,f])}static shiftPoint(o,s,l){let c=(s.getX()-o.getX())/(l+1),d=(s.getY()-o.getY())/(l+1);return new re(o.getX()+c,o.getY()+d)}static moveAway(o,s,l){let c=o.getX(),d=o.getY();return c<s?c-=1:c+=1,d<l?d-=1:d+=1,new re(c,d)}detectSolid1(o){let s=o[0],l=o[1],c=o[3],d=o[2],f=this.transitionsBetween(s,l),h=this.transitionsBetween(l,c),y=this.transitionsBetween(c,d),w=this.transitionsBetween(d,s),C=f,D=[d,s,l,c];return C>h&&(C=h,D[0]=s,D[1]=l,D[2]=c,D[3]=d),C>y&&(C=y,D[0]=l,D[1]=c,D[2]=d,D[3]=s),C>w&&(D[0]=c,D[1]=d,D[2]=s,D[3]=l),D}detectSolid2(o){let s=o[0],l=o[1],c=o[2],d=o[3],f=this.transitionsBetween(s,d),h=At.shiftPoint(l,c,4*(f+1)),y=At.shiftPoint(c,l,4*(f+1));return this.transitionsBetween(h,s)<this.transitionsBetween(y,d)?(o[0]=s,o[1]=l,o[2]=c,o[3]=d):(o[0]=l,o[1]=c,o[2]=d,o[3]=s),o}correctTopRight(o){let s=o[0],l=o[1],c=o[2],d=o[3],f=this.transitionsBetween(s,d),h=this.transitionsBetween(l,d),y=At.shiftPoint(s,l,4*(h+1)),w=At.shiftPoint(c,l,4*(f+1));f=this.transitionsBetween(y,d),h=this.transitionsBetween(w,d);let C=new re(d.getX()+(c.getX()-l.getX())/(f+1),d.getY()+(c.getY()-l.getY())/(f+1)),D=new re(d.getX()+(s.getX()-l.getX())/(h+1),d.getY()+(s.getY()-l.getY())/(h+1));return this.isValid(C)?this.isValid(D)?this.transitionsBetween(y,C)+this.transitionsBetween(w,C)>this.transitionsBetween(y,D)+this.transitionsBetween(w,D)?C:D:C:this.isValid(D)?D:null}shiftToModuleCenter(o){let s=o[0],l=o[1],c=o[2],d=o[3],f=this.transitionsBetween(s,d)+1,h=this.transitionsBetween(c,d)+1,y=At.shiftPoint(s,l,4*h),w=At.shiftPoint(c,l,4*f);f=this.transitionsBetween(y,d)+1,h=this.transitionsBetween(w,d)+1,1==(1&f)&&(f+=1),1==(1&h)&&(h+=1);let I,S,C=(s.getX()+l.getX()+c.getX()+d.getX())/4,D=(s.getY()+l.getY()+c.getY()+d.getY())/4;return s=At.moveAway(s,C,D),l=At.moveAway(l,C,D),c=At.moveAway(c,C,D),d=At.moveAway(d,C,D),y=At.shiftPoint(s,l,4*h),y=At.shiftPoint(y,d,4*f),I=At.shiftPoint(l,s,4*h),I=At.shiftPoint(I,c,4*f),w=At.shiftPoint(c,d,4*h),w=At.shiftPoint(w,l,4*f),S=At.shiftPoint(d,c,4*h),S=At.shiftPoint(S,s,4*f),[y,I,w,S]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,s,l,c,d,f,h){return Ar.getInstance().sampleGrid(o,f,h,.5,.5,f-.5,.5,f-.5,h-.5,.5,h-.5,s.getX(),s.getY(),d.getX(),d.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(o,s){let l=Math.trunc(o.getX()),c=Math.trunc(o.getY()),d=Math.trunc(s.getX()),f=Math.trunc(s.getY()),h=Math.abs(f-c)>Math.abs(d-l);if(h){let M=l;l=c,c=M,M=d,d=f,f=M}let y=Math.abs(d-l),w=Math.abs(f-c),C=-y/2,D=c<f?1:-1,I=l<d?1:-1,S=0,b=this.image.get(h?c:l,h?l:c);for(let M=l,R=c;M!==d;M+=I){let O=this.image.get(h?R:M,h?M:R);if(O!==b&&(S++,b=O),C+=w,C>0){if(R===f)break;R+=D,C-=y}}return S}}let fi=(()=>{class x{constructor(){this.decoder=new qc}decode(s,l=null){let c,d;if(null!=l&&l.has(st.PURE_BARCODE)){const C=x.extractPureBits(s.getBlackMatrix());c=this.decoder.decode(C),d=x.NO_POINTS}else{const C=new At(s.getBlackMatrix()).detect();c=this.decoder.decode(C.getBits()),d=C.getPoints()}const f=c.getRawBytes(),h=new gt(c.getText(),f,8*f.length,d,ae.DATA_MATRIX,tt.currentTimeMillis()),y=c.getByteSegments();null!=y&&h.putMetadata(Oe.BYTE_SEGMENTS,y);const w=c.getECLevel();return null!=w&&h.putMetadata(Oe.ERROR_CORRECTION_LEVEL,w),h}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(null==l||null==c)throw new U;const d=this.moduleSize(l,s);let f=l[1],y=l[0];const C=(c[0]-y+1)/d,D=(c[1]-f+1)/d;if(C<=0||D<=0)throw new U;const I=d/2;f+=I,y+=I;const S=new Ft(C,D);for(let b=0;b<D;b++){const M=f+b*d;for(let R=0;R<C;R++)s.get(y+R*d,M)&&S.set(R,b)}return S}static moduleSize(s,l){const c=l.getWidth();let d=s[0];const f=s[1];for(;d<c&&l.get(d,f);)d++;if(d===c)throw new U;const h=d-s[0];if(0===h)throw new U;return h}}return x.NO_POINTS=[],x})();var lr=(()=>{return(x=lr||(lr={}))[x.L=0]="L",x[x.M=1]="M",x[x.Q=2]="Q",x[x.H=3]="H",lr;var x})();class ce{constructor(o,s,l){this.value=o,this.stringValue=s,this.bits=l,ce.FOR_BITS.set(l,this),ce.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return ce.L;case"M":return ce.M;case"Q":return ce.Q;case"H":return ce.H;default:throw new gn(o+"not available")}}toString(){return this.stringValue}equals(o){return o instanceof ce&&this.value===o.value}static forBits(o){if(o<0||o>=ce.FOR_BITS.size)throw new te;return ce.FOR_BITS.get(o)}}ce.FOR_BITS=new Map,ce.FOR_VALUE=new Map,ce.L=new ce(lr.L,"L",1),ce.M=new ce(lr.M,"M",0),ce.Q=new ce(lr.Q,"Q",3),ce.H=new ce(lr.H,"H",2);class kt{constructor(o){this.errorCorrectionLevel=ce.forBits(o>>3&3),this.dataMask=7&o}static numBitsDiffering(o,s){return Ce.bitCount(o^s)}static decodeFormatInformation(o,s){const l=kt.doDecodeFormatInformation(o,s);return null!==l?l:kt.doDecodeFormatInformation(o^kt.FORMAT_INFO_MASK_QR,s^kt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,s){let l=Number.MAX_SAFE_INTEGER,c=0;for(const d of kt.FORMAT_INFO_DECODE_LOOKUP){const f=d[0];if(f===o||f===s)return new kt(d[1]);let h=kt.numBitsDiffering(o,f);h<l&&(c=d[1],l=h),o!==s&&(h=kt.numBitsDiffering(s,f),h<l&&(c=d[1],l=h))}return l<=3?new kt(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){return o instanceof kt&&this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}kt.FORMAT_INFO_MASK_QR=21522,kt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class P{constructor(o,...s){this.ecCodewordsPerBlock=o,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const s=this.ecBlocks;for(const l of s)o+=l.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class _{constructor(o,s){this.count=o,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class H{constructor(o,s,...l){this.versionNumber=o,this.alignmentPatternCenters=s,this.ecBlocks=l;let c=0;const d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(const h of f)c+=h.getCount()*(h.getDataCodewords()+d);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!=1)throw new K;try{return this.getVersionForNumber((o-17)/4)}catch{throw new K}}static getVersionForNumber(o){if(o<1||o>40)throw new te;return H.VERSIONS[o-1]}static decodeVersionInformation(o){let s=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<H.VERSION_DECODE_INFO.length;c++){const d=H.VERSION_DECODE_INFO[c];if(d===o)return H.getVersionForNumber(c+7);const f=kt.numBitsDiffering(o,d);f<s&&(l=c+7,s=f)}return s<=3?H.getVersionForNumber(l):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),s=new Ft(o);s.setRegion(0,0,9,9),s.setRegion(o-8,0,8,9),s.setRegion(0,o-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const d=this.alignmentPatternCenters[c]-2;for(let f=0;f<l;f++)0===c&&(0===f||f===l-1)||c===l-1&&0===f||s.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return s.setRegion(6,9,1,o-17),s.setRegion(9,6,o-17,1),this.versionNumber>6&&(s.setRegion(o-11,0,3,6),s.setRegion(0,o-11,6,3)),s}toString(){return""+this.versionNumber}}H.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),H.VERSIONS=[new H(1,new Int32Array(0),new P(7,new _(1,19)),new P(10,new _(1,16)),new P(13,new _(1,13)),new P(17,new _(1,9))),new H(2,Int32Array.from([6,18]),new P(10,new _(1,34)),new P(16,new _(1,28)),new P(22,new _(1,22)),new P(28,new _(1,16))),new H(3,Int32Array.from([6,22]),new P(15,new _(1,55)),new P(26,new _(1,44)),new P(18,new _(2,17)),new P(22,new _(2,13))),new H(4,Int32Array.from([6,26]),new P(20,new _(1,80)),new P(18,new _(2,32)),new P(26,new _(2,24)),new P(16,new _(4,9))),new H(5,Int32Array.from([6,30]),new P(26,new _(1,108)),new P(24,new _(2,43)),new P(18,new _(2,15),new _(2,16)),new P(22,new _(2,11),new _(2,12))),new H(6,Int32Array.from([6,34]),new P(18,new _(2,68)),new P(16,new _(4,27)),new P(24,new _(4,19)),new P(28,new _(4,15))),new H(7,Int32Array.from([6,22,38]),new P(20,new _(2,78)),new P(18,new _(4,31)),new P(18,new _(2,14),new _(4,15)),new P(26,new _(4,13),new _(1,14))),new H(8,Int32Array.from([6,24,42]),new P(24,new _(2,97)),new P(22,new _(2,38),new _(2,39)),new P(22,new _(4,18),new _(2,19)),new P(26,new _(4,14),new _(2,15))),new H(9,Int32Array.from([6,26,46]),new P(30,new _(2,116)),new P(22,new _(3,36),new _(2,37)),new P(20,new _(4,16),new _(4,17)),new P(24,new _(4,12),new _(4,13))),new H(10,Int32Array.from([6,28,50]),new P(18,new _(2,68),new _(2,69)),new P(26,new _(4,43),new _(1,44)),new P(24,new _(6,19),new _(2,20)),new P(28,new _(6,15),new _(2,16))),new H(11,Int32Array.from([6,30,54]),new P(20,new _(4,81)),new P(30,new _(1,50),new _(4,51)),new P(28,new _(4,22),new _(4,23)),new P(24,new _(3,12),new _(8,13))),new H(12,Int32Array.from([6,32,58]),new P(24,new _(2,92),new _(2,93)),new P(22,new _(6,36),new _(2,37)),new P(26,new _(4,20),new _(6,21)),new P(28,new _(7,14),new _(4,15))),new H(13,Int32Array.from([6,34,62]),new P(26,new _(4,107)),new P(22,new _(8,37),new _(1,38)),new P(24,new _(8,20),new _(4,21)),new P(22,new _(12,11),new _(4,12))),new H(14,Int32Array.from([6,26,46,66]),new P(30,new _(3,115),new _(1,116)),new P(24,new _(4,40),new _(5,41)),new P(20,new _(11,16),new _(5,17)),new P(24,new _(11,12),new _(5,13))),new H(15,Int32Array.from([6,26,48,70]),new P(22,new _(5,87),new _(1,88)),new P(24,new _(5,41),new _(5,42)),new P(30,new _(5,24),new _(7,25)),new P(24,new _(11,12),new _(7,13))),new H(16,Int32Array.from([6,26,50,74]),new P(24,new _(5,98),new _(1,99)),new P(28,new _(7,45),new _(3,46)),new P(24,new _(15,19),new _(2,20)),new P(30,new _(3,15),new _(13,16))),new H(17,Int32Array.from([6,30,54,78]),new P(28,new _(1,107),new _(5,108)),new P(28,new _(10,46),new _(1,47)),new P(28,new _(1,22),new _(15,23)),new P(28,new _(2,14),new _(17,15))),new H(18,Int32Array.from([6,30,56,82]),new P(30,new _(5,120),new _(1,121)),new P(26,new _(9,43),new _(4,44)),new P(28,new _(17,22),new _(1,23)),new P(28,new _(2,14),new _(19,15))),new H(19,Int32Array.from([6,30,58,86]),new P(28,new _(3,113),new _(4,114)),new P(26,new _(3,44),new _(11,45)),new P(26,new _(17,21),new _(4,22)),new P(26,new _(9,13),new _(16,14))),new H(20,Int32Array.from([6,34,62,90]),new P(28,new _(3,107),new _(5,108)),new P(26,new _(3,41),new _(13,42)),new P(30,new _(15,24),new _(5,25)),new P(28,new _(15,15),new _(10,16))),new H(21,Int32Array.from([6,28,50,72,94]),new P(28,new _(4,116),new _(4,117)),new P(26,new _(17,42)),new P(28,new _(17,22),new _(6,23)),new P(30,new _(19,16),new _(6,17))),new H(22,Int32Array.from([6,26,50,74,98]),new P(28,new _(2,111),new _(7,112)),new P(28,new _(17,46)),new P(30,new _(7,24),new _(16,25)),new P(24,new _(34,13))),new H(23,Int32Array.from([6,30,54,78,102]),new P(30,new _(4,121),new _(5,122)),new P(28,new _(4,47),new _(14,48)),new P(30,new _(11,24),new _(14,25)),new P(30,new _(16,15),new _(14,16))),new H(24,Int32Array.from([6,28,54,80,106]),new P(30,new _(6,117),new _(4,118)),new P(28,new _(6,45),new _(14,46)),new P(30,new _(11,24),new _(16,25)),new P(30,new _(30,16),new _(2,17))),new H(25,Int32Array.from([6,32,58,84,110]),new P(26,new _(8,106),new _(4,107)),new P(28,new _(8,47),new _(13,48)),new P(30,new _(7,24),new _(22,25)),new P(30,new _(22,15),new _(13,16))),new H(26,Int32Array.from([6,30,58,86,114]),new P(28,new _(10,114),new _(2,115)),new P(28,new _(19,46),new _(4,47)),new P(28,new _(28,22),new _(6,23)),new P(30,new _(33,16),new _(4,17))),new H(27,Int32Array.from([6,34,62,90,118]),new P(30,new _(8,122),new _(4,123)),new P(28,new _(22,45),new _(3,46)),new P(30,new _(8,23),new _(26,24)),new P(30,new _(12,15),new _(28,16))),new H(28,Int32Array.from([6,26,50,74,98,122]),new P(30,new _(3,117),new _(10,118)),new P(28,new _(3,45),new _(23,46)),new P(30,new _(4,24),new _(31,25)),new P(30,new _(11,15),new _(31,16))),new H(29,Int32Array.from([6,30,54,78,102,126]),new P(30,new _(7,116),new _(7,117)),new P(28,new _(21,45),new _(7,46)),new P(30,new _(1,23),new _(37,24)),new P(30,new _(19,15),new _(26,16))),new H(30,Int32Array.from([6,26,52,78,104,130]),new P(30,new _(5,115),new _(10,116)),new P(28,new _(19,47),new _(10,48)),new P(30,new _(15,24),new _(25,25)),new P(30,new _(23,15),new _(25,16))),new H(31,Int32Array.from([6,30,56,82,108,134]),new P(30,new _(13,115),new _(3,116)),new P(28,new _(2,46),new _(29,47)),new P(30,new _(42,24),new _(1,25)),new P(30,new _(23,15),new _(28,16))),new H(32,Int32Array.from([6,34,60,86,112,138]),new P(30,new _(17,115)),new P(28,new _(10,46),new _(23,47)),new P(30,new _(10,24),new _(35,25)),new P(30,new _(19,15),new _(35,16))),new H(33,Int32Array.from([6,30,58,86,114,142]),new P(30,new _(17,115),new _(1,116)),new P(28,new _(14,46),new _(21,47)),new P(30,new _(29,24),new _(19,25)),new P(30,new _(11,15),new _(46,16))),new H(34,Int32Array.from([6,34,62,90,118,146]),new P(30,new _(13,115),new _(6,116)),new P(28,new _(14,46),new _(23,47)),new P(30,new _(44,24),new _(7,25)),new P(30,new _(59,16),new _(1,17))),new H(35,Int32Array.from([6,30,54,78,102,126,150]),new P(30,new _(12,121),new _(7,122)),new P(28,new _(12,47),new _(26,48)),new P(30,new _(39,24),new _(14,25)),new P(30,new _(22,15),new _(41,16))),new H(36,Int32Array.from([6,24,50,76,102,128,154]),new P(30,new _(6,121),new _(14,122)),new P(28,new _(6,47),new _(34,48)),new P(30,new _(46,24),new _(10,25)),new P(30,new _(2,15),new _(64,16))),new H(37,Int32Array.from([6,28,54,80,106,132,158]),new P(30,new _(17,122),new _(4,123)),new P(28,new _(29,46),new _(14,47)),new P(30,new _(49,24),new _(10,25)),new P(30,new _(24,15),new _(46,16))),new H(38,Int32Array.from([6,32,58,84,110,136,162]),new P(30,new _(4,122),new _(18,123)),new P(28,new _(13,46),new _(32,47)),new P(30,new _(48,24),new _(14,25)),new P(30,new _(42,15),new _(32,16))),new H(39,Int32Array.from([6,26,54,82,110,138,166]),new P(30,new _(20,117),new _(4,118)),new P(28,new _(40,47),new _(7,48)),new P(30,new _(43,24),new _(22,25)),new P(30,new _(10,15),new _(67,16))),new H(40,Int32Array.from([6,30,58,86,114,142,170]),new P(30,new _(19,118),new _(6,119)),new P(28,new _(18,47),new _(31,48)),new P(30,new _(34,24),new _(34,25)),new P(30,new _(20,15),new _(61,16)))];var It=(()=>{return(x=It||(It={}))[x.DATA_MASK_000=0]="DATA_MASK_000",x[x.DATA_MASK_001=1]="DATA_MASK_001",x[x.DATA_MASK_010=2]="DATA_MASK_010",x[x.DATA_MASK_011=3]="DATA_MASK_011",x[x.DATA_MASK_100=4]="DATA_MASK_100",x[x.DATA_MASK_101=5]="DATA_MASK_101",x[x.DATA_MASK_110=6]="DATA_MASK_110",x[x.DATA_MASK_111=7]="DATA_MASK_111",It;var x})();class ln{constructor(o,s){this.value=o,this.isMasked=s}unmaskBitMatrix(o,s){for(let l=0;l<s;l++)for(let c=0;c<s;c++)this.isMasked(l,c)&&o.flip(c,l)}}ln.values=new Map([[It.DATA_MASK_000,new ln(It.DATA_MASK_000,(x,o)=>0==(x+o&1))],[It.DATA_MASK_001,new ln(It.DATA_MASK_001,(x,o)=>0==(1&x))],[It.DATA_MASK_010,new ln(It.DATA_MASK_010,(x,o)=>o%3==0)],[It.DATA_MASK_011,new ln(It.DATA_MASK_011,(x,o)=>(x+o)%3==0)],[It.DATA_MASK_100,new ln(It.DATA_MASK_100,(x,o)=>0==(Math.floor(x/2)+Math.floor(o/3)&1))],[It.DATA_MASK_101,new ln(It.DATA_MASK_101,(x,o)=>x*o%6==0)],[It.DATA_MASK_110,new ln(It.DATA_MASK_110,(x,o)=>x*o%6<3)],[It.DATA_MASK_111,new ln(It.DATA_MASK_111,(x,o)=>0==(x+o+x*o%3&1))]]);class Lh{constructor(o){const s=o.getHeight();if(s<21||1!=(3&s))throw new K;this.bitMatrix=o}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;let o=0;for(let d=0;d<6;d++)o=this.copyBit(d,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let d=5;d>=0;d--)o=this.copyBit(8,d,o);const s=this.bitMatrix.getHeight();let l=0;const c=s-7;for(let d=s-1;d>=c;d--)l=this.copyBit(8,d,l);for(let d=s-8;d<s;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=kt.decodeFormatInformation(o,l),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new K}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;const o=this.bitMatrix.getHeight(),s=Math.floor((o-17)/4);if(s<=6)return H.getVersionForNumber(s);let l=0;const c=o-11;for(let f=5;f>=0;f--)for(let h=o-9;h>=c;h--)l=this.copyBit(h,f,l);let d=H.decodeVersionInformation(l);if(null!==d&&d.getDimensionForVersion()===o)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let h=o-9;h>=c;h--)l=this.copyBit(f,h,l);if(d=H.decodeVersionInformation(l),null!==d&&d.getDimensionForVersion()===o)return this.parsedVersion=d,d;throw new K}copyBit(o,s,l){return(this.isMirror?this.bitMatrix.get(s,o):this.bitMatrix.get(o,s))?l<<1|1:l<<1}readCodewords(){const o=this.readFormatInformation(),s=this.readVersion(),l=ln.values.get(o.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const d=s.buildFunctionPattern();let f=!0;const h=new Uint8Array(s.getTotalCodewords());let y=0,w=0,C=0;for(let D=c-1;D>0;D-=2){6===D&&D--;for(let I=0;I<c;I++){const S=f?c-1-I:I;for(let b=0;b<2;b++)d.get(D-b,S)||(C++,w<<=1,this.bitMatrix.get(D-b,S)&&(w|=1),8===C&&(h[y++]=w,C=0,w=0))}f=!f}if(y!==s.getTotalCodewords())throw new K;return h}remask(){if(null===this.parsedFormatInfo)return;const o=ln.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,s)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let s=0,l=o.getWidth();s<l;s++)for(let c=s+1,d=o.getHeight();c<d;c++)o.get(s,c)!==o.get(c,s)&&(o.flip(c,s),o.flip(s,c))}}class po{constructor(o,s){this.numDataCodewords=o,this.codewords=s}static getDataBlocks(o,s,l){if(o.length!==s.getTotalCodewords())throw new te;const c=s.getECBlocksForLevel(l);let d=0;const f=c.getECBlocks();for(const b of f)d+=b.getCount();const h=new Array(d);let y=0;for(const b of f)for(let M=0;M<b.getCount();M++){const R=b.getDataCodewords(),O=c.getECCodewordsPerBlock()+R;h[y++]=new po(R,new Uint8Array(O))}const w=h[0].codewords.length;let C=h.length-1;for(;C>=0&&h[C].codewords.length!==w;)C--;C++;const D=w-c.getECCodewordsPerBlock();let I=0;for(let b=0;b<D;b++)for(let M=0;M<y;M++)h[M].codewords[b]=o[I++];for(let b=C;b<y;b++)h[b].codewords[D]=o[I++];const S=h[0].codewords.length;for(let b=D;b<S;b++)for(let M=0;M<y;M++)h[M].codewords[M<C?b:b+1]=o[I++];return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Y=(()=>{return(x=Y||(Y={}))[x.TERMINATOR=0]="TERMINATOR",x[x.NUMERIC=1]="NUMERIC",x[x.ALPHANUMERIC=2]="ALPHANUMERIC",x[x.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",x[x.BYTE=4]="BYTE",x[x.ECI=5]="ECI",x[x.KANJI=6]="KANJI",x[x.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",x[x.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",x[x.HANZI=9]="HANZI",Y;var x})();class oe{constructor(o,s,l,c){this.value=o,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=c,oe.FOR_BITS.set(c,this),oe.FOR_VALUE.set(o,this)}static forBits(o){const s=oe.FOR_BITS.get(o);if(void 0===s)throw new te;return s}getCharacterCountBits(o){const s=o.getVersionNumber();let l;return l=s<=9?0:s<=26?1:2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(o){return o instanceof oe&&this.value===o.value}toString(){return this.stringValue}}oe.FOR_BITS=new Map,oe.FOR_VALUE=new Map,oe.TERMINATOR=new oe(Y.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),oe.NUMERIC=new oe(Y.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),oe.ALPHANUMERIC=new oe(Y.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),oe.STRUCTURED_APPEND=new oe(Y.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),oe.BYTE=new oe(Y.BYTE,"BYTE",Int32Array.from([8,16,16]),4),oe.ECI=new oe(Y.ECI,"ECI",Int32Array.from([0,0,0]),7),oe.KANJI=new oe(Y.KANJI,"KANJI",Int32Array.from([8,10,12]),8),oe.FNC1_FIRST_POSITION=new oe(Y.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),oe.FNC1_SECOND_POSITION=new oe(Y.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),oe.HANZI=new oe(Y.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let Ee=(()=>{class x{static decode(s,l,c,d){const f=new Ms(s);let h=new qe;const y=new Array;let w=-1,C=-1;try{let S,D=null,I=!1;do{if(f.available()<4)S=oe.TERMINATOR;else{const b=f.readBits(4);S=oe.forBits(b)}switch(S){case oe.TERMINATOR:break;case oe.FNC1_FIRST_POSITION:case oe.FNC1_SECOND_POSITION:I=!0;break;case oe.STRUCTURED_APPEND:if(f.available()<16)throw new K;w=f.readBits(8),C=f.readBits(8);break;case oe.ECI:const b=x.parseECIValue(f);if(D=X.getCharacterSetECIByValue(b),null===D)throw new K;break;case oe.HANZI:const M=f.readBits(4),R=f.readBits(S.getCharacterCountBits(l));M===x.GB2312_SUBSET&&x.decodeHanziSegment(f,h,R);break;default:const O=f.readBits(S.getCharacterCountBits(l));switch(S){case oe.NUMERIC:x.decodeNumericSegment(f,h,O);break;case oe.ALPHANUMERIC:x.decodeAlphanumericSegment(f,h,O,I);break;case oe.BYTE:x.decodeByteSegment(f,h,O,D,y,d);break;case oe.KANJI:x.decodeKanjiSegment(f,h,O);break;default:throw new K}}}while(S!==oe.TERMINATOR)}catch{throw new K}return new Mi(s,h.toString(),0===y.length?null:y,null===c?null:c.toString(),w,C)}static decodeHanziSegment(s,l,c){if(13*c>s.available())throw new K;const d=new Uint8Array(2*c);let f=0;for(;c>0;){const h=s.readBits(13);let y=h/96<<8&4294967295|h%96;y+=y<959?41377:42657,d[f]=y>>8&255,d[f+1]=255&y,f+=2,c--}try{l.append(zt.decode(d,we.GB2312))}catch(h){throw new K(h)}}static decodeKanjiSegment(s,l,c){if(13*c>s.available())throw new K;const d=new Uint8Array(2*c);let f=0;for(;c>0;){const h=s.readBits(13);let y=h/192<<8&4294967295|h%192;y+=y<7936?33088:49472,d[f]=y>>8,d[f+1]=y,f+=2,c--}try{l.append(zt.decode(d,we.SHIFT_JIS))}catch(h){throw new K(h)}}static decodeByteSegment(s,l,c,d,f,h){if(8*c>s.available())throw new K;const y=new Uint8Array(c);for(let C=0;C<c;C++)y[C]=s.readBits(8);let w;w=null===d?we.guessEncoding(y,h):d.getName();try{l.append(zt.decode(y,w))}catch(C){throw new K(C)}f.push(y)}static toAlphaNumericChar(s){if(s>=x.ALPHANUMERIC_CHARS.length)throw new K;return x.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,l,c,d){const f=l.length();for(;c>1;){if(s.available()<11)throw new K;const h=s.readBits(11);l.append(x.toAlphaNumericChar(Math.floor(h/45))),l.append(x.toAlphaNumericChar(h%45)),c-=2}if(1===c){if(s.available()<6)throw new K;l.append(x.toAlphaNumericChar(s.readBits(6)))}if(d)for(let h=f;h<l.length();h++)"%"===l.charAt(h)&&(h<l.length()-1&&"%"===l.charAt(h+1)?l.deleteCharAt(h+1):l.setCharAt(h,String.fromCharCode(29)))}static decodeNumericSegment(s,l,c){for(;c>=3;){if(s.available()<10)throw new K;const d=s.readBits(10);if(d>=1e3)throw new K;l.append(x.toAlphaNumericChar(Math.floor(d/100))),l.append(x.toAlphaNumericChar(Math.floor(d/10)%10)),l.append(x.toAlphaNumericChar(d%10)),c-=3}if(2===c){if(s.available()<7)throw new K;const d=s.readBits(7);if(d>=100)throw new K;l.append(x.toAlphaNumericChar(Math.floor(d/10))),l.append(x.toAlphaNumericChar(d%10))}else if(1===c){if(s.available()<4)throw new K;const d=s.readBits(4);if(d>=10)throw new K;l.append(x.toAlphaNumericChar(d))}}static parseECIValue(s){const l=s.readBits(8);if(!(128&l))return 127&l;if(128==(192&l))return(63&l)<<8&4294967295|s.readBits(8);if(192==(224&l))return(31&l)<<16&4294967295|s.readBits(16);throw new K}}return x.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",x.GB2312_SUBSET=1,x})();class We{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||null===o||o.length<3)return;const s=o[0];o[0]=o[2],o[2]=s}}class Qc{constructor(){this.rsDecoder=new Ri(Be.QR_CODE_FIELD_256)}decodeBooleanArray(o,s){return this.decodeBitMatrix(Ft.parseFromBooleanArray(o),s)}decodeBitMatrix(o,s){const l=new Lh(o);let c=null;try{return this.decodeBitMatrixParser(l,s)}catch(d){c=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,s);return d.setOther(new We(!0)),d}catch(d){throw null!==c?c:d}}decodeBitMatrixParser(o,s){const l=o.readVersion(),c=o.readFormatInformation().getErrorCorrectionLevel(),d=o.readCodewords(),f=po.getDataBlocks(d,l,c);let h=0;for(const C of f)h+=C.getNumDataCodewords();const y=new Uint8Array(h);let w=0;for(const C of f){const D=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(D,I);for(let S=0;S<I;S++)y[w++]=D[S]}return Ee.decode(y,l,c,s)}correctErrors(o,s){const l=new Int32Array(o);try{this.rsDecoder.decode(l,o.length-s)}catch{throw new Rt}for(let c=0;c<s;c++)o[c]=l[c]}}class Qa extends re{constructor(o,s,l){super(o,s),this.estimatedModuleSize=l}aboutEquals(o,s,l){if(Math.abs(s-this.getY())<=o&&Math.abs(l-this.getX())<=o){const c=Math.abs(o-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(o,s,l){const c=(this.getX()+s)/2,d=(this.getY()+o)/2;return new Qa(c,d,(this.estimatedModuleSize+l)/2)}}class mo{constructor(o,s,l,c,d,f,h){this.image=o,this.startX=s,this.startY=l,this.width=c,this.height=d,this.moduleSize=f,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,s=this.height,c=o+this.width,d=this.startY+s/2,f=new Int32Array(3),h=this.image;for(let y=0;y<s;y++){const w=d+(1&y?-Math.floor((y+1)/2):Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let C=o;for(;C<c&&!h.get(C,w);)C++;let D=0;for(;C<c;){if(h.get(C,w))if(1===D)f[1]++;else if(2===D){if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,w,C);if(null!==I)return I}f[0]=f[2],f[1]=1,f[2]=0,D=1}else f[++D]++;else 1===D&&D++,f[D]++;C++}if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,w,c);if(null!==I)return I}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new U}static centerFromEnd(o,s){return s-o[2]-o[1]/2}foundPatternCross(o){const s=this.moduleSize,l=s/2;for(let c=0;c<3;c++)if(Math.abs(s-o[c])>=l)return!1;return!0}crossCheckVertical(o,s,l,c){const d=this.image,f=d.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let y=o;for(;y>=0&&d.get(s,y)&&h[1]<=l;)h[1]++,y--;if(y<0||h[1]>l)return NaN;for(;y>=0&&!d.get(s,y)&&h[0]<=l;)h[0]++,y--;if(h[0]>l)return NaN;for(y=o+1;y<f&&d.get(s,y)&&h[1]<=l;)h[1]++,y++;if(y===f||h[1]>l)return NaN;for(;y<f&&!d.get(s,y)&&h[2]<=l;)h[2]++,y++;return h[2]>l||5*Math.abs(h[0]+h[1]+h[2]-c)>=2*c?NaN:this.foundPatternCross(h)?mo.centerFromEnd(h,y):NaN}handlePossibleCenter(o,s,l){const c=o[0]+o[1]+o[2],d=mo.centerFromEnd(o,l),f=this.crossCheckVertical(s,d,2*o[1],c);if(!isNaN(f)){const h=(o[0]+o[1]+o[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(h,f,d))return w.combineEstimate(f,d,h);const y=new Qa(d,f,h);this.possibleCenters.push(y),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class hi extends re{constructor(o,s,l,c){super(o,s),this.estimatedModuleSize=l,this.count=c,void 0===c&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,s,l){if(Math.abs(s-this.getY())<=o&&Math.abs(l-this.getX())<=o){const c=Math.abs(o-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(o,s,l){const c=this.count+1,d=(this.count*this.getX()+s)/c,f=(this.count*this.getY()+o)/c;return new hi(d,f,(this.count*this.estimatedModuleSize+l)/c,c)}}class mn{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let Ph=(()=>{class x{constructor(s,l){this.image=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const l=null!=s&&void 0!==s.get(st.TRY_HARDER),c=null!=s&&void 0!==s.get(st.PURE_BARCODE),d=this.image,f=d.getHeight(),h=d.getWidth();let y=Math.floor(3*f/(4*x.MAX_MODULES));(y<x.MIN_SKIP||l)&&(y=x.MIN_SKIP);let w=!1;const C=new Int32Array(5);for(let I=y-1;I<f&&!w;I+=y){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let S=0;for(let b=0;b<h;b++)if(d.get(b,I))1==(1&S)&&S++,C[S]++;else if(1&S)C[S]++;else if(4===S)if(x.foundPatternCross(C)){if(!0!==this.handlePossibleCenter(C,I,b,c)){C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,S=3;continue}if(y=2,!0===this.hasSkipped)w=this.haveMultiplyConfirmedCenters();else{const R=this.findRowSkip();R>C[2]&&(I+=R-C[2]-y,b=h-1)}S=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,S=3;else C[++S]++;x.foundPatternCross(C)&&!0===this.handlePossibleCenter(C,I,h,c)&&(y=C[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return re.orderBestPatterns(D),new mn(D)}static centerFromEnd(s,l){return l-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let l=0;for(let f=0;f<5;f++){const h=s[f];if(0===h)return!1;l+=h}if(l<7)return!1;const c=l/7,d=c/2;return Math.abs(c-s[0])<d&&Math.abs(c-s[1])<d&&Math.abs(3*c-s[2])<3*d&&Math.abs(c-s[3])<d&&Math.abs(c-s[4])<d}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,l,c,d){const f=this.getCrossCheckStateCount();let h=0;const y=this.image;for(;s>=h&&l>=h&&y.get(l-h,s-h);)f[2]++,h++;if(s<h||l<h)return!1;for(;s>=h&&l>=h&&!y.get(l-h,s-h)&&f[1]<=c;)f[1]++,h++;if(s<h||l<h||f[1]>c)return!1;for(;s>=h&&l>=h&&y.get(l-h,s-h)&&f[0]<=c;)f[0]++,h++;if(f[0]>c)return!1;const w=y.getHeight(),C=y.getWidth();for(h=1;s+h<w&&l+h<C&&y.get(l+h,s+h);)f[2]++,h++;if(s+h>=w||l+h>=C)return!1;for(;s+h<w&&l+h<C&&!y.get(l+h,s+h)&&f[3]<c;)f[3]++,h++;if(s+h>=w||l+h>=C||f[3]>=c)return!1;for(;s+h<w&&l+h<C&&y.get(l+h,s+h)&&f[4]<c;)f[4]++,h++;return!(f[4]>=c)&&Math.abs(f[0]+f[1]+f[2]+f[3]+f[4]-d)<2*d&&x.foundPatternCross(f)}crossCheckVertical(s,l,c,d){const f=this.image,h=f.getHeight(),y=this.getCrossCheckStateCount();let w=s;for(;w>=0&&f.get(l,w);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(l,w)&&y[1]<=c;)y[1]++,w--;if(w<0||y[1]>c)return NaN;for(;w>=0&&f.get(l,w)&&y[0]<=c;)y[0]++,w--;if(y[0]>c)return NaN;for(w=s+1;w<h&&f.get(l,w);)y[2]++,w++;if(w===h)return NaN;for(;w<h&&!f.get(l,w)&&y[3]<c;)y[3]++,w++;if(w===h||y[3]>=c)return NaN;for(;w<h&&f.get(l,w)&&y[4]<c;)y[4]++,w++;return y[4]>=c||5*Math.abs(y[0]+y[1]+y[2]+y[3]+y[4]-d)>=2*d?NaN:x.foundPatternCross(y)?x.centerFromEnd(y,w):NaN}crossCheckHorizontal(s,l,c,d){const f=this.image,h=f.getWidth(),y=this.getCrossCheckStateCount();let w=s;for(;w>=0&&f.get(w,l);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,l)&&y[1]<=c;)y[1]++,w--;if(w<0||y[1]>c)return NaN;for(;w>=0&&f.get(w,l)&&y[0]<=c;)y[0]++,w--;if(y[0]>c)return NaN;for(w=s+1;w<h&&f.get(w,l);)y[2]++,w++;if(w===h)return NaN;for(;w<h&&!f.get(w,l)&&y[3]<c;)y[3]++,w++;if(w===h||y[3]>=c)return NaN;for(;w<h&&f.get(w,l)&&y[4]<c;)y[4]++,w++;return y[4]>=c||5*Math.abs(y[0]+y[1]+y[2]+y[3]+y[4]-d)>=d?NaN:x.foundPatternCross(y)?x.centerFromEnd(y,w):NaN}handlePossibleCenter(s,l,c,d){const f=s[0]+s[1]+s[2]+s[3]+s[4];let h=x.centerFromEnd(s,c),y=this.crossCheckVertical(l,Math.floor(h),s[2],f);if(!isNaN(y)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(y),s[2],f),!isNaN(h)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(h),s[2],f)))){const w=f/7;let C=!1;const D=this.possibleCenters;for(let I=0,S=D.length;I<S;I++){const b=D[I];if(b.aboutEquals(w,y,h)){D[I]=b.combineEstimate(y,h,w),C=!0;break}}if(!C){const I=new hi(h,y,w);D.push(I),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(I)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const c of this.possibleCenters)if(c.getCount()>=x.CENTER_QUORUM){if(null!=l)return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-c.getX())-Math.abs(l.getY()-c.getY()))/2);l=c}return 0}haveMultiplyConfirmedCenters(){let s=0,l=0;const c=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=x.CENTER_QUORUM&&(s++,l+=h.getEstimatedModuleSize());if(s<3)return!1;const d=l/c;let f=0;for(const h of this.possibleCenters)f+=Math.abs(h.getEstimatedModuleSize()-d);return f<=.05*l}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new U;const l=this.possibleCenters;let c;if(s>3){let d=0,f=0;for(const w of this.possibleCenters){const C=w.getEstimatedModuleSize();d+=C,f+=C*C}c=d/s;let h=Math.sqrt(f/s-c*c);l.sort((w,C)=>{const D=Math.abs(C.getEstimatedModuleSize()-c),I=Math.abs(w.getEstimatedModuleSize()-c);return D<I?-1:D>I?1:0});const y=Math.max(.2*c,h);for(let w=0;w<l.length&&l.length>3;w++)Math.abs(l[w].getEstimatedModuleSize()-c)>y&&(l.splice(w,1),w--)}if(l.length>3){let d=0;for(const f of l)d+=f.getEstimatedModuleSize();c=d/l.length,l.sort((f,h)=>{if(h.getCount()===f.getCount()){const y=Math.abs(h.getEstimatedModuleSize()-c),w=Math.abs(f.getEstimatedModuleSize()-c);return y<w?1:y>w?-1:0}return h.getCount()-f.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}return x.CENTER_QUORUM=2,x.MIN_SKIP=3,x.MAX_MODULES=57,x})();class Bi{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=null==o?null:o.get(st.NEED_RESULT_POINT_CALLBACK);const l=new Ph(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(l)}processFinderPatternInfo(o){const s=o.getTopLeft(),l=o.getTopRight(),c=o.getBottomLeft(),d=this.calculateModuleSize(s,l,c);if(d<1)throw new U("No pattern found in proccess finder.");const f=Bi.computeDimension(s,l,c,d),h=H.getProvisionalVersionForDimension(f),y=h.getDimensionForVersion()-7;let w=null;if(h.getAlignmentPatternCenters().length>0){const S=l.getX()-s.getX()+c.getX(),b=l.getY()-s.getY()+c.getY(),M=1-3/y,R=Math.floor(s.getX()+M*(S-s.getX())),O=Math.floor(s.getY()+M*(b-s.getY()));for(let $=4;$<=16;$<<=1)try{w=this.findAlignmentInRegion(d,R,O,$);break}catch(q){if(!(q instanceof U))throw q}}const C=Bi.createTransform(s,l,c,w,f),D=Bi.sampleGrid(this.image,C,f);let I;return I=null===w?[c,s,l]:[c,s,l,w],new Oi(D,I)}static createTransform(o,s,l,c,d){const f=d-3.5;let h,y,w,C;return null!==c?(h=c.getX(),y=c.getY(),w=f-3,C=w):(h=s.getX()-o.getX()+l.getX(),y=s.getY()-o.getY()+l.getY(),w=f,C=f),pn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,w,C,3.5,f,o.getX(),o.getY(),s.getX(),s.getY(),h,y,l.getX(),l.getY())}static sampleGrid(o,s,l){return Ar.getInstance().sampleGridWithTransform(o,l,l,s)}static computeDimension(o,s,l,c){const d=je.round(re.distance(o,s)/c),f=je.round(re.distance(o,l)/c);let h=Math.floor((d+f)/2)+7;switch(3&h){case 0:h++;break;case 2:h--;break;case 3:throw new U("Dimensions could be not found.")}return h}calculateModuleSize(o,s,l){return(this.calculateModuleSizeOneWay(o,s)+this.calculateModuleSizeOneWay(o,l))/2}calculateModuleSizeOneWay(o,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(o,s,l,c){let d=this.sizeOfBlackWhiteBlackRun(o,s,l,c),f=1,h=o-(l-o);h<0?(f=o/(o-h),h=0):h>=this.image.getWidth()&&(f=(this.image.getWidth()-1-o)/(h-o),h=this.image.getWidth()-1);let y=Math.floor(s-(c-s)*f);return f=1,y<0?(f=s/(s-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-s)/(y-s),y=this.image.getHeight()-1),h=Math.floor(o+(h-o)*f),d+=this.sizeOfBlackWhiteBlackRun(o,s,h,y),d-1}sizeOfBlackWhiteBlackRun(o,s,l,c){const d=Math.abs(c-s)>Math.abs(l-o);if(d){let S=o;o=s,s=S,S=l,l=c,c=S}const f=Math.abs(l-o),h=Math.abs(c-s);let y=-f/2;const w=o<l?1:-1,C=s<c?1:-1;let D=0;const I=l+w;for(let S=o,b=s;S!==I;S+=w){if(1===D===this.image.get(d?b:S,d?S:b)){if(2===D)return je.distance(S,b,o,s);D++}if(y+=h,y>0){if(b===c)break;b+=C,y-=f}}return 2===D?je.distance(l+w,c,o,s):NaN}findAlignmentInRegion(o,s,l,c){const d=Math.floor(c*o),f=Math.max(0,s-d),h=Math.min(this.image.getWidth()-1,s+d);if(h-f<3*o)throw new U("Alignment top exceeds estimated module size.");const y=Math.max(0,l-d),w=Math.min(this.image.getHeight()-1,l+d);if(w-y<3*o)throw new U("Alignment bottom exceeds estimated module size.");return new mo(this.image,f,y,h-f,w-y,o,this.resultPointCallback).find()}}class zr{constructor(){this.decoder=new Qc}getDecoder(){return this.decoder}decode(o,s){let l,c;if(null!=s&&void 0!==s.get(st.PURE_BARCODE)){const y=zr.extractPureBits(o.getBlackMatrix());l=this.decoder.decodeBitMatrix(y,s),c=zr.NO_POINTS}else{const y=new Bi(o.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(y.getBits(),s),c=y.getPoints()}l.getOther()instanceof We&&l.getOther().applyMirroredCorrection(c);const d=new gt(l.getText(),l.getRawBytes(),void 0,c,ae.QR_CODE,void 0),f=l.getByteSegments();null!==f&&d.putMetadata(Oe.BYTE_SEGMENTS,f);const h=l.getECLevel();return null!==h&&d.putMetadata(Oe.ERROR_CORRECTION_LEVEL,h),l.hasStructuredAppend()&&(d.putMetadata(Oe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Oe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(o){const s=o.getTopLeftOnBit(),l=o.getBottomRightOnBit();if(null===s||null===l)throw new U;const c=this.moduleSize(s,o);let d=s[1],f=l[1],h=s[0],y=l[0];if(h>=y||d>=f)throw new U;if(f-d!=y-h&&(y=h+(f-d),y>=o.getWidth()))throw new U;const w=Math.round((y-h+1)/c),C=Math.round((f-d+1)/c);if(w<=0||C<=0)throw new U;if(C!==w)throw new U;const D=Math.floor(c/2);d+=D,h+=D;const I=h+Math.floor((w-1)*c)-y;if(I>0){if(I>D)throw new U;h-=I}const S=d+Math.floor((C-1)*c)-f;if(S>0){if(S>D)throw new U;d-=S}const b=new Ft(w,C);for(let M=0;M<C;M++){const R=d+Math.floor(M*c);for(let O=0;O<w;O++)o.get(h+Math.floor(O*c),R)&&b.set(O,M)}return b}static moduleSize(o,s){const l=s.getHeight(),c=s.getWidth();let d=o[0],f=o[1],h=!0,y=0;for(;d<c&&f<l;){if(h!==s.get(d,f)){if(5==++y)break;h=!h}d++,f++}if(d===c||f===l)throw new U;return(d-o[0])/7}}zr.NO_POINTS=new Array;class se{PDF417Common(){}static getBitCountSum(o){return je.sum(o)}static toIntArray(o){if(null==o||!o.length)return se.EMPTY_INT_ARRAY;const s=new Int32Array(o.length);let l=0;for(const c of o)s[l++]=c;return s}static getCodeword(o){const s=bt.binarySearch(se.SYMBOL_TABLE,262143&o);return s<0?-1:(se.CODEWORD_TABLE[s]-1)%se.NUMBER_OF_CODEWORDS}}se.NUMBER_OF_CODEWORDS=929,se.MAX_CODEWORDS_IN_BARCODE=se.NUMBER_OF_CODEWORDS-1,se.MIN_ROWS_IN_BARCODE=3,se.MAX_ROWS_IN_BARCODE=90,se.MODULES_IN_CODEWORD=17,se.MODULES_IN_STOP_PATTERN=18,se.BARS_IN_MODULE=8,se.EMPTY_INT_ARRAY=new Int32Array([]),se.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),se.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Fh{constructor(o,s){this.bits=o,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class be{static detectMultiple(o,s,l){let c=o.getBlackMatrix(),d=be.detect(l,c);return d.length||(c=c.clone(),c.rotate180(),d=be.detect(l,c)),new Fh(c,d)}static detect(o,s){const l=new Array;let c=0,d=0,f=!1;for(;c<s.getHeight();){const h=be.findVertices(s,c,d);if(null!=h[0]||null!=h[3]){if(f=!0,l.push(h),!o)break;null!=h[2]?(d=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(d=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}else{if(!f)break;f=!1,d=0;for(const y of l)null!=y[1]&&(c=Math.trunc(Math.max(c,y[1].getY()))),null!=y[3]&&(c=Math.max(c,Math.trunc(y[3].getY())));c+=be.ROW_STEP}}return l}static findVertices(o,s,l){const c=o.getHeight(),d=o.getWidth(),f=new Array(8);return be.copyToResult(f,be.findRowsWithPattern(o,c,d,s,l,be.START_PATTERN),be.INDEXES_START_PATTERN),null!=f[4]&&(l=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY())),be.copyToResult(f,be.findRowsWithPattern(o,c,d,s,l,be.STOP_PATTERN),be.INDEXES_STOP_PATTERN),f}static copyToResult(o,s,l){for(let c=0;c<l.length;c++)o[l[c]]=s[c]}static findRowsWithPattern(o,s,l,c,d,f){const h=new Array(4);let y=!1;const w=new Int32Array(f.length);for(;c<s;c+=be.ROW_STEP){let D=be.findGuardPattern(o,d,c,l,!1,f,w);if(null!=D){for(;c>0;){const I=be.findGuardPattern(o,d,--c,l,!1,f,w);if(null==I){c++;break}D=I}h[0]=new re(D[0],c),h[1]=new re(D[1],c),y=!0;break}}let C=c+1;if(y){let D=0,I=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;C<s;C++){const S=be.findGuardPattern(o,I[0],C,l,!1,f,w);if(null!=S&&Math.abs(I[0]-S[0])<be.MAX_PATTERN_DRIFT&&Math.abs(I[1]-S[1])<be.MAX_PATTERN_DRIFT)I=S,D=0;else{if(D>be.SKIPPED_ROW_COUNT_MAX)break;D++}}C-=D+1,h[2]=new re(I[0],C),h[3]=new re(I[1],C)}return C-c<be.BARCODE_MIN_HEIGHT&&bt.fill(h,null),h}static findGuardPattern(o,s,l,c,d,f,h){bt.fillWithin(h,0,h.length,0);let y=s,w=0;for(;o.get(y,l)&&y>0&&w++<be.MAX_PIXEL_DRIFT;)y--;let C=y,D=0,I=f.length;for(let S=d;C<c;C++)if(o.get(C,l)!==S)h[D]++;else{if(D===I-1){if(be.patternMatchVariance(h,f,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE)return new Int32Array([y,C]);y+=h[0]+h[1],tt.arraycopy(h,2,h,0,D-1),h[D-1]=0,h[D]=0,D--}else D++;h[D]=1,S=!S}return D===I-1&&be.patternMatchVariance(h,f,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE?new Int32Array([y,C-1]):null}static patternMatchVariance(o,s,l){let c=o.length,d=0,f=0;for(let w=0;w<c;w++)d+=o[w],f+=s[w];if(d<f)return 1/0;let h=d/f;l*=h;let y=0;for(let w=0;w<c;w++){let C=o[w],D=s[w]*h,I=C>D?C-D:D-C;if(I>l)return 1/0;y+=I}return y/d}}be.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),be.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),be.MAX_AVG_VARIANCE=.42,be.MAX_INDIVIDUAL_VARIANCE=.8,be.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),be.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),be.MAX_PIXEL_DRIFT=3,be.MAX_PATTERN_DRIFT=5,be.SKIPPED_ROW_COUNT_MAX=25,be.ROW_STEP=5,be.BARCODE_MIN_HEIGHT=10;class Kt{constructor(o,s){if(0===s.length)throw new te;this.field=o;let l=s.length;if(l>1&&0===s[0]){let c=1;for(;c<l&&0===s[c];)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),tt.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(0===o)return this.getCoefficient(0);if(1===o){let c=0;for(let d of this.coefficients)c=this.field.add(c,d);return c}let s=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)s=this.field.add(this.field.multiply(o,s),this.coefficients[c]);return s}add(o){if(!this.field.equals(o.field))throw new te("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let s=this.coefficients,l=o.coefficients;if(s.length>l.length){let f=s;s=l,l=f}let c=new Int32Array(l.length),d=l.length-s.length;tt.arraycopy(l,0,c,0,d);for(let f=d;f<l.length;f++)c[f]=this.field.add(s[f-d],l[f]);return new Kt(this.field,c)}subtract(o){if(!this.field.equals(o.field))throw new te("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof Kt?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new te("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new Kt(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,c=o.coefficients,d=c.length,f=new Int32Array(l+d-1);for(let h=0;h<l;h++){let y=s[h];for(let w=0;w<d;w++)f[h+w]=this.field.add(f[h+w],this.field.multiply(y,c[w]))}return new Kt(this.field,f)}negative(){let o=this.coefficients.length,s=new Int32Array(o);for(let l=0;l<o;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new Kt(this.field,s)}multiplyScalar(o){if(0===o)return new Kt(this.field,new Int32Array([0]));if(1===o)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let c=0;c<s;c++)l[c]=this.field.multiply(this.coefficients[c],o);return new Kt(this.field,l)}multiplyByMonomial(o,s){if(o<0)throw new te;if(0===s)return new Kt(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+o);for(let d=0;d<l;d++)c[d]=this.field.multiply(this.coefficients[d],s);return new Kt(this.field,c)}toString(){let o=new qe;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);0!==l&&(l<0?(o.append(" - "),l=-l):o.length()>0&&o.append(" + "),(0===s||1!==l)&&o.append(l),0!==s&&(1===s?o.append("x"):(o.append("x^"),o.append(s))))}return o.toString()}}class kh{add(o,s){return(o+s)%this.modulus}subtract(o,s){return(this.modulus+o-s)%this.modulus}exp(o){return this.expTable[o]}log(o){if(0===o)throw new te;return this.logTable[o]}inverse(o){if(0===o)throw new Ds;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,s){return 0===o||0===s?0:this.expTable[(this.logTable[o]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class Ns extends kh{constructor(o,s){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let l=1;for(let c=0;c<o;c++)this.expTable[c]=l,l=l*s%o;for(let c=0;c<o-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Kt(this,new Int32Array([0])),this.one=new Kt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,s){if(o<0)throw new te;if(0===s)return this.zero;let l=new Int32Array(o+1);return l[0]=s,new Kt(this,l)}}Ns.PDF417_GF=new Ns(se.NUMBER_OF_CODEWORDS,3);class Kc{constructor(){this.field=Ns.PDF417_GF}decode(o,s,l){let c=new Kt(this.field,o),d=new Int32Array(s),f=!1;for(let b=s;b>0;b--){let M=c.evaluateAt(this.field.exp(b));d[s-b]=M,0!==M&&(f=!0)}if(!f)return 0;let h=this.field.getOne();if(null!=l)for(const b of l){let M=this.field.exp(o.length-1-b),R=new Kt(this.field,new Int32Array([this.field.subtract(0,M),1]));h=h.multiply(R)}let y=new Kt(this.field,d),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),y,s),C=w[0],D=w[1],I=this.findErrorLocations(C),S=this.findErrorMagnitudes(D,C,I);for(let b=0;b<I.length;b++){let M=o.length-1-this.field.log(I[b]);if(M<0)throw Rt.getChecksumInstance();o[M]=this.field.subtract(o[M],S[b])}return I.length}runEuclideanAlgorithm(o,s,l){if(o.getDegree()<s.getDegree()){let I=o;o=s,s=I}let c=o,d=s,f=this.field.getZero(),h=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let I=c,S=f;if(c=d,f=h,c.isZero())throw Rt.getChecksumInstance();d=I;let b=this.field.getZero(),M=c.getCoefficient(c.getDegree()),R=this.field.inverse(M);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){let O=d.getDegree()-c.getDegree(),$=this.field.multiply(d.getCoefficient(d.getDegree()),R);b=b.add(this.field.buildMonomial(O,$)),d=d.subtract(c.multiplyByMonomial(O,$))}h=b.multiply(f).subtract(S).negative()}let y=h.getCoefficient(0);if(0===y)throw Rt.getChecksumInstance();let w=this.field.inverse(y);return[h.multiply(w),d.multiply(w)]}findErrorLocations(o){let s=o.getDegree(),l=new Int32Array(s),c=0;for(let d=1;d<this.field.getSize()&&c<s;d++)0===o.evaluateAt(d)&&(l[c]=this.field.inverse(d),c++);if(c!==s)throw Rt.getChecksumInstance();return l}findErrorMagnitudes(o,s,l){let c=s.getDegree(),d=new Int32Array(c);for(let w=1;w<=c;w++)d[c-w]=this.field.multiply(w,s.getCoefficient(w));let f=new Kt(this.field,d),h=l.length,y=new Int32Array(h);for(let w=0;w<h;w++){let C=this.field.inverse(l[w]),D=this.field.subtract(0,o.evaluateAt(C)),I=this.field.inverse(f.evaluateAt(C));y[w]=this.field.multiply(D,I)}return y}}class Gr{constructor(o,s,l,c,d){o instanceof Gr?this.constructor_2(o):this.constructor_1(o,s,l,c,d)}constructor_1(o,s,l,c,d){const f=null==s||null==l,h=null==c||null==d;if(f&&h)throw new U;f?(s=new re(0,c.getY()),l=new re(0,d.getY())):h&&(c=new re(o.getWidth()-1,s.getY()),d=new re(o.getWidth()-1,l.getY())),this.image=o,this.topLeft=s,this.bottomLeft=l,this.topRight=c,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,s){return null==o?s:null==s?o:new Gr(o.image,o.topLeft,o.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(o,s,l){let c=this.topLeft,d=this.bottomLeft,f=this.topRight,h=this.bottomRight;if(o>0){let y=l?this.topLeft:this.topRight,w=Math.trunc(y.getY()-o);w<0&&(w=0);let C=new re(y.getX(),w);l?c=C:f=C}if(s>0){let y=l?this.bottomLeft:this.bottomRight,w=Math.trunc(y.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let C=new re(y.getX(),w);l?d=C:h=C}return new Gr(this.image,c,d,f,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Bh{constructor(o,s,l,c){this.columnCount=o,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Jt{constructor(){this.buffer=""}static form(o,s){let l=-1;return o.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(f,h,y,w,C,D){if("%%"===f)return"%";if(void 0===s[++l])return;f=w?parseInt(w.substr(1)):void 0;let S,I=C?parseInt(C.substr(1)):void 0;switch(D){case"s":S=s[l];break;case"c":S=s[l][0];break;case"f":S=parseFloat(s[l]).toFixed(f);break;case"p":S=parseFloat(s[l]).toPrecision(f);break;case"e":S=parseFloat(s[l]).toExponential(f);break;case"x":S=parseInt(s[l]).toString(I||16);break;case"d":S=parseFloat(parseInt(s[l],I||10).toPrecision(f)).toFixed(0)}S="object"==typeof S?JSON.stringify(S):(+S).toString(I);let b=parseInt(y),M=y&&y[0]+""=="0"?"0":" ";for(;S.length<b;)S=void 0!==h?S+M:M+S;return S})}format(o,...s){this.buffer+=Jt.form(o,s)}toString(){return this.buffer}}let $e=(()=>{class x{constructor(s){this.boundingBox=new Gr(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let l=this.getCodeword(s);if(null!=l)return l;for(let c=1;c<x.MAX_NEARBY_DISTANCE;c++){let d=this.imageRowToCodewordIndex(s)-c;if(d>=0&&(l=this.codewords[d],null!=l)||(d=this.imageRowToCodewordIndex(s)+c,d<this.codewords.length&&(l=this.codewords[d],null!=l)))return l}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,l){this.codewords[this.imageRowToCodewordIndex(s)]=l}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new Jt;let l=0;for(const c of this.codewords)null!=c?s.format("%3d: %3d|%3d%n",l++,c.getRowNumber(),c.getValue()):s.format("%3d:    |   %n",l++);return s.toString()}}return x.MAX_NEARBY_DISTANCE=5,x})();class yo{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let s=this.values.get(o);null==s&&(s=0),s++,this.values.set(o,s)}getValue(){let o=-1,s=new Array;for(const[l,c]of this.values.entries()){const d={getKey:()=>l,getValue:()=>c};d.getValue()>o?(o=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===o&&s.push(d.getKey())}return se.toIntArray(s)}getConfidence(o){return this.values.get(o)}}class Jc extends $e{constructor(o,s){super(o),this._isLeft=s}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,o);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=-1,w=1,C=0;for(let D=f;D<h;D++){if(null==s[D])continue;let I=s[D],S=I.getRowNumber()-y;if(0===S)C++;else if(1===S)w=Math.max(w,C),C=1,y=I.getRowNumber();else if(S<0||I.getRowNumber()>=o.getRowCount()||S>D)s[D]=null;else{let b;b=w>2?(w-2)*S:S;let M=b>=D;for(let R=1;R<=b&&!M;R++)M=null!=s[D-R];M?s[D]=null:(y=I.getRowNumber(),C=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(null==o)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let s=new Int32Array(o.getRowCount());for(let l of this.getCodewords())if(null!=l){let c=l.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(o){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),y=-1;for(let w=d;w<f;w++){if(null==h[w])continue;let C=h[w];C.setRowNumberAsRowIndicatorColumn();let D=C.getRowNumber()-y;0===D||(1===D?y=C.getRowNumber():C.getRowNumber()>=o.getRowCount()?h[w]=null:y=C.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),s=new yo,l=new yo,c=new yo,d=new yo;for(let h of o){if(null==h)continue;h.setRowNumberAsRowIndicatorColumn();let y=h.getValue()%30,w=h.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:l.setValue(3*y+1);break;case 1:d.setValue(y/3),c.setValue(y%3);break;case 2:s.setValue(y+1)}}if(0===s.getValue().length||0===l.getValue().length||0===c.getValue().length||0===d.getValue().length||s.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<se.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>se.MAX_ROWS_IN_BARCODE)return null;let f=new Bh(s.getValue()[0],l.getValue()[0],c.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(o,f),f}removeIncorrectCodewords(o,s){for(let l=0;l<o.length;l++){let c=o[l];if(null==o[l])continue;let d=c.getValue()%30,f=c.getRowNumber();if(f>s.getRowCount())o[l]=null;else switch(this._isLeft||(f+=2),f%3){case 0:3*d+1!==s.getRowCountUpperPart()&&(o[l]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(o[l]=null);break;case 2:d+1!==s.getColumnCount()&&(o[l]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class wo{constructor(o,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s,o=se.MAX_CODEWORDS_IN_BARCODE;do{s=o,o=this.adjustRowNumbersAndGetCount()}while(o>0&&o<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(0===o)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let c=0;c<l.length;c++)null!=l[c]&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,l))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let o=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++)if(null!=o[l]&&null!=s[l]&&o[l].getRowNumber()===s[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let d=this.detectionResultColumns[c].getCodewords()[l];null!=d&&(d.setRowNumber(o[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let o=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(null==s[l])continue;let c=s[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let h=this.detectionResultColumns[f].getCodewords()[l];null!=h&&(d=wo.adjustRowNumberIfValid(c,d,h),h.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let o=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(null==s[l])continue;let c=s[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let h=this.detectionResultColumns[f].getCodewords()[l];null!=h&&(d=wo.adjustRowNumberIfValid(c,d,h),h.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,s,l){return null==l||l.hasValidRowNumber()||(l.isValidRowNumber(o)?(l.setRowNumber(o),s=0):++s),s}adjustRowNumbers(o,s,l){if(!this.detectionResultColumns[o-1])return;let c=l[s],d=this.detectionResultColumns[o-1].getCodewords(),f=d;null!=this.detectionResultColumns[o+1]&&(f=this.detectionResultColumns[o+1].getCodewords());let h=new Array(14);h[2]=d[s],h[3]=f[s],s>0&&(h[0]=l[s-1],h[4]=d[s-1],h[5]=f[s-1]),s>1&&(h[8]=l[s-2],h[10]=d[s-2],h[11]=f[s-2]),s<l.length-1&&(h[1]=l[s+1],h[6]=d[s+1],h[7]=f[s+1]),s<l.length-2&&(h[9]=l[s+2],h[12]=d[s+2],h[13]=f[s+2]);for(let y of h)if(wo.adjustRowNumber(c,y))return}static adjustRowNumber(o,s){return!(null==s||!s.hasValidRowNumber()||s.getBucket()!==o.getBucket()||(o.setRowNumber(s.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,s){this.detectionResultColumns[o]=s}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];null==o&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Jt;for(let l=0;l<o.getCodewords().length;l++){s.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(null==this.detectionResultColumns[c]){s.format("    |   ");continue}let d=this.detectionResultColumns[c].getCodewords()[l];null!=d?s.format(" %3d|%3d",d.getRowNumber(),d.getValue()):s.format("    |   ")}s.format("%n")}return s.toString()}}let ge=(()=>{class x{constructor(s,l,c,d){this.rowNumber=x.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(l),this.bucket=Math.trunc(c),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==x.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}return x.BARCODE_ROW_UNKNOWN=-1,x})();class yn{static initialize(){for(let o=0;o<se.SYMBOL_TABLE.length;o++){let s=se.SYMBOL_TABLE[o],l=1&s;for(let c=0;c<se.BARS_IN_MODULE;c++){let d=0;for(;(1&s)===l;)d+=1,s>>=1;l=1&s,yn.RATIOS_TABLE[o]||(yn.RATIOS_TABLE[o]=new Array(se.BARS_IN_MODULE)),yn.RATIOS_TABLE[o][se.BARS_IN_MODULE-c-1]=Math.fround(d/se.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let s=yn.getDecodedCodewordValue(yn.sampleBitCounts(o));return-1!==s?s:yn.getClosestDecodedValue(o)}static sampleBitCounts(o){let s=je.sum(o),l=new Int32Array(se.BARS_IN_MODULE),c=0,d=0;for(let f=0;f<se.MODULES_IN_CODEWORD;f++)d+o[c]<=s/(2*se.MODULES_IN_CODEWORD)+f*s/se.MODULES_IN_CODEWORD&&(d+=o[c],c++),l[c]++;return l}static getDecodedCodewordValue(o){let s=yn.getBitValue(o);return-1===se.getCodeword(s)?-1:s}static getBitValue(o){let s=0;for(let l=0;l<o.length;l++)for(let c=0;c<o[l];c++)s=s<<1|(l%2==0?1:0);return Math.trunc(s)}static getClosestDecodedValue(o){let s=je.sum(o),l=new Array(se.BARS_IN_MODULE);if(s>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(o[f]/s);let c=As.MAX_VALUE,d=-1;this.bSymbolTableReady||yn.initialize();for(let f=0;f<yn.RATIOS_TABLE.length;f++){let h=0,y=yn.RATIOS_TABLE[f];for(let w=0;w<se.BARS_IN_MODULE;w++){let C=Math.fround(y[w]-l[w]);if(h+=Math.fround(C*C),h>=c)break}h<c&&(c=h,d=se.SYMBOL_TABLE[f])}return d}}yn.bSymbolTableReady=!1,yn.RATIOS_TABLE=new Array(se.SYMBOL_TABLE.length).map(x=>new Array(se.BARS_IN_MODULE));class cr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class Ui{static parseLong(o,s){return parseInt(o,s)}}let eu=(()=>{class x extends Zt{}return x.kind="NullPointerException",x})();class Ka{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,s,l){if(null==o)throw new eu;if(s<0||s>o.length||l<0||s+l>o.length||s+l<0)throw new Es;if(0!==l)for(let c=0;c<l;c++)this.write(o[s+c])}flush(){}close(){}}class tu extends Zt{}class Ja extends Ka{constructor(o=32){if(super(),this.count=0,o<0)throw new te("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let l=this.buf.length<<1;if(l-o<0&&(l=o),l<0){if(o<0)throw new tu;l=Ce.MAX_VALUE}this.buf=bt.copyOfUint8Array(this.buf,l)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,s,l){if(s<0||s>o.length||l<0||s+l-o.length>0)throw new Es;this.ensureCapacity(this.count+l),tt.arraycopy(o,s,this.buf,this.count,l),this.count+=l}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return bt.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?"string"==typeof o?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var Ve=(()=>{return(x=Ve||(Ve={}))[x.ALPHA=0]="ALPHA",x[x.LOWER=1]="LOWER",x[x.MIXED=2]="MIXED",x[x.PUNCT=3]="PUNCT",x[x.ALPHA_SHIFT=4]="ALPHA_SHIFT",x[x.PUNCT_SHIFT=5]="PUNCT_SHIFT",Ve;var x})();function xo(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ji;function br(x){if(typeof ji>"u"&&(ji=xo()),null===ji)throw new Error("BigInt is not supported!");return ji(x)}class k{static decode(o,s){let l=new qe(""),c=X.ISO8859_1;l.enableDecoding(c);let d=1,f=o[d++],h=new cr;for(;d<o[0];){switch(f){case k.TEXT_COMPACTION_MODE_LATCH:d=k.textCompaction(o,d,l);break;case k.BYTE_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:d=k.byteCompaction(f,o,c,d,l);break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(o[d++]);break;case k.NUMERIC_COMPACTION_MODE_LATCH:d=k.numericCompaction(o,d,l);break;case k.ECI_CHARSET:X.getCharacterSetECIByValue(o[d++]);break;case k.ECI_GENERAL_PURPOSE:d+=2;break;case k.ECI_USER_DEFINED:d++;break;case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=k.decodeMacroBlock(o,d,h);break;case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:throw new K;default:d--,d=k.textCompaction(o,d,l)}if(!(d<o.length))throw K.getFormatInstance();f=o[d++]}if(0===l.length())throw K.getFormatInstance();let y=new Mi(null,l.toString(),null,s);return y.setOther(h),y}static decodeMacroBlock(o,s,l){if(s+k.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw K.getFormatInstance();let c=new Int32Array(k.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<k.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)c[h]=o[s];l.setSegmentIndex(Ce.parseInt(k.decodeBase900toBase10(c,k.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new qe;s=k.textCompaction(o,s,d),l.setFileId(d.toString());let f=-1;for(o[s]===k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=s+1);s<o[0];)switch(o[s]){case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o[++s]){case k.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new qe;s=k.textCompaction(o,s+1,h),l.setFileName(h.toString());break;case k.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new qe;s=k.textCompaction(o,s+1,y),l.setSender(y.toString());break;case k.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new qe;s=k.textCompaction(o,s+1,w),l.setAddressee(w.toString());break;case k.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new qe;s=k.numericCompaction(o,s+1,C),l.setSegmentCount(Ce.parseInt(C.toString()));break;case k.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new qe;s=k.numericCompaction(o,s+1,D),l.setTimestamp(Ui.parseLong(D.toString()));break;case k.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new qe;s=k.numericCompaction(o,s+1,I),l.setChecksum(Ce.parseInt(I.toString()));break;case k.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let S=new qe;s=k.numericCompaction(o,s+1,S),l.setFileSize(Ui.parseLong(S.toString()));break;default:throw K.getFormatInstance()}break;case k.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw K.getFormatInstance()}if(-1!==f){let h=s-f;l.isLastSegment()&&h--,l.setOptionalData(bt.copyOfRange(o,f,f+h))}return s}static textCompaction(o,s,l){let c=new Int32Array(2*(o[0]-s)),d=new Int32Array(2*(o[0]-s)),f=0,h=!1;for(;s<o[0]&&!h;){let y=o[s++];if(y<k.TEXT_COMPACTION_MODE_LATCH)c[f]=y/30,c[f+1]=y%30,f+=2;else switch(y){case k.TEXT_COMPACTION_MODE_LATCH:c[f++]=k.TEXT_COMPACTION_MODE_LATCH;break;case k.BYTE_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:case k.NUMERIC_COMPACTION_MODE_LATCH:case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=o[s++],d[f]=y,f++}}return k.decodeTextCompaction(c,d,f,l),s}static decodeTextCompaction(o,s,l,c){let d=Ve.ALPHA,f=Ve.ALPHA,h=0;for(;h<l;){let y=o[h],w="";switch(d){case Ve.ALPHA:if(y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case k.LL:d=Ve.LOWER;break;case k.ML:d=Ve.MIXED;break;case k.PS:f=d,d=Ve.PUNCT_SHIFT;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA}break;case Ve.LOWER:if(y<26)w=String.fromCharCode(97+y);else switch(y){case 26:w=" ";break;case k.AS:f=d,d=Ve.ALPHA_SHIFT;break;case k.ML:d=Ve.MIXED;break;case k.PS:f=d,d=Ve.PUNCT_SHIFT;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA}break;case Ve.MIXED:if(y<k.PL)w=k.MIXED_CHARS[y];else switch(y){case k.PL:d=Ve.PUNCT;break;case 26:w=" ";break;case k.LL:d=Ve.LOWER;break;case k.AL:d=Ve.ALPHA;break;case k.PS:f=d,d=Ve.PUNCT_SHIFT;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA}break;case Ve.PUNCT:if(y<k.PAL)w=k.PUNCT_CHARS[y];else switch(y){case k.PAL:d=Ve.ALPHA;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA}break;case Ve.ALPHA_SHIFT:if(d=f,y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case k.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA}break;case Ve.PUNCT_SHIFT:if(d=f,y<k.PAL)w=k.PUNCT_CHARS[y];else switch(y){case k.PAL:d=Ve.ALPHA;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA}}""!==w&&c.append(w),h++}}static byteCompaction(o,s,l,c,d){let f=new Ja,h=0,y=0,w=!1;switch(o){case k.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),D=s[c++];for(;c<s[0]&&!w;)switch(C[h++]=D,y=900*y+D,D=s[c++],D){case k.TEXT_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH:case k.NUMERIC_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(h%5==0&&h>0){for(let I=0;I<6;++I)f.write(Number(br(y)>>br(8*(5-I))));y=0,h=0}}c===s[0]&&D<k.TEXT_COMPACTION_MODE_LATCH&&(C[h++]=D);for(let I=0;I<h;I++)f.write(C[I]);break;case k.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let I=s[c++];if(I<k.TEXT_COMPACTION_MODE_LATCH)h++,y=900*y+I;else switch(I){case k.TEXT_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH:case k.NUMERIC_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:c--,w=!0}if(h%5==0&&h>0){for(let S=0;S<6;++S)f.write(Number(br(y)>>br(8*(5-S))));y=0,h=0}}}return d.append(zt.decode(f.toByteArray(),l)),c}static numericCompaction(o,s,l){let c=0,d=!1,f=new Int32Array(k.MAX_NUMERIC_CODEWORDS);for(;s<o[0]&&!d;){let h=o[s++];if(s===o[0]&&(d=!0),h<k.TEXT_COMPACTION_MODE_LATCH)f[c]=h,c++;else switch(h){case k.TEXT_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:s--,d=!0}(c%k.MAX_NUMERIC_CODEWORDS==0||h===k.NUMERIC_COMPACTION_MODE_LATCH||d)&&c>0&&(l.append(k.decodeBase900toBase10(f,c)),c=0)}return s}static decodeBase900toBase10(o,s){let l=br(0);for(let d=0;d<s;d++)l+=k.EXP900[s-d-1]*br(o[d]);let c=l.toString();if("1"!==c.charAt(0))throw new K;return c.substring(1)}}k.TEXT_COMPACTION_MODE_LATCH=900,k.BYTE_COMPACTION_MODE_LATCH=901,k.NUMERIC_COMPACTION_MODE_LATCH=902,k.BYTE_COMPACTION_MODE_LATCH_6=924,k.ECI_USER_DEFINED=925,k.ECI_GENERAL_PURPOSE=926,k.ECI_CHARSET=927,k.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,k.MACRO_PDF417_TERMINATOR=922,k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,k.MAX_NUMERIC_CODEWORDS=15,k.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,k.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,k.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,k.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,k.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,k.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,k.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,k.PL=25,k.LL=27,k.AS=27,k.ML=28,k.AL=28,k.PS=29,k.PAL=29,k.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",k.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",k.EXP900=xo()?function de(){let x=[];x[0]=br(1);let o=br(900);x[1]=o;for(let s=2;s<16;s++)x[s]=x[s-1]*o;return x}():[],k.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Te{constructor(){}static decode(o,s,l,c,d,f,h){let D,y=new Gr(o,s,l,c,d),w=null,C=null;for(let b=!0;;b=!1){if(null!=s&&(w=Te.getRowIndicatorColumn(o,y,s,!0,f,h)),null!=c&&(C=Te.getRowIndicatorColumn(o,y,c,!1,f,h)),D=Te.merge(w,C),null==D)throw U.getNotFoundInstance();let M=D.getBoundingBox();if(!b||null==M||!(M.getMinY()<y.getMinY()||M.getMaxY()>y.getMaxY()))break;y=M}D.setBoundingBox(y);let I=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,w),D.setDetectionResultColumn(I,C);let S=null!=w;for(let b=1;b<=I;b++){let R,M=S?b:I-b;if(void 0!==D.getDetectionResultColumn(M))continue;R=0===M||M===I?new Jc(y,0===M):new $e(y),D.setDetectionResultColumn(M,R);let O=-1,$=O;for(let q=y.getMinY();q<=y.getMaxY();q++){if(O=Te.getStartColumn(D,M,q,S),O<0||O>y.getMaxX()){if(-1===$)continue;O=$}let L=Te.detectCodeword(o,y.getMinX(),y.getMaxX(),S,O,q,f,h);null!=L&&(R.setCodeword(q,L),$=O,f=Math.min(f,L.getWidth()),h=Math.max(h,L.getWidth()))}}return Te.createDecoderResult(D)}static merge(o,s){if(null==o&&null==s)return null;let l=Te.getBarcodeMetadata(o,s);if(null==l)return null;let c=Gr.merge(Te.adjustBoundingBox(o),Te.adjustBoundingBox(s));return new wo(l,c)}static adjustBoundingBox(o){if(null==o)return null;let s=o.getRowHeights();if(null==s)return null;let l=Te.getMax(s),c=0;for(let h of s)if(c+=l-h,h>0)break;let d=o.getCodewords();for(let h=0;c>0&&null==d[h];h++)c--;let f=0;for(let h=s.length-1;h>=0&&(f+=l-s[h],!(s[h]>0));h--);for(let h=d.length-1;f>0&&null==d[h];h--)f--;return o.getBoundingBox().addMissingRows(c,f,o.isLeft())}static getMax(o){let s=-1;for(let l of o)s=Math.max(s,l);return s}static getBarcodeMetadata(o,s){let l,c;return null==o||null==(l=o.getBarcodeMetadata())?null==s?null:s.getBarcodeMetadata():null==s||null==(c=s.getBarcodeMetadata())?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(o,s,l,c,d,f){let h=new Jc(s,c);for(let y=0;y<2;y++){let w=0===y?1:-1,C=Math.trunc(Math.trunc(l.getX()));for(let D=Math.trunc(Math.trunc(l.getY()));D<=s.getMaxY()&&D>=s.getMinY();D+=w){let I=Te.detectCodeword(o,0,o.getWidth(),c,C,D,d,f);null!=I&&(h.setCodeword(D,I),C=c?I.getStartX():I.getEndX())}}return h}static adjustCodewordCount(o,s){let l=s[0][1],c=l.getValue(),d=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Te.getNumberOfECCodeWords(o.getBarcodeECLevel());if(0===c.length){if(d<1||d>se.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();l.setValue(d)}else c[0]!==d&&l.setValue(d)}static createDecoderResult(o){let s=Te.createBarcodeMatrix(o);Te.adjustCodewordCount(o,s);let l=new Array,c=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),d=[],f=new Array;for(let y=0;y<o.getBarcodeRowCount();y++)for(let w=0;w<o.getBarcodeColumnCount();w++){let C=s[y][w+1].getValue(),D=y*o.getBarcodeColumnCount()+w;0===C.length?l.push(D):1===C.length?c[D]=C[0]:(f.push(D),d.push(C))}let h=new Array(d.length);for(let y=0;y<h.length;y++)h[y]=d[y];return Te.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),c,se.toIntArray(l),se.toIntArray(f),h)}static createDecoderResultFromAmbiguousValues(o,s,l,c,d){let f=new Int32Array(c.length),h=100;for(;h-- >0;){for(let y=0;y<f.length;y++)s[c[y]]=d[y][f[y]];try{return Te.decodeCodewords(s,o,l)}catch(y){if(!(y instanceof Rt))throw y}if(0===f.length)throw Rt.getChecksumInstance();for(let y=0;y<f.length;y++){if(f[y]<d[y].length-1){f[y]++;break}if(f[y]=0,y===f.length-1)throw Rt.getChecksumInstance()}}throw Rt.getChecksumInstance()}static createBarcodeMatrix(o){let s=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let d=0;d<s[c].length;d++)s[c][d]=new yo;let l=0;for(let c of o.getDetectionResultColumns()){if(null!=c)for(let d of c.getCodewords())if(null!=d){let f=d.getRowNumber();if(f>=0){if(f>=s.length)continue;s[f][l].setValue(d.getValue())}}l++}return s}static isValidBarcodeColumn(o,s){return s>=0&&s<=o.getBarcodeColumnCount()+1}static getStartColumn(o,s,l,c){let d=c?1:-1,f=null;if(Te.isValidBarcodeColumn(o,s-d)&&(f=o.getDetectionResultColumn(s-d).getCodeword(l)),null!=f)return c?f.getEndX():f.getStartX();if(f=o.getDetectionResultColumn(s).getCodewordNearby(l),null!=f)return c?f.getStartX():f.getEndX();if(Te.isValidBarcodeColumn(o,s-d)&&(f=o.getDetectionResultColumn(s-d).getCodewordNearby(l)),null!=f)return c?f.getEndX():f.getStartX();let h=0;for(;Te.isValidBarcodeColumn(o,s-d);){s-=d;for(let y of o.getDetectionResultColumn(s).getCodewords())if(null!=y)return(c?y.getEndX():y.getStartX())+d*h*(y.getEndX()-y.getStartX());h++}return c?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,s,l,c,d,f,h,y){d=Te.adjustCodewordStartColumn(o,s,l,c,d,f);let w=Te.getModuleBitCount(o,s,l,c,d,f);if(null==w)return null;let C,D=je.sum(w);if(c)C=d+D;else{for(let b=0;b<w.length/2;b++){let M=w[b];w[b]=w[w.length-1-b],w[w.length-1-b]=M}C=d,d=C-D}if(!Te.checkCodewordSkew(D,h,y))return null;let I=yn.getDecodedValue(w),S=se.getCodeword(I);return-1===S?null:new ge(d,C,Te.getCodewordBucketNumber(I),S)}static getModuleBitCount(o,s,l,c,d,f){let h=d,y=new Int32Array(8),w=0,C=c?1:-1,D=c;for(;(c?h<l:h>=s)&&w<y.length;)o.get(h,f)===D?(y[w]++,h+=C):(w++,D=!D);return w===y.length||h===(c?l:s)&&w===y.length-1?y:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,s,l,c,d,f){let h=d,y=c?-1:1;for(let w=0;w<2;w++){for(;(c?h>=s:h<l)&&c===o.get(h,f);){if(Math.abs(d-h)>Te.CODEWORD_SKEW_SIZE)return d;h+=y}y=-y,c=!c}return h}static checkCodewordSkew(o,s,l){return s-Te.CODEWORD_SKEW_SIZE<=o&&o<=l+Te.CODEWORD_SKEW_SIZE}static decodeCodewords(o,s,l){if(0===o.length)throw K.getFormatInstance();let c=1<<s+1,d=Te.correctErrors(o,l,c);Te.verifyCodewordCount(o,c);let f=k.decode(o,""+s);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(o,s,l){if(null!=s&&s.length>l/2+Te.MAX_ERRORS||l<0||l>Te.MAX_EC_CODEWORDS)throw Rt.getChecksumInstance();return Te.errorCorrection.decode(o,l,s)}static verifyCodewordCount(o,s){if(o.length<4)throw K.getFormatInstance();let l=o[0];if(l>o.length)throw K.getFormatInstance();if(0===l){if(!(s<o.length))throw K.getFormatInstance();o[0]=o.length-s}}static getBitCountForCodeword(o){let s=new Int32Array(8),l=0,c=s.length-1;for(;!((1&o)!==l&&(l=1&o,c--,c<0));)s[c]++,o>>=1;return s}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Te.getCodewordBucketNumber(Te.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let s=new Jt;for(let l=0;l<o.length;l++){s.format("Row %2d: ",l);for(let c=0;c<o[l].length;c++){let d=o[l][c];0===d.getValue().length?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}Te.CODEWORD_SKEW_SIZE=2,Te.MAX_ERRORS=3,Te.MAX_EC_CODEWORDS=512,Te.errorCorrection=new Kc;class et{decode(o,s=null){let l=et.decode(o,s,!1);if(null==l||0===l.length||null==l[0])throw U.getNotFoundInstance();return l[0]}decodeMultiple(o,s=null){try{return et.decode(o,s,!0)}catch(l){throw l instanceof K||l instanceof Rt?U.getNotFoundInstance():l}}static decode(o,s,l){const c=new Array,d=be.detectMultiple(o,s,l);for(const f of d.getPoints()){const h=Te.decode(d.getBits(),f[4],f[5],f[6],f[7],et.getMinCodewordWidth(f),et.getMaxCodewordWidth(f)),y=new gt(h.getText(),h.getRawBytes(),void 0,f,ae.PDF_417);y.putMetadata(Oe.ERROR_CORRECTION_LEVEL,h.getECLevel());const w=h.getOther();null!=w&&y.putMetadata(Oe.PDF417_EXTRA_METADATA,w),c.push(y)}return c.map(f=>f)}static getMaxWidth(o,s){return null==o||null==s?0:Math.trunc(Math.abs(o.getX()-s.getX()))}static getMinWidth(o,s){return null==o||null==s?Ce.MAX_VALUE:Math.trunc(Math.abs(o.getX()-s.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(et.getMaxWidth(o[0],o[4]),et.getMaxWidth(o[6],o[2])*se.MODULES_IN_CODEWORD/se.MODULES_IN_STOP_PATTERN),Math.max(et.getMaxWidth(o[1],o[5]),et.getMaxWidth(o[7],o[3])*se.MODULES_IN_CODEWORD/se.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(et.getMinWidth(o[0],o[4]),et.getMinWidth(o[6],o[2])*se.MODULES_IN_CODEWORD/se.MODULES_IN_STOP_PATTERN),Math.min(et.getMinWidth(o[1],o[5]),et.getMinWidth(o[7],o[3])*se.MODULES_IN_CODEWORD/se.MODULES_IN_STOP_PATTERN)))}reset(){}}let Co=(()=>{class x extends Zt{}return x.kind="ReaderException",x})();class nu{constructor(o,s){this.verbose=!0===o,s&&this.setHints(s)}decode(o,s){return s&&this.setHints(s),this.decodeInternal(o)}decodeWithState(o){return null==this.readers&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const s=!Ze(o)&&!0===o.get(st.TRY_HARDER),l=Ze(o)?null:o.get(st.POSSIBLE_FORMATS),c=new Array;if(!Ze(l)){const d=l.some(f=>f===ae.UPC_A||f===ae.UPC_E||f===ae.EAN_13||f===ae.EAN_8||f===ae.CODABAR||f===ae.CODE_39||f===ae.CODE_93||f===ae.CODE_128||f===ae.ITF||f===ae.RSS_14||f===ae.RSS_EXPANDED);d&&!s&&c.push(new Hr(o,this.verbose)),l.includes(ae.QR_CODE)&&c.push(new zr),l.includes(ae.DATA_MATRIX)&&c.push(new fi),l.includes(ae.AZTEC)&&c.push(new Ln),l.includes(ae.PDF_417)&&c.push(new et),d&&s&&c.push(new Hr(o,this.verbose))}0===c.length&&(s||c.push(new Hr(o,this.verbose)),c.push(new zr),c.push(new fi),c.push(new Ln),c.push(new et),s&&c.push(new Hr(o,this.verbose))),this.readers=c}reset(){if(null!==this.readers)for(const o of this.readers)o.reset()}decodeInternal(o){if(null===this.readers)throw new Co("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(o,this.hints)}catch(l){if(l instanceof Co)continue}throw new U("No MultiFormat Readers were able to detect the code.")}}var Rs=(()=>{return(x=Rs||(Rs={}))[x.ERROR_CORRECTION=0]="ERROR_CORRECTION",x[x.CHARACTER_SET=1]="CHARACTER_SET",x[x.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",x[x.MIN_SIZE=3]="MIN_SIZE",x[x.MAX_SIZE=4]="MAX_SIZE",x[x.MARGIN=5]="MARGIN",x[x.PDF417_COMPACT=6]="PDF417_COMPACT",x[x.PDF417_COMPACTION=7]="PDF417_COMPACTION",x[x.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",x[x.AZTEC_LAYERS=9]="AZTEC_LAYERS",x[x.QR_VERSION=10]="QR_VERSION",Rs;var x})(),pt=Rs;class Vi{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new qt(o,Int32Array.from([1])))}buildGenerator(o){const s=this.cachedGenerators;if(o>=s.length){let l=s[s.length-1];const c=this.field;for(let d=s.length;d<=o;d++){const f=l.multiply(new qt(c,Int32Array.from([1,c.exp(d-1+c.getGeneratorBase())])));s.push(f),l=f}}return s[o]}encode(o,s){if(0===s)throw new te("No error correction bytes");const l=o.length-s;if(l<=0)throw new te("No data bytes provided");const c=this.buildGenerator(s),d=new Int32Array(l);tt.arraycopy(o,0,d,0,l);let f=new qt(this.field,d);f=f.multiplyByMonomial(s,1);const y=f.divide(c)[1].getCoefficients(),w=s-y.length;for(let C=0;C<w;C++)o[l+C]=0;tt.arraycopy(y,0,o,l+w,y.length)}}let ur=(()=>{class x{constructor(){}static applyMaskPenaltyRule1(s){return x.applyMaskPenaltyRule1Internal(s,!0)+x.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let l=0;const c=s.getArray(),d=s.getWidth(),f=s.getHeight();for(let h=0;h<f-1;h++){const y=c[h];for(let w=0;w<d-1;w++){const C=y[w];C===y[w+1]&&C===c[h+1][w]&&C===c[h+1][w+1]&&l++}}return x.N2*l}static applyMaskPenaltyRule3(s){let l=0;const c=s.getArray(),d=s.getWidth(),f=s.getHeight();for(let h=0;h<f;h++)for(let y=0;y<d;y++){const w=c[h];y+6<d&&1===w[y]&&0===w[y+1]&&1===w[y+2]&&1===w[y+3]&&1===w[y+4]&&0===w[y+5]&&1===w[y+6]&&(x.isWhiteHorizontal(w,y-4,y)||x.isWhiteHorizontal(w,y+7,y+11))&&l++,h+6<f&&1===c[h][y]&&0===c[h+1][y]&&1===c[h+2][y]&&1===c[h+3][y]&&1===c[h+4][y]&&0===c[h+5][y]&&1===c[h+6][y]&&(x.isWhiteVertical(c,y,h-4,h)||x.isWhiteVertical(c,y,h+7,h+11))&&l++}return l*x.N3}static isWhiteHorizontal(s,l,c){l=Math.max(l,0),c=Math.min(c,s.length);for(let d=l;d<c;d++)if(1===s[d])return!1;return!0}static isWhiteVertical(s,l,c,d){c=Math.max(c,0),d=Math.min(d,s.length);for(let f=c;f<d;f++)if(1===s[f][l])return!1;return!0}static applyMaskPenaltyRule4(s){let l=0;const c=s.getArray(),d=s.getWidth(),f=s.getHeight();for(let w=0;w<f;w++){const C=c[w];for(let D=0;D<d;D++)1===C[D]&&l++}const h=s.getHeight()*s.getWidth();return Math.floor(10*Math.abs(2*l-h)/h)*x.N4}static getDataMaskBit(s,l,c){let d,f;switch(s){case 0:d=c+l&1;break;case 1:d=1&c;break;case 2:d=l%3;break;case 3:d=(c+l)%3;break;case 4:d=Math.floor(c/2)+Math.floor(l/3)&1;break;case 5:f=c*l,d=(1&f)+f%3;break;case 6:f=c*l,d=(1&f)+f%3&1;break;case 7:f=c*l,d=f%3+(c+l&1)&1;break;default:throw new te("Invalid mask pattern: "+s)}return 0===d}static applyMaskPenaltyRule1Internal(s,l){let c=0;const d=l?s.getHeight():s.getWidth(),f=l?s.getWidth():s.getHeight(),h=s.getArray();for(let y=0;y<d;y++){let w=0,C=-1;for(let D=0;D<f;D++){const I=l?h[y][D]:h[D][y];I===C?w++:(w>=5&&(c+=x.N1+(w-5)),w=1,C=I)}w>=5&&(c+=x.N1+(w-5))}return c}}return x.N1=3,x.N2=3,x.N3=40,x.N4=10,x})();class Eo{constructor(o,s){this.width=o,this.height=s;const l=new Array(s);for(let c=0;c!==s;c++)l[c]=new Uint8Array(o);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(o,s){return this.bytes[s][o]}getArray(){return this.bytes}setNumber(o,s,l){this.bytes[s][o]=l}setBoolean(o,s,l){this.bytes[s][o]=l?1:0}clear(o){for(const s of this.bytes)bt.fill(s,o)}equals(o){if(!(o instanceof Eo))return!1;const s=o;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,c=this.height;l<c;++l){const d=this.bytes[l],f=s.bytes[l];for(let h=0,y=this.width;h<y;++h)if(d[h]!==f[h])return!1}return!0}toString(){const o=new qe;for(let s=0,l=this.height;s<l;++s){const c=this.bytes[s];for(let d=0,f=this.width;d<f;++d)switch(c[d]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ")}o.append("\n")}return o.toString()}}let Do=(()=>{class x{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new qe;return s.append("<<\n"),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append("\n ecLevel: "),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append("\n version: "),s.append(this.version?this.version.toString():"null"),s.append("\n maskPattern: "),s.append(this.maskPattern.toString()),this.matrix?(s.append("\n matrix:\n"),s.append(this.matrix.toString())):s.append("\n matrix: null\n"),s.append(">>\n"),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<x.NUM_MASK_PATTERNS}}return x.NUM_MASK_PATTERNS=8,x})(),ct=(()=>{class x extends Zt{}return x.kind="WriterException",x})();class le{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,s,l,c,d){le.clearMatrix(d),le.embedBasicPatterns(l,d),le.embedTypeInfo(s,c,d),le.maybeEmbedVersionInfo(l,d),le.embedDataBits(o,c,d)}static embedBasicPatterns(o,s){le.embedPositionDetectionPatternsAndSeparators(s),le.embedDarkDotAtLeftBottomCorner(s),le.maybeEmbedPositionAdjustmentPatterns(o,s),le.embedTimingPatterns(s)}static embedTypeInfo(o,s,l){const c=new nt;le.makeTypeInfoBits(o,s,c);for(let d=0,f=c.getSize();d<f;++d){const h=c.get(c.getSize()-1-d),y=le.TYPE_INFO_COORDINATES[d];if(l.setBoolean(y[0],y[1],h),d<8){const D=l.getWidth()-d-1;l.setBoolean(D,8,h)}else{const I=l.getHeight()-7+(d-8);l.setBoolean(8,I,h)}}}static maybeEmbedVersionInfo(o,s){if(o.getVersionNumber()<7)return;const l=new nt;le.makeVersionInfoBits(o,l);let c=17;for(let d=0;d<6;++d)for(let f=0;f<3;++f){const h=l.get(c);c--,s.setBoolean(d,s.getHeight()-11+f,h),s.setBoolean(s.getHeight()-11+f,d,h)}}static embedDataBits(o,s,l){let c=0,d=-1,f=l.getWidth()-1,h=l.getHeight()-1;for(;f>0;){for(6===f&&(f-=1);h>=0&&h<l.getHeight();){for(let y=0;y<2;++y){const w=f-y;if(!le.isEmpty(l.get(w,h)))continue;let C;c<o.getSize()?(C=o.get(c),++c):C=!1,255!==s&&ur.getDataMaskBit(s,w,h)&&(C=!C),l.setBoolean(w,h,C)}h+=d}d=-d,h+=d,f-=2}if(c!==o.getSize())throw new ct("Not all bits consumed: "+c+"/"+o.getSize())}static findMSBSet(o){return 32-Ce.numberOfLeadingZeros(o)}static calculateBCHCode(o,s){if(0===s)throw new te("0 polynomial");const l=le.findMSBSet(s);for(o<<=l-1;le.findMSBSet(o)>=l;)o^=s<<le.findMSBSet(o)-l;return o}static makeTypeInfoBits(o,s,l){if(!Do.isValidMaskPattern(s))throw new ct("Invalid mask pattern");const c=o.getBits()<<3|s;l.appendBits(c,5);const d=le.calculateBCHCode(c,le.TYPE_INFO_POLY);l.appendBits(d,10);const f=new nt;if(f.appendBits(le.TYPE_INFO_MASK_PATTERN,15),l.xor(f),15!==l.getSize())throw new ct("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(o,s){s.appendBits(o.getVersionNumber(),6);const l=le.calculateBCHCode(o.getVersionNumber(),le.VERSION_INFO_POLY);if(s.appendBits(l,12),18!==s.getSize())throw new ct("should not happen but we got: "+s.getSize())}static isEmpty(o){return 255===o}static embedTimingPatterns(o){for(let s=8;s<o.getWidth()-8;++s){const l=(s+1)%2;le.isEmpty(o.get(s,6))&&o.setNumber(s,6,l),le.isEmpty(o.get(6,s))&&o.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(o){if(0===o.get(8,o.getHeight()-8))throw new ct;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,s,l){for(let c=0;c<8;++c){if(!le.isEmpty(l.get(o+c,s)))throw new ct;l.setNumber(o+c,s,0)}}static embedVerticalSeparationPattern(o,s,l){for(let c=0;c<7;++c){if(!le.isEmpty(l.get(o,s+c)))throw new ct;l.setNumber(o,s+c,0)}}static embedPositionAdjustmentPattern(o,s,l){for(let c=0;c<5;++c){const d=le.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)l.setNumber(o+f,s+c,d[f])}}static embedPositionDetectionPattern(o,s,l){for(let c=0;c<7;++c){const d=le.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)l.setNumber(o+f,s+c,d[f])}}static embedPositionDetectionPatternsAndSeparators(o){const s=le.POSITION_DETECTION_PATTERN[0].length;le.embedPositionDetectionPattern(0,0,o),le.embedPositionDetectionPattern(o.getWidth()-s,0,o),le.embedPositionDetectionPattern(0,o.getWidth()-s,o);le.embedHorizontalSeparationPattern(0,7,o),le.embedHorizontalSeparationPattern(o.getWidth()-8,7,o),le.embedHorizontalSeparationPattern(0,o.getWidth()-8,o);le.embedVerticalSeparationPattern(7,0,o),le.embedVerticalSeparationPattern(o.getHeight()-7-1,0,o),le.embedVerticalSeparationPattern(7,o.getHeight()-7,o)}static maybeEmbedPositionAdjustmentPatterns(o,s){if(o.getVersionNumber()<2)return;const l=o.getVersionNumber()-1,c=le.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=c.length;d!==f;d++){const h=c[d];if(h>=0)for(let y=0;y!==f;y++){const w=c[y];w>=0&&le.isEmpty(s.get(w,h))&&le.embedPositionAdjustmentPattern(w-2,h-2,s)}}}}le.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),le.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),le.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),le.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),le.VERSION_INFO_POLY=7973,le.TYPE_INFO_POLY=1335,le.TYPE_INFO_MASK_PATTERN=21522;class Hi{constructor(o,s){this.dataBytes=o,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ke{constructor(){}static calculateMaskPenalty(o){return ur.applyMaskPenaltyRule1(o)+ur.applyMaskPenaltyRule2(o)+ur.applyMaskPenaltyRule3(o)+ur.applyMaskPenaltyRule4(o)}static encode(o,s,l=null){let c=Ke.DEFAULT_BYTE_MODE_ENCODING;const d=null!==l&&void 0!==l.get(pt.CHARACTER_SET);d&&(c=l.get(pt.CHARACTER_SET).toString());const f=this.chooseMode(o,c),h=new nt;if(f===oe.BYTE&&(d||Ke.DEFAULT_BYTE_MODE_ENCODING!==c)){const q=X.getCharacterSetECIByName(c);void 0!==q&&this.appendECI(q,h)}this.appendModeInfo(f,h);const y=new nt;let w;if(this.appendBytes(o,f,y,c),null!==l&&void 0!==l.get(pt.QR_VERSION)){const q=Number.parseInt(l.get(pt.QR_VERSION).toString(),10);w=H.getVersionForNumber(q);const L=this.calculateBitsNeeded(f,h,y,w);if(!this.willFit(L,w,s))throw new ct("Data too big for requested version")}else w=this.recommendVersion(s,f,h,y);const C=new nt;C.appendBitArray(h);const D=f===oe.BYTE?y.getSizeInBytes():o.length;this.appendLengthInfo(D,w,f,C),C.appendBitArray(y);const I=w.getECBlocksForLevel(s),S=w.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(S,C);const b=this.interleaveWithECBytes(C,w.getTotalCodewords(),S,I.getNumBlocks()),M=new Do;M.setECLevel(s),M.setMode(f),M.setVersion(w);const R=w.getDimensionForVersion(),O=new Eo(R,R),$=this.chooseMaskPattern(b,s,w,O);return M.setMaskPattern($),le.buildMatrix(b,s,w,$,O),M.setMatrix(O),M}static recommendVersion(o,s,l,c){const d=this.calculateBitsNeeded(s,l,c,H.getVersionForNumber(1)),f=this.chooseVersion(d,o),h=this.calculateBitsNeeded(s,l,c,f);return this.chooseVersion(h,o)}static calculateBitsNeeded(o,s,l,c){return s.getSize()+o.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(o){return o<Ke.ALPHANUMERIC_TABLE.length?Ke.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,s=null){if(X.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(o))return oe.KANJI;let l=!1,c=!1;for(let d=0,f=o.length;d<f;++d){const h=o.charAt(d);if(Ke.isDigit(h))l=!0;else{if(-1===this.getAlphanumericCode(h.charCodeAt(0)))return oe.BYTE;c=!0}}return c?oe.ALPHANUMERIC:l?oe.NUMERIC:oe.BYTE}static isOnlyDoubleByteKanji(o){let s;try{s=zt.encode(o,X.SJIS)}catch{return!1}const l=s.length;if(l%2!=0)return!1;for(let c=0;c<l;c+=2){const d=255&s[c];if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(o,s,l,c){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let h=0;h<Do.NUM_MASK_PATTERNS;h++){le.buildMatrix(o,s,l,h,c);let y=this.calculateMaskPenalty(c);y<d&&(d=y,f=h)}return f}static chooseVersion(o,s){for(let l=1;l<=40;l++){const c=H.getVersionForNumber(l);if(Ke.willFit(o,c,s))return c}throw new ct("Data too big")}static willFit(o,s,l){return s.getTotalCodewords()-s.getECBlocksForLevel(l).getTotalECCodewords()>=(o+7)/8}static terminateBits(o,s){const l=8*o;if(s.getSize()>l)throw new ct("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let f=0;f<4&&s.getSize()<l;++f)s.appendBit(!1);const c=7&s.getSize();if(c>0)for(let f=c;f<8;f++)s.appendBit(!1);const d=o-s.getSizeInBytes();for(let f=0;f<d;++f)s.appendBits(1&f?17:236,8);if(s.getSize()!==l)throw new ct("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,s,l,c,d,f){if(c>=l)throw new ct("Block ID too large");const h=o%l,y=l-h,w=Math.floor(o/l),C=w+1,D=Math.floor(s/l),I=D+1,S=w-D,b=C-I;if(S!==b)throw new ct("EC bytes mismatch");if(l!==y+h)throw new ct("RS blocks mismatch");if(o!==(D+S)*y+(I+b)*h)throw new ct("Total bytes mismatch");c<y?(d[0]=D,f[0]=S):(d[0]=I,f[0]=b)}static interleaveWithECBytes(o,s,l,c){if(o.getSizeInBytes()!==l)throw new ct("Number of bits and data bytes does not match");let d=0,f=0,h=0;const y=new Array;for(let C=0;C<c;++C){const D=new Int32Array(1),I=new Int32Array(1);Ke.getNumDataBytesAndNumECBytesForBlockID(s,l,c,C,D,I);const S=D[0],b=new Uint8Array(S);o.toBytes(8*d,b,0,S);const M=Ke.generateECBytes(b,I[0]);y.push(new Hi(b,M)),f=Math.max(f,S),h=Math.max(h,M.length),d+=D[0]}if(l!==d)throw new ct("Data bytes does not match offset");const w=new nt;for(let C=0;C<f;++C)for(const D of y){const I=D.getDataBytes();C<I.length&&w.appendBits(I[C],8)}for(let C=0;C<h;++C)for(const D of y){const I=D.getErrorCorrectionBytes();C<I.length&&w.appendBits(I[C],8)}if(s!==w.getSizeInBytes())throw new ct("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(o,s){const l=o.length,c=new Int32Array(l+s);for(let f=0;f<l;f++)c[f]=255&o[f];new Vi(Be.QR_CODE_FIELD_256).encode(c,s);const d=new Uint8Array(s);for(let f=0;f<s;f++)d[f]=c[l+f];return d}static appendModeInfo(o,s){s.appendBits(o.getBits(),4)}static appendLengthInfo(o,s,l,c){const d=l.getCharacterCountBits(s);if(o>=1<<d)throw new ct(o+" is bigger than "+((1<<d)-1));c.appendBits(o,d)}static appendBytes(o,s,l,c){switch(s){case oe.NUMERIC:Ke.appendNumericBytes(o,l);break;case oe.ALPHANUMERIC:Ke.appendAlphanumericBytes(o,l);break;case oe.BYTE:Ke.append8BitBytes(o,l,c);break;case oe.KANJI:Ke.appendKanjiBytes(o,l);break;default:throw new ct("Invalid mode: "+s)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const s=Ke.getDigit(o);return s>=0&&s<=9}static appendNumericBytes(o,s){const l=o.length;let c=0;for(;c<l;){const d=Ke.getDigit(o.charAt(c));if(c+2<l){const f=Ke.getDigit(o.charAt(c+1)),h=Ke.getDigit(o.charAt(c+2));s.appendBits(100*d+10*f+h,10),c+=3}else if(c+1<l){const f=Ke.getDigit(o.charAt(c+1));s.appendBits(10*d+f,7),c+=2}else s.appendBits(d,4),c++}}static appendAlphanumericBytes(o,s){const l=o.length;let c=0;for(;c<l;){const d=Ke.getAlphanumericCode(o.charCodeAt(c));if(-1===d)throw new ct;if(c+1<l){const f=Ke.getAlphanumericCode(o.charCodeAt(c+1));if(-1===f)throw new ct;s.appendBits(45*d+f,11),c+=2}else s.appendBits(d,6),c++}}static append8BitBytes(o,s,l){let c;try{c=zt.encode(o,l)}catch(d){throw new ct(d)}for(let d=0,f=c.length;d!==f;d++)s.appendBits(c[d],8)}static appendKanjiBytes(o,s){let l;try{l=zt.encode(o,X.SJIS)}catch(d){throw new ct(d)}const c=l.length;for(let d=0;d<c;d+=2){const y=(255&l[d])<<8&4294967295|255&l[d+1];let w=-1;if(y>=33088&&y<=40956?w=y-33088:y>=57408&&y<=60351&&(w=y-49472),-1===w)throw new ct("Invalid byte sequence");s.appendBits(192*(w>>8)+(255&w),13)}}static appendECI(o,s){s.appendBits(oe.ECI.getBits(),4),s.appendBits(o.getValue(),8)}}Ke.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ke.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();let ru=(()=>{class x{write(s,l,c,d=null){if(0===s.length)throw new te("Found empty contents");if(l<0||c<0)throw new te("Requested dimensions are too small: "+l+"x"+c);let f=ce.L,h=x.QUIET_ZONE_SIZE;null!==d&&(void 0!==d.get(pt.ERROR_CORRECTION)&&(f=ce.fromString(d.get(pt.ERROR_CORRECTION).toString())),void 0!==d.get(pt.MARGIN)&&(h=Number.parseInt(d.get(pt.MARGIN).toString(),10)));const y=Ke.encode(s,f,d);return this.renderResult(y,l,c,h)}writeToDom(s,l,c,d,f=null){"string"==typeof s&&(s=document.querySelector(s));const h=this.write(l,c,d,f);s&&s.appendChild(h)}renderResult(s,l,c,d){const f=s.getMatrix();if(null===f)throw new ar;const h=f.getWidth(),y=f.getHeight(),w=h+2*d,C=y+2*d,D=Math.max(l,w),I=Math.max(c,C),S=Math.min(Math.floor(D/w),Math.floor(I/C)),b=Math.floor((D-h*S)/2),M=Math.floor((I-y*S)/2),R=this.createSVGElement(D,I);for(let O=0,$=M;O<y;O++,$+=S)for(let q=0,L=b;q<h;q++,L+=S)if(1===f.get(q,O)){const Se=this.createSvgRectElement(L,$,S,S);R.appendChild(Se)}return R}createSVGElement(s,l){const c=document.createElementNS(x.SVG_NS,"svg");return c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",l.toString()),c}createSvgRectElement(s,l,c,d){const f=document.createElementNS(x.SVG_NS,"rect");return f.setAttributeNS(null,"x",s.toString()),f.setAttributeNS(null,"y",l.toString()),f.setAttributeNS(null,"height",c.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return x.QUIET_ZONE_SIZE=4,x.SVG_NS="http://www.w3.org/2000/svg",x})(),ue=(()=>{class x{encode(s,l,c,d,f){if(0===s.length)throw new te("Found empty contents");if(l!==ae.QR_CODE)throw new te("Can only encode QR_CODE, but got "+l);if(c<0||d<0)throw new te(`Requested dimensions are too small: ${c}x${d}`);let h=ce.L,y=x.QUIET_ZONE_SIZE;null!==f&&(void 0!==f.get(pt.ERROR_CORRECTION)&&(h=ce.fromString(f.get(pt.ERROR_CORRECTION).toString())),void 0!==f.get(pt.MARGIN)&&(y=Number.parseInt(f.get(pt.MARGIN).toString(),10)));const w=Ke.encode(s,h,f);return x.renderResult(w,c,d,y)}static renderResult(s,l,c,d){const f=s.getMatrix();if(null===f)throw new ar;const h=f.getWidth(),y=f.getHeight(),w=h+2*d,C=y+2*d,D=Math.max(l,w),I=Math.max(c,C),S=Math.min(Math.floor(D/w),Math.floor(I/C)),b=Math.floor((D-h*S)/2),M=Math.floor((I-y*S)/2),R=new Ft(D,I);for(let O=0,$=M;O<y;O++,$+=S)for(let q=0,L=b;q<h;q++,L+=S)1===f.get(q,O)&&R.setRegion(L,$,S,S);return R}}return x.QUIET_ZONE_SIZE=4,x})();let Pe=(()=>{class x extends li{constructor(s,l,c,d,f,h,y,w){if(super(h,y),this.yuvData=s,this.dataWidth=l,this.dataHeight=c,this.left=d,this.top=f,d+h>l||f+y>c)throw new te("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(h,y)}getRow(s,l){if(s<0||s>=this.getHeight())throw new te("Requested row is outside the image: "+s);const c=this.getWidth();return(null==l||l.length<c)&&(l=new Uint8ClampedArray(c)),tt.arraycopy(this.yuvData,(s+this.top)*this.dataWidth+this.left,l,0,c),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.yuvData;const c=s*l,d=new Uint8ClampedArray(c);let f=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return tt.arraycopy(this.yuvData,f,d,0,c),d;for(let h=0;h<l;h++)tt.arraycopy(this.yuvData,f,d,h*s,s),f+=this.dataWidth;return d}isCropSupported(){return!0}crop(s,l,c,d){return new x(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+l,c,d,!1)}renderThumbnail(){const s=this.getWidth()/x.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/x.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(s*l),d=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let h=0;h<l;h++){const y=h*s;for(let w=0;w<s;w++)c[y+w]=4278190080|65793*(255&d[f+w*x.THUMBNAIL_SCALE_FACTOR]);f+=this.dataWidth*x.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/x.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/x.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,l){const c=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<l;d++,f+=this.dataWidth){const h=f+s/2;for(let y=f,w=f+s-1;y<h;y++,w--){const C=c[y];c[y]=c[w],c[w]=C}}}invert(){return new at(this)}}return x.THUMBNAIL_SCALE_FACTOR=2,x})();class gi extends li{constructor(o,s,l,c,d,f,h){if(super(s,l),this.dataWidth=c,this.dataHeight=d,this.left=f,this.top=h,4===o.BYTES_PER_ELEMENT){const y=s*l,w=new Uint8ClampedArray(y);for(let C=0;C<y;C++){const D=o[C];w[C]=((D>>16&255)+(D>>7&510)+(255&D))/4&255}this.luminances=w}else this.luminances=o;if(void 0===c&&(this.dataWidth=s),void 0===d&&(this.dataHeight=l),void 0===f&&(this.left=0),void 0===h&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new te("Crop rectangle does not fit within image data.")}getRow(o,s){if(o<0||o>=this.getHeight())throw new te("Requested row is outside the image: "+o);const l=this.getWidth();return(null==s||s.length<l)&&(s=new Uint8ClampedArray(l)),tt.arraycopy(this.luminances,(o+this.top)*this.dataWidth+this.left,s,0,l),s}getMatrix(){const o=this.getWidth(),s=this.getHeight();if(o===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=o*s,c=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return tt.arraycopy(this.luminances,d,c,0,l),c;for(let f=0;f<s;f++)tt.arraycopy(this.luminances,d,c,f*o,o),d+=this.dataWidth;return c}isCropSupported(){return!0}crop(o,s,l,c){return new gi(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+o,this.top+s)}invert(){return new at(this)}}class Ao extends X{static forName(o){return this.getCharacterSetECIByName(o)}}class Wr{}Wr.ISO_8859_1=X.ISO8859_1;class tl{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class nl{static singletonList(o){return[o]}static min(o,s){return o.sort(s)[0]}}class iu{constructor(o){this.previous=o}getPrevious(){return this.previous}}class cn extends iu{constructor(o,s,l){super(o),this.value=s,this.bitCount=l}appendTo(o,s){o.appendBits(this.value,this.bitCount)}add(o,s){return new cn(this,o,s)}addBinaryShift(o,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new cn(this,o,s)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+Ce.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class _n extends cn{constructor(o,s,l){super(o,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(o,s){for(let l=0;l<this.binaryShiftByteCount;l++)(0===l||31===l&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):o.appendBits(0===l?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),o.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(o,s){return new _n(this,o,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function wn(x,o,s){return new cn(x,o,s)}const Ye=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],kn=0,pi=1,un=2,Os=3,Bt=4,zi=new cn(null,0,0),Ls=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];const rl=function Io(x){for(let o of x)bt.fill(o,-1);return x[kn][Bt]=0,x[pi][Bt]=0,x[pi][kn]=28,x[Os][Bt]=0,x[un][Bt]=0,x[un][kn]=15,x}(bt.createInt32Array(6,6));class qn{constructor(o,s,l,c){this.token=o,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,s){let l=this.bitCount,c=this.token;if(o!==this.mode){let f=Ls[this.mode][o];c=wn(c,65535&f,f>>16),l+=f>>16}let d=o===un?4:5;return c=wn(c,s,d),new qn(c,o,0,l+d)}shiftAndAppend(o,s){let l=this.token,c=this.mode===un?4:5;return l=wn(l,rl[this.mode][o],c),l=wn(l,s,5),new qn(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(o){let s=this.token,l=this.mode,c=this.bitCount;if(this.mode===Bt||this.mode===un){let h=Ls[l][kn];s=wn(s,65535&h,h>>16),c+=h>>16,l=kn}let f=new qn(s,l,this.binaryShiftByteCount+1,c+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===f.binaryShiftByteCount&&(f=f.endBinaryShift(o+1)),f}endBinaryShift(o){if(0===this.binaryShiftByteCount)return this;let s=this.token;return s=function Zn(x,o,s){return new _n(x,o,s)}(s,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new qn(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let s=this.bitCount+(Ls[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?s+=qn.calculateBinaryShiftCost(o)-qn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(s+=10),s<=o.bitCount}toBitArray(o){let s=[];for(let c=this.endBinaryShift(o.length).token;null!==c;c=c.getPrevious())s.unshift(c);let l=new nt;for(const c of s)c.appendTo(l,o);return l}toString(){return we.format("%s bits=%d bytes=%d",Ye[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}qn.INITIAL_STATE=new qn(zi,kn,0,0);const dr=function ou(x){const o=we.getCharCode(" "),s=we.getCharCode("."),l=we.getCharCode(",");x[kn][o]=1;const c=we.getCharCode("Z"),d=we.getCharCode("A");for(let I=d;I<=c;I++)x[kn][I]=I-d+2;x[pi][o]=1;const f=we.getCharCode("z"),h=we.getCharCode("a");for(let I=h;I<=f;I++)x[pi][I]=I-h+2;x[un][o]=1;const y=we.getCharCode("9"),w=we.getCharCode("0");for(let I=w;I<=y;I++)x[un][I]=I-w+2;x[un][l]=12,x[un][s]=13;const C=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let I=0;I<C.length;I++)x[Os][we.getCharCode(C[I])]=I;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<D.length;I++)we.getCharCode(D[I])>0&&(x[Bt][we.getCharCode(D[I])]=I);return x}(bt.createInt32Array(5,256));class Gi{constructor(o){this.text=o}encode(){const o=we.getCharCode(" "),s=we.getCharCode("\n");let l=nl.singletonList(qn.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,h=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case we.getCharCode("\r"):f=h===s?2:0;break;case we.getCharCode("."):f=h===o?3:0;break;case we.getCharCode(","):f=h===o?4:0;break;case we.getCharCode(":"):f=h===o?5:0;break;default:f=0}f>0?(l=Gi.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return nl.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,s){const l=[];for(let c of o)this.updateStateForChar(c,s,l);return Gi.simplifyStates(l)}updateStateForChar(o,s,l){let c=255&this.text[s],d=dr[o.getMode()][c]>0,f=null;for(let h=0;h<=Bt;h++){let y=dr[h][c];if(y>0){if(null==f&&(f=o.endBinaryShift(s)),!d||h===o.getMode()||h===un){const w=f.latchAndAppend(h,y);l.push(w)}if(!d&&rl[o.getMode()][h]>=0){const w=f.shiftAndAppend(h,y);l.push(w)}}}if(o.getBinaryShiftByteCount()>0||0===dr[o.getMode()][c]){let h=o.addBinaryShiftChar(s);l.push(h)}}static updateStateListForPair(o,s,l){const c=[];for(let d of o)this.updateStateForPair(d,s,l,c);return this.simplifyStates(c)}static updateStateForPair(o,s,l,c){let d=o.endBinaryShift(s);if(c.push(d.latchAndAppend(Bt,l)),o.getMode()!==Bt&&c.push(d.shiftAndAppend(Bt,l)),3===l||4===l){let f=d.latchAndAppend(un,16-l).latchAndAppend(un,1);c.push(f)}if(o.getBinaryShiftByteCount()>0){let f=o.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(f)}}static simplifyStates(o){let s=[];for(const l of o){let c=!0;for(const d of s){if(d.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(d)&&(s=s.filter(f=>f!==d))}c&&s.push(l)}return s}}class ke{constructor(){}static encodeBytes(o){return ke.encode(o,ke.DEFAULT_EC_PERCENT,ke.DEFAULT_AZTEC_LAYERS)}static encode(o,s,l){let h,y,w,C,D,c=new Gi(o).encode(),d=Ce.truncDivision(c.getSize()*s,100)+11,f=c.getSize()+d;if(l!==ke.DEFAULT_AZTEC_LAYERS){if(h=l<0,y=Math.abs(l),y>(h?ke.MAX_NB_BITS_COMPACT:ke.MAX_NB_BITS))throw new te(we.format("Illegal value %s for layers",l));w=ke.totalBitsInLayer(y,h),C=ke.WORD_SIZE[y];let L=w-w%C;if(D=ke.stuffBits(c,C),D.getSize()+d>L)throw new te("Data to large for user specified layer");if(h&&D.getSize()>64*C)throw new te("Data to large for user specified layer")}else{C=0,D=null;for(let L=0;;L++){if(L>ke.MAX_NB_BITS)throw new te("Data too large for an Aztec code");if(h=L<=3,y=h?L+1:L,w=ke.totalBitsInLayer(y,h),f>w)continue;(null==D||C!==ke.WORD_SIZE[y])&&(C=ke.WORD_SIZE[y],D=ke.stuffBits(c,C));let Se=w-w%C;if(!(h&&D.getSize()>64*C)&&D.getSize()+d<=Se)break}}let O,I=ke.generateCheckWords(D,w,C),S=D.getSize()/C,b=ke.generateModeMessage(h,y,S),M=(h?11:14)+4*y,R=new Int32Array(M);if(h){O=M;for(let L=0;L<R.length;L++)R[L]=L}else{O=M+1+2*Ce.truncDivision(Ce.truncDivision(M,2)-1,15);let L=Ce.truncDivision(M,2),Se=Ce.truncDivision(O,2);for(let xe=0;xe<L;xe++){let rn=xe+Ce.truncDivision(xe,15);R[L-xe-1]=Se-rn-1,R[L+xe]=Se+rn+1}}let $=new Ft(O);for(let L=0,Se=0;L<y;L++){let xe=4*(y-L)+(h?9:12);for(let rn=0;rn<xe;rn++){let en=2*rn;for(let Je=0;Je<2;Je++)I.get(Se+en+Je)&&$.set(R[2*L+Je],R[2*L+rn]),I.get(Se+2*xe+en+Je)&&$.set(R[2*L+rn],R[M-1-2*L-Je]),I.get(Se+4*xe+en+Je)&&$.set(R[M-1-2*L-Je],R[M-1-2*L-rn]),I.get(Se+6*xe+en+Je)&&$.set(R[M-1-2*L-rn],R[2*L+Je])}Se+=8*xe}if(ke.drawModeMessage($,h,O,b),h)ke.drawBullsEye($,Ce.truncDivision(O,2),5);else{ke.drawBullsEye($,Ce.truncDivision(O,2),7);for(let L=0,Se=0;L<Ce.truncDivision(M,2)-1;L+=15,Se+=16)for(let xe=1&Ce.truncDivision(O,2);xe<O;xe+=2)$.set(Ce.truncDivision(O,2)-Se,xe),$.set(Ce.truncDivision(O,2)+Se,xe),$.set(xe,Ce.truncDivision(O,2)-Se),$.set(xe,Ce.truncDivision(O,2)+Se)}let q=new tl;return q.setCompact(h),q.setSize(O),q.setLayers(y),q.setCodeWords(S),q.setMatrix($),q}static drawBullsEye(o,s,l){for(let c=0;c<l;c+=2)for(let d=s-c;d<=s+c;d++)o.set(d,s-c),o.set(d,s+c),o.set(s-c,d),o.set(s+c,d);o.set(s-l,s-l),o.set(s-l+1,s-l),o.set(s-l,s-l+1),o.set(s+l,s-l),o.set(s+l,s-l+1),o.set(s+l,s+l-1)}static generateModeMessage(o,s,l){let c=new nt;return o?(c.appendBits(s-1,2),c.appendBits(l-1,6),c=ke.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(l-1,11),c=ke.generateCheckWords(c,40,4)),c}static drawModeMessage(o,s,l,c){let d=Ce.truncDivision(l,2);if(s)for(let f=0;f<7;f++){let h=d-3+f;c.get(f)&&o.set(h,d-5),c.get(f+7)&&o.set(d+5,h),c.get(20-f)&&o.set(h,d+5),c.get(27-f)&&o.set(d-5,h)}else for(let f=0;f<10;f++){let h=d-5+f+Ce.truncDivision(f,5);c.get(f)&&o.set(h,d-7),c.get(f+10)&&o.set(d+7,h),c.get(29-f)&&o.set(h,d+7),c.get(39-f)&&o.set(d-7,h)}}static generateCheckWords(o,s,l){let c=o.getSize()/l,d=new Vi(ke.getGF(l)),f=Ce.truncDivision(s,l),h=ke.bitsToWords(o,l,f);d.encode(h,f-c);let y=s%l,w=new nt;w.appendBits(0,y);for(const C of Array.from(h))w.appendBits(C,l);return w}static bitsToWords(o,s,l){let d,f,c=new Int32Array(l);for(d=0,f=o.getSize()/s;d<f;d++){let h=0;for(let y=0;y<s;y++)h|=o.get(d*s+y)?1<<s-y-1:0;c[d]=h}return c}static getGF(o){switch(o){case 4:return Be.AZTEC_PARAM;case 6:return Be.AZTEC_DATA_6;case 8:return Be.AZTEC_DATA_8;case 10:return Be.AZTEC_DATA_10;case 12:return Be.AZTEC_DATA_12;default:throw new te("Unsupported word size "+o)}}static stuffBits(o,s){let l=new nt,c=o.getSize(),d=(1<<s)-2;for(let f=0;f<c;f+=s){let h=0;for(let y=0;y<s;y++)(f+y>=c||o.get(f+y))&&(h|=1<<s-1-y);(h&d)===d?(l.appendBits(h&d,s),f--):h&d?l.appendBits(h,s):(l.appendBits(1|h,s),f--)}return l}static totalBitsInLayer(o,s){return((s?88:112)+16*o)*o}}ke.DEFAULT_EC_PERCENT=33,ke.DEFAULT_AZTEC_LAYERS=0,ke.MAX_NB_BITS=32,ke.MAX_NB_BITS_COMPACT=4,ke.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ut{encode(o,s,l,c){return this.encodeWithHints(o,s,l,c,null)}encodeWithHints(o,s,l,c,d){let f=Wr.ISO_8859_1,h=ke.DEFAULT_EC_PERCENT,y=ke.DEFAULT_AZTEC_LAYERS;return null!=d&&(d.has(pt.CHARACTER_SET)&&(f=Ao.forName(d.get(pt.CHARACTER_SET).toString())),d.has(pt.ERROR_CORRECTION)&&(h=Ce.parseInt(d.get(pt.ERROR_CORRECTION).toString())),d.has(pt.AZTEC_LAYERS)&&(y=Ce.parseInt(d.get(pt.AZTEC_LAYERS).toString()))),Ut.encodeLayers(o,s,l,c,f,h,y)}static encodeLayers(o,s,l,c,d,f,h){if(s!==ae.AZTEC)throw new te("Can only encode AZTEC, but got "+s);let y=ke.encode(we.getBytes(o,d),f,h);return Ut.renderResult(y,l,c)}static renderResult(o,s,l){let c=o.getMatrix();if(null==c)throw new ar;let d=c.getWidth(),f=c.getHeight(),h=Math.max(s,d),y=Math.max(l,f),w=Math.min(h/d,y/f),C=(h-d*w)/2,D=(y-f*w)/2,I=new Ft(h,y);for(let S=0,b=D;S<f;S++,b+=w)for(let M=0,R=C;M<d;M++,R+=w)c.get(M,S)&&I.setRegion(R,b,w,w);return I}}W.AbstractExpandedDecoder=bs,W.ArgumentException=gn,W.ArithmeticException=Ds,W.AztecCode=tl,W.AztecCodeReader=Ln,W.AztecCodeWriter=Ut,W.AztecDecoder=Va,W.AztecDetector=za,W.AztecDetectorResult=Ha,W.AztecEncoder=ke,W.AztecHighLevelEncoder=Gi,W.AztecPoint=nn,W.BarcodeFormat=ae,W.Binarizer=Cs,W.BinaryBitmap=ir,W.BitArray=nt,W.BitMatrix=Ft,W.BitSource=Ms,W.BrowserAztecCodeReader=class Ga extends Ur{constructor(o=500){super(new Ln,o)}},W.BrowserBarcodeReader=class qa extends Ur{constructor(o=500,s){super(new Hr(s),o,s)}},W.BrowserCodeReader=Ur,W.BrowserDatamatrixCodeReader=class it extends Ur{constructor(o=500){super(new fi,o)}},W.BrowserMultiFormatReader=class ut extends Ur{constructor(o=null,s=500){const l=new nu;l.setHints(o),super(l,s)}decodeBitmap(o){return this.reader.decodeWithState(o)}},W.BrowserPDF417Reader=class Uh extends Ur{constructor(o=500){super(new et,o)}},W.BrowserQRCodeReader=class jh extends Ur{constructor(o=500){super(new zr,o)}},W.BrowserQRCodeSvgWriter=ru,W.CharacterSetECI=X,W.ChecksumException=Rt,W.Code128Reader=Z,W.Code39Reader=Ss,W.DataMatrixDecodedBitStreamParser=lt,W.DataMatrixReader=fi,W.DecodeHintType=st,W.DecoderResult=Mi,W.DefaultGridSampler=vs,W.DetectorResult=Oi,W.EAN13Reader=co,W.EncodeHintType=pt,W.Exception=Zt,W.FormatException=K,W.GenericGF=Be,W.GenericGFPoly=qt,W.GlobalHistogramBinarizer=ft,W.GridSampler=Is,W.GridSamplerInstance=Ar,W.HTMLCanvasElementLuminanceSource=sr,W.HybridBinarizer=ve,W.ITFReader=rt,W.IllegalArgumentException=te,W.IllegalStateException=ar,W.InvertedLuminanceSource=at,W.LuminanceSource=li,W.MathUtils=je,W.MultiFormatOneDReader=Hr,W.MultiFormatReader=nu,W.MultiFormatWriter=class el{encode(o,s,l,c,d){let f;if(s!==ae.QR_CODE)throw new te("No encoder available for format "+s);return f=new ue,f.encode(o,s,l,c,d)}},W.NotFoundException=U,W.OneDReader=Tt,W.PDF417DecodedBitStreamParser=k,W.PDF417DecoderErrorCorrection=Kc,W.PDF417Reader=et,W.PDF417ResultMetadata=cr,W.PerspectiveTransform=pn,W.PlanarYUVLuminanceSource=Pe,W.QRCodeByteMatrix=Eo,W.QRCodeDataMask=ln,W.QRCodeDecodedBitStreamParser=Ee,W.QRCodeDecoderErrorCorrectionLevel=ce,W.QRCodeDecoderFormatInformation=kt,W.QRCodeEncoder=Ke,W.QRCodeEncoderQRCode=Do,W.QRCodeMaskUtil=ur,W.QRCodeMatrixUtil=le,W.QRCodeMode=oe,W.QRCodeReader=zr,W.QRCodeVersion=H,W.QRCodeWriter=ue,W.RGBLuminanceSource=gi,W.RSS14Reader=wt,W.RSSExpandedReader=V,W.ReaderException=Co,W.ReedSolomonDecoder=Ri,W.ReedSolomonEncoder=Vi,W.ReedSolomonException=Ni,W.Result=gt,W.ResultMetadataType=Oe,W.ResultPoint=re,W.StringUtils=we,W.UnsupportedOperationException=or,W.VideoInputDevice=ja,W.WhiteRectangleDetector=ci,W.WriterException=ct,W.ZXingArrays=bt,W.ZXingCharset=Ao,W.ZXingInteger=Ce,W.ZXingStandardCharsets=Wr,W.ZXingStringBuilder=qe,W.ZXingStringEncoding=zt,W.ZXingSystem=tt,W.createAbstractExpandedDecoder=Za,Object.defineProperty(W,"__esModule",{value:!0})}(ka)}},Fa=>{Fa(Fa.s=293)}]);